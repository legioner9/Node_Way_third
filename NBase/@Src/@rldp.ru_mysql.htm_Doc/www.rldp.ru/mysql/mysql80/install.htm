<html>
<head>
  <META NAME="Author" CONTENT="Alexey V. Pautov">
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
  <title>Глава 2. Установка и обновление MySQL</title>
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2" />
</head>

<body>
<script type="text/javascript">
nN = navigator.appName;
function fsearch(str)
{
  if (document.fform.myradio[0].checked) {
     open('../../../yandex.ru/sitesearch@text=' + str + '&site=' +
          document.location.hostname);
  } else {open('../../../yandex.ru/sitesearch@text=' + str);}
}

function MouseUpHandler(e)
{
  if (nN == 'Netscape' || nN == 'Opera') {
     if (document.getSelection()) {
        str = document.getSelection();
        newstr = str.replace(/\n+/g, ' ');
        str = newstr.replace(/\ +/g, ' ');
        if (str.length > 100) {
           var i;
           i = 0;
           str = str.slice(0, 100);
           i = str.lastIndexOf(' ');
           if (i > 0){str = str.slice(0, i);}
        }
        document.fform.strf.value = str;
     }
  } else if(nN == 'Microsoft Internet Explorer') {
    if (document.selection.createRange()) {
       var range = document.selection.createRange();
       var str = range.text;
    }
    if (str) {
       str = str.replace(/\ +/g, " ");
       document.fform.strf.value = str;
    }
  }
  return true;
}
if (window.Event) {document.captureEvents(Event.MOUSEUP);}
document.onmouseup = MouseUpHandler;
</script>

<center><table><tr><td><a href="../../default.htm">
<IMG SRC="../../img/b_book.gif" ALT="RussianLDP" HEIGHT=48 WIDTH=55
ALIGN=ABSCENTER></a></td>

<td><!--Rating@Mail.ru COUNTEr-->
<a target=_top href="../../../top.mail.ru/jump@from=1364238">
<img src="../../../d1.cd.b4.a1.top.list.ru/counter@id=1364238;t=230"
border=0 height=31 width=88 alt="Рейтинг@Mail.ru"/></a>
</td><!--/COUNTER-->

<td><!-- begin of Top100 code -->
<script id="top100Counter" type="text/javascript"
src="../../../cnt.rambler.ru/top100.jcn@1448139"></script>
<noscript><a href="../../../top100.rambler.ru/top100/default.htm">
<img src="../../../cnt.rambler.ru/top100.cnt@1448139" alt="Rambler's Top100"
width="81" height="63" border="0" /></a></noscript>
<!-- end of Top100 code --></td>

<td><!-- HotLog -->
<script type="text/javascript" language="javascript">
hotlog_js="1.0";
hotlog_r=""+Math.random()+"&s=525943&im=127&r="+escape(document.referrer)+
"&pg="+escape(window.location.href);
document.cookie="hotlog=1; path=/"; hotlog_r+="&c="+(document.cookie?"Y":"N");
</script>
<script type="text/javascript" language="javascript1.1">
hotlog_js="1.1";hotlog_r+="&j="+(navigator.javaEnabled()?"Y":"N")
</script>

<script type="text/javascript" language="javascript1.2">
hotlog_js="1.2";
hotlog_r+="&wh="+screen.width+'x'+screen.height+"&px="+
(((navigator.appName.substring(0,3)=="Mic"))?
screen.colorDepth:screen.pixelDepth)</script>

<script type="text/javascript" language="javascript1.3">
hotlog_js="1.3"</script>
<script type="text/javascript" language="javascript">
hotlog_r+="&js="+hotlog_js;
document.write("<a href='../../../click.hotlog.ru/@525943' target='_top'>
<img "+" src='http://hit27.hotlog.ru/cgi-bin/hotlog/count?"+
hotlog_r+"&' border=0 width=88 height=31 alt=HotLog><\/a>")</script>

<noscript>
<a href="../../../click.hotlog.ru/@525943" target="_top">
<img src="../../../hit27.hotlog.ru/cgi-bin/hotlog/count@s=525943&im=127"
border="0" width="88" height="31" alt="HotLog"></a></noscript></td>
<!-- /HotLog -->

<td><!--LiveInternet counter--><script type="text/javascript"><!--
document.write("<a href='../../../www.liveinternet.ru/click' "+
"target=_blank><img src='http://counter.yadro.ru/hit?t52.15;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+"' alt='' title='LiveInternet: показано число просмотров и"+
" посетителей за 24 часа' "+"border=0 width=88 height=31><\/a>")//-->
</script></td></tr>
<!--/LiveInternet-->

<tr><td><FONT SIZE=-1><b>WebMoney:&nbsp;</b><br>
WMZ Z294115950220&nbsp;<br>
WMR R409981405661&nbsp;<br>
WME E134003968233&nbsp;</FONT></td>

<td><FONT SIZE=-1><b>Visa&nbsp;</b><br>
4274 3200 2453 6495&nbsp;</FONT></td>
</tr></table></center>
<P><index><table><tr><td>

<h1><a name="installing"></a>Глава 2. Установка и обновление MySQL</h1>
<p>Эта глава описывает, как получить и установить MySQL.
Более поздние разделы обеспечивают детали. Если Вы планируете обновить
существующую версию MySQL к более новой версии, а не установить MySQL
впервые, см. <a href="#upgrading">раздел 2.10.1</a>.</p>

<p>Если Вы интересуетесь переходом к MySQL от другой системы базы данных,
см. <a href="faqs.html#faqs-migration">раздел A.8</a>, который содержит
ответы на некоторые общие вопросы относительно проблем перехода.</p>

<p>Установка MySQL вообще следует за шагами, обрисованными в
общих чертах здесь:</p>
<ol type="1"><li><p><span><strong>Определите, работает ли MySQL и поддержан
на Вашей платформе</strong></span>.</p>

<p>Пожалуйста, отметьте, что не все платформы являются одинаково подходящими
для того, чтобы выполнить MySQL, и что не все платформы, на которых MySQL,
как известно, работает, официально поддержаны Oracle Corporation. Для
информации о тех платформах, которые официально поддержаны, см.
<a href="../../../www.mysql.com/support/supportedplatforms/database.html"
target="_top">http://www.mysql.com/support/supportedplatforms/database.html
</a>.</li>

<li><span><strong>Выберите, который дистрибутив установить</strong></span>.
</p>
<p>Несколько версий MySQL доступны, и большинство доступно в нескольких
форматах. Вы можете выбрать из предварительно упакованных, содержащих
предварительно собранные программы или исходный код. Когда в сомнении,
используйте двоичный дистрибутив. Oracle также обеспечивает доступ к
исходному коду MySQL для тех, кто хочет видеть недавние события и проверить
новый код. Чтобы определить, какую версию и тип Вы должны использовать, см.
<a href="#which-version">раздел 2.1.1</a>.</li>

<li><span><strong>Загрузите дистрибутив, который Вы хотите установить
</strong></span>.</p>
<p>Для инструкций см. <a href="#getting-mysql">раздел 2.1.2</a>.
Чтобы проверить целостность, используйте инструкции в
<a href="#verifying-package-integrity">разделе 2.1.3</a>.</li>

<li><span><strong>Установите дистрибутив</strong></span>.</p>
<p>Чтобы установить MySQL из двоичного дистрибутива, используйте инструкции в
<a href="#binary-installation">разделе 2.2</a>.</p>

<p>Чтобы установить MySQL из исходного дистрибутива или текущего исходного
дерева развития, используйте инструкции в
<a href="#source-installation">разделе 2.8</a>.</li>

<li><span><strong>Выполните любую необходимую постустановку</strong></span>.
</p>
<p>После установки MySQL см. <a href="#postinstallation">раздел
2.9</a> для информации об удостоверении, что сервер MySQL работает должным
образом. Также обратитесь к информации, предоставленной в
<a href="#default-privileges">разделе 2.9.4</a>.
Этот раздел описывает, как обеспечить начальную учетную запись пользователя
MySQL <code>root</code> <span><em>у которой нет никакого пароля</em></span>,
пока Вы не назначите его.</li>

<li>Если Вы хотите выполнить эталонные тесты MySQL, поддержка Perl MySQL
должна быть доступной. См. <a href="#perl-support">раздел 2.11</a>.
</p></li></ol>

<p>Инструкции для того, чтобы установить MySQL на различных платформах и
окружающих средах доступны:</p>
<ul><li><p><span><strong>Unix, Linux, FreeBSD</strong></span></p>
<p>Для инструкций по установке MySQL на большинстве платформ Linux и Unix,
используя двоичный дистрибутив (например, <code>.tar.gz</code>), см.
<a href="#binary-installation">раздел 2.2</a>.</p>

<p>Для информации о создании MySQL полностью из
дистрибутивов исходного кода или репозитариев исходного кода см.
<a href="#source-installation">раздел 2.8</a>.</p>

<p>Для определенной справки о платформе см.
соответствующий раздел платформы:</p>
<ul><li><p>Linux: <a href="#linux-installation">раздел 2.5</a>.
</li>

<li>Solaris и OpenSolaris, включая форматы PKG и IPS:
<a href="#solaris-installation">раздел 2.6</a>.</li>
<li>IBM AIX: <a href="#solaris-installation">раздел 2.6</a>.</li>
<li>FreeBSD: <a href="#freebsd-installation">раздел 2.7</a>.
</p></li></ul></li>

<li><p><span><strong>Microsoft Windows</strong></span></p>
<p>Для инструкций по установке MySQL на Microsoft Windows, используя
MySQL Installer или Zip-файл см.
<a href="#windows-installation">раздел 2.3</a>.</p>

<p>Для информации об управлении экземплярами MySQL см.
<a href="#windows-notifier">раздел 2.3.4</a>.</p>
<p>Для деталей и инструкций по созданию MySQL из исходного кода с
использованием Microsoft Visual Studio см.
<a href="#source-installation">раздел 2.8</a>.</li>

<li><span><strong>OS X</strong></span></p>
<p>Для установки на OS X, включая использование двоичного пакета и
формата PKG см. <a href="#osx-installation">раздел 2.4</a>.</p>

<p>Для информации об использовании OS X Launch Daemon, чтобы автоматически
запустить и остановить MySQL см.
<a href="#osx-installation-launchd">раздел 2.4.3</a>.</p>

<p>Для информации о MySQL Preference Pane см.
<a href="#osx-installation-prefpane">раздел 2.4.4</a>.
</p></li></ul>

<h2><a name="general-installation-issues"></a>2.1.
Общее руководство по установке</h2>
<p>Следующие разделы содержат информацию, необходимую, чтобы выбрать,
загрузить и проверить Ваш дистрибутив. Инструкции в более поздних разделах
главы описывают, как установить дистрибутив, который Вы выбираете. Для
двоичных дистрибутивов см. инструкции в
<a href="#binary-installation">разделе 2.2</a> или соответствующем
разделе для Вашей платформы при наличии. Чтобы создать MySQL из исходных
текстов, используйте инструкции в
<a href="#source-installation">разделе 2.8</a>.</p>

<h3><a name="which-version"></a>2.1.1.
Какую версию MySQL и дистрибутив установить</h3>
<p>MySQL доступен на многих операционных системах и платформах. Для
информации о платформах, поддержанных
<a href="../../../dev.mysql.com/doc/mysql-development-cycle/en/ga-releases.html"
target="_top">GA releases</a> MySQL см.
<a href="../../../www.mysql.com/support/supportedplatforms/database.html"
target="_top">http://www.mysql.com/support/supportedplatforms/database.html
</a>. Для версий развития MySQL доступных для многих платформ, см.
<a href="../../../dev.mysql.com/downloads/mysql/8.0.html" target="_top">
http://dev.mysql.com/downloads/mysql/8.0.html</a>.
Чтобы узнать больше о поддержке MySQL, см.
<a href="../../../www.mysql.com/support/default.htm" target="_top">
http://www.mysql.com/support/</a>.</p>

<p>Готовясь устанавливать MySQL, решите, который формат
дистрибутива и версию использовать.</p>
<p>Во-первых, решите, установить ли выпуск развития или General Availability
(GA). Выпуски развития имеют новейшие особенности, но не рекомендуются для
производственного использования. Выпуски GA, также названные устойчивыми
выпусками, предназначаются для производственного использования. Мы
рекомендуем использовать новый выпуск GA.</p>

<p>Схема именования в MySQL 8.0 применяет имена, которые состоят из трех
чисел и дополнительного суффикса: например,
<span><strong>mysql-8.0.0-dmr</strong></span>.
Числа в пределах имени выпуска интерпретируются следующим образом:</p>

<ul><li><p>Первый номер (<span><strong>8</strong></span>)
главный номер версии.</li>
<li>Второй номер (<span><strong>0</strong></span>) младший
номер версии. Взятые вместе главный и младший номера составляют серийный
номер выпуска. Серийный номер описывает устойчивый набор функций.</li>

<li>Третий номер (<span><strong>0</strong></span>) номер версии в пределах
ряда выпуска. Это постепенно увеличено для каждого нового выпуска с
исправлением ошибок. В большинстве случаев новая версия в пределах ряда
это лучший выбор.</p></li></ul>

<p>Имена выпуска могут также включать суффикс, чтобы указать на уровень
стабильности выпуска. Выпуски в пределах ряда прогрессируют через ряд
суффиксов, чтобы указать, как уровень стабильности
улучшается. Возможные суффиксы:</p>

<ul><li><p><span><strong>dmr</strong></span>
указывает на выпуск развития (DMR). Развитие MySQL использует модель меток,
в которой каждая метка вводит маленькое подмножество полностью проверенных
особенностей. От одной метки до следующих особенности могут измениться или
даже быть удалены, основываясь на обратной связи, обеспеченной членами
сообщества, которые пробуют эти выпуски. Особенности в пределах выпусков,
имеют качество подготовки производства.</li>

<li><span><strong>rc</strong></span> указывает на
Release Candidate (RC). Они устойчивы, завершив все внутреннее тестирование
MySQL. Новые особенности могут все еще быть введены в RC-выпуски,
но внимание обращено к исправлению ошибок, чтобы стабилизировать особенности,
введенные ранее в пределах ряда.</li>

<li>Отсутствие суффикса указывает на General Availability (GA) Production.
Выпуски GA устойчивы, успешно пройдя через более ранние этапы выпуска, и, как
полагают, являются надежными, свободными от серьезных ошибок, и подходящими
для использования в производственных системах.</p></li></ul>

<p>Развитие в пределах ряда начинается с выпусков DMR, сопровождаемых RC,
и наконец достигает выпусков состояния GA.</p>
<p>После выбора, которую версию MySQL установить, решите, который формат
дистрибутива установить для Вашей операционной системы. Для большинства
случаев использования подходит двоичный дистрибутив. Двоичные дистрибутивы
доступны в родном формате для многих платформ, как пакеты RPM для Linux или
DMG для OS X. Дистрибутивы также доступны в большем количестве форматов,
таких как архивы Zip или сжатые файлы <span><strong>tar</strong></span>.
В Windows Вы можете использовать <a href="#mysql-installer">MySQL
Installer</a>, чтобы установить двоичный дистрибутив.</p>

<p>При некоторых обстоятельствах может быть предпочтительно установить MySQL
из исходного дистрибутива:</p>
<ul><li><p>Вы хотите установить MySQL в некотором явном местоположении.
Стандартные двоичные дистрибутивы готовы работать в любом местоположении
установки, но Вы могли бы потребовать больше гибкости в размещении
компонентов MySQL, где Вы хотите.</li>

<li>Вы хотите сконфигурировать <a href="programs.htm#mysqld"><span><strong>
mysqld</strong></span></a> с особенностями, которые не могли бы быть включены
в стандартные двоичные дистрибутива. Вот список наиболее распространенных
дополнительных опций, используемых, чтобы гарантировать доступность:</p>

<ul><li><p><a href="#option_cmake_with_libwrap"><code>
-DWITH_LIBWRAP=1</code></a> для поддержки TCP wrappers.</li>
<li><a href="#option_cmake_with_zlib"><code>
-DWITH_ZLIB={system|bundled}</code></a> для особенностей, которые
зависят от сжатия.</li>
<li><a href="#option_cmake_with_debug"><code>-DWITH_DEBUG=1</code>
</a> для того, чтобы отладить.</p></li></ul>
<p>Для дополнительной информации см.
<a href="#source-configuration-options">раздел 2.8.4</a>.</li>

<li>Вы хотите сконфигурировать <a href="programs.htm#mysqld"><span><strong>
mysqld</strong></span></a> без некоторых особенностей, которые включены в
стандартные двоичные дистрибутивы.</li>

<li>Вы хотите изменить C и C++ код, который составляет MySQL. С этой целью
получите исходный дистрибутив.</li>
<li>Исходные дистрибутивы содержат больше тестов и примеров, чем двоичные.
</p></li></ul>

<h3><a name="getting-mysql"></a>2.1.2. Как получить MySQL</h3>
<p>Проверьте нашу страницу загрузок <a href="../../../dev.mysql.com/downloads/default.htm"
target="_top">http://dev.mysql.com/downloads/</a>
для информации о текущей версии MySQL и для того, чтобы загрузить инструкции.
Полный современный список зеркал сайта есть на
<a href="../../../dev.mysql.com/downloads/mirrors.html" target="_top">
http://dev.mysql.com/downloads/mirrors.html</a>.
Вы можете также найти там информацию о создании зеркала сайта MySQL и том,
как сообщить о плохом или устаревшем зеркале.</p>

<p>Для RPM Linux, которые используют Yum в качестве их системы управления
пакетами, MySQL может быть установлен, используя
<a href="../../../dev.mysql.com/downloads/repo/yum/default.htm" target="_top">MySQL Yum
Repository</a>. См.
<a href="#linux-installation-yum-repo">раздел 2.5.1</a>.</p>

<p>Для многих Debian Linux, таких как Ubuntu, MySQL может быть установлен,
используя <a href="../../../dev.mysql.com/downloads/repo/apt/default.htm" target="_top">
MySQL APT Repository</a>. См.
<a href="#linux-installation-apt-repo">раздел 2.5.2</a>.</p>

<p>Для SUSE Linux Enterprise Server (SLES) MySQL может быть установлен,
используя <a href="../../../dev.mysql.com/downloads/repo/suse/default.htm" target="_top">
MySQL SLES Repository</a>. См.
<a href="#linux-installation-sles-repo">раздел 2.5.3</a>.</p>
<p>Чтобы получить исходные тексты см.
<a href="#installing-development-tree">раздел 2.8.3</a>.</p>

<h3><a name="verifying-package-integrity"></a>2.1.3.
Подтверждение целостности пакета, используя контрольные суммы MD5 или GnuPG
</h3>
<p>После загрузки пакета MySQL, который удовлетворяет Вашим потребностям
прежде, чем попытаться установить его, удостоверьтесь, что он не поврежден.
Есть три средства проверки целостности:</p>

<ul><li><p>Контрольные суммы MD5.</li>
<li>Использование подписей <code>GnuPG</code>, GNU Privacy Guard.</li>
<li>Для пакетов RPM встроенный механизм контроля соблюдения целостности RPM.
</p></li></ul>

<p>Следующие разделы описывают, как использовать эти методы.</p>
<p>Если Вы замечаете, что контрольная сумма MD5 или подпись GPG не
соответствуют, сначала попытайтесь загрузить соответствующий пакет еще раз,
возможно, с другого зеркала сайта.</p>

<h4><a name="verifying-md5-checksum"></a>2.1.3.1.
Подтверждение контрольной суммы MD5</h4>
<p>После того, как Вы загрузили пакет MySQL, Вы должны удостовериться, что
его контрольная сумма MD5 соответствует обеспеченной на странице загрузки
MySQL. У каждого пакета есть отдельная контрольная сумма, что Вы можете
проверить для пакета, что загружали. Правильные контрольные суммы MD5
перечислены на странице загрузок для каждого продукта MySQL, сравните это с
контрольной суммой MD5 файла, который Вы загружаете.</p>

<p>Каждая операционная система и установка предлагают свою собственную версию
инструментов для того, чтобы проверить контрольную сумму MD5. Как правило,
команду называют <span><strong>md5sum</strong></span> или это можно назвать
<span><strong>md5</strong></span>, некоторые операционные системы не
поставляют это вообще. В Linux это часть пакета <span><strong>GNU Text
Utilities</strong></span>, который доступен для широкого диапазона платформ.
Вы можете также загрузить исходный код с
<a href="../../../www.gnu.org/software/textutils/default.htm" target="_top">
http://www.gnu.org/software/textutils/</a>. Если Вы устанавливали OpenSSL,
можете использовать команду <span><strong>openssl md5 <em><code>package_name
</code></em></strong></span>. Windows <span><strong>md5</strong></span>
доступна с <a href="../../../www.fourmilab.ch/md5/default.htm" target="_top">
http://www.fourmilab.ch/md5/</a>. <span><strong>winMd5Sum</strong></span>
графический инструмент проверки MD5, который может быть получен из
<a href="../../../www.nullriver.com/index/products/winmd5sum" target="_top">
http://www.nullriver.com/index/products/winmd5sum</a>.
Наши примеры для Microsoft Windows используют имя
<span><strong>md5.exe</strong></span>.</p>

<p>
Linux и Microsoft Windows:
<pre>
shell&gt; md5sum mysql-standard-8.0.1-linux-i686.tar.gz
aaab65abbec64d5e907dcd41b8699945mysql-standard-8.0.1-linux-i686.tar.gz

shell&gt; md5.exe mysql-installer-community-8.0.1.msi
aaab65abbec64d5e907dcd41b8699945mysql-installer-community-8.0.1.msi
</pre>

<p>Вы должны проверить, что получающаяся контрольная сумма (строка
шестнадцатеричных цифр) соответствует выведенной на экран на странице
загрузки сразу после соответствующего пакета.</p>

<p>Удостоверьтесь, что проверили контрольную сумму <span><em>архивного файла
</em></span> (например, <code>.zip</code>, <code>.tar.gz</code> или
<code>.msi</code>), а не файлов, которые содержатся в архиве. Другими
словами, проверьте файл прежде, чем извлечь его содержание.</p>

<h4><a name="checking-gpg-signature"></a>2.1.3.2.
Проверка подписи, используя GnuPG</h4>
<p>Другой метод подтверждения целостности и подлинности пакета должен
использовать цифровые подписи. Это более надежно, чем использование
<a href="#verifying-md5-checksum">контрольных сумм MD5</a>,
но требует большей работы.</p>

<p>Мы подписываем загружаемые пакеты MySQL с помощью
<span><strong>GnuPG</strong></span> (GNU Privacy Guard).
<span><strong>GnuPG</strong></span> это Open Source альтернатива известной
Pretty Good Privacy (<span><strong>PGP</strong></span>) by Phil Zimmermann.
См. <a href="../../../www.gnupg.org/default.htm" target="_top">http://www.gnupg.org/</a>
для получения дополнительной информации о <span><strong>GnuPG</strong></span>
и том, как получить и установить его на Вашей системе. Большинство
дистрибутивов Linux идут с <span><strong>GnuPG</strong></span>
по умолчанию. Для получения дополнительной информации о
<span><strong>GnuPG</strong></span> см.
<a href="../../../www.openpgp.org/default.htm" target="_top">
http://www.openpgp.org/</a>.</p>

<p>Чтобы проверить подпись для определенного пакета, Вы сначала должны
получить копию публичного ключа GPG, который Вы можете загрузить с
<a href="../../../pgp.mit.edu/default.htm" target="_top">http://pgp.mit.edu/</a>.
Ключ, который Вы хотите получить, называется
<code>mysql-build@oss.oracle.com</code>. Альтернативно, Вы можете скопировать
и вставить ключ непосредственно из следующего текста:
<pre>
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.9 (SunOS)

mQGiBD4+owwRBAC14GIfUfCyEDSIePvEW3SAFUdJBtoQHH/nJKZyQT7h9bPlUWC3
RODjQReyCITRrdwyrKUGku2FmeVGwn2u2WmDMNABLnpprWPkBdCk96+OmSLN9brZ
fw2vOUgCmYv2hW0hyDHuvYlQA/BThQoADgj8AW6/0Lo7V1W9/8VuHP0gQwCgvzV3
BqOxRznNCRCRxAuAuVztHRcEAJooQK1+iSiunZMYD1WufeXfshc57S/+yeJkegNW
hxwR9pRWVArNYJdDRT+rf2RUe3vpquKNQU/hnEIUHJRQqYHo8gTxvxXNQc7fJYLV
K2HtkrPbP72vwsEKMYhhr0eKCbtLGfls9krjJ6sBgACyP/Vb7hiPwxh6rDZ7ITnE
kYpXBACmWpP8NJTkamEnPCia2ZoOHODANwpUkP43I7jsDmgtobZX9qnrAXw+uNDI
QJEXM6FSbi0LLtZciNlYsafwAPEOMDKpMqAK6IyisNtPvaLd8lH0bPAnWqcyefep
rv0sxxqUEMcM3o7wwgfN83POkDasDbs3pjwPhxvhz6//62zQJ7Q2TXlTUUwgUmVs
ZWFzZSBFbmdpbmVlcmluZyA8bXlzcWwtYnVpbGRAb3NzLm9yYWNsZS5jb20+iGkE
ExECACkCGyMGCwkIBwMCBBUCCAMEFgIDAQIeAQIXgAIZAQUCUwHUZgUJGmbLywAK
CRCMcY07UHLh9V+DAKCjS1gGwgVI/eut+5L+l2v3ybl+ZgCcD7ZoA341HtoroV3U
6xRD09fUgeq0O015U1FMIFBhY2thZ2Ugc2lnbmluZyBrZXkgKHd3dy5teXNxbC5j
b20pIDxidWlsZEBteXNxbC5jb20+iG8EMBECAC8FAk53Pa0oHSBidWlsZEBteXNx
bC5jb20gd2lsbCBzdG9wIHdvcmtpbmcgc29vbgAKCRCMcY07UHLh9bU9AJ9xDK0o
xJFL9vTl9OSZC4lX0K9AzwCcCrS9cnJyz79eaRjL0s2r/CcljdyIZQQTEQIAHQUC
R6yUtAUJDTBYqAULBwoDBAMVAwIDFgIBAheAABIJEIxxjTtQcuH1B2VHUEcAAQGu
kgCffz4GUEjzXkOi71VcwgCxASTgbe0An34LPr1j9fCbrXWXO14msIADfb5piEwE
ExECAAwFAj4+o9EFgwlmALsACgkQSVDhKrJykfIk4QCfWbEeKN+3TRspe+5xKj+k
QJSammIAnjUz0xFWPlVx0f8o38qNG1bq0cU9iEwEExECAAwFAj5CggMFgwliIokA
CgkQtvXNTca6JD+WkQCgiGmnoGjMojynp5ppvMXkyUkfnykAoK79E6h8rwkSDZou
iz7nMRisH8uyiEYEEBECAAYFAj+s468ACgkQr8UjSHiDdA/2lgCg21IhIMMABTYd
p/IBiUsP/JQLiEoAnRzMywEtujQz/E9ono7H1DkebDa4iEYEEBECAAYFAj+0Q3cA
CgkQhZavqzBzTmbGwwCdFqD1frViC7WRt8GKoOS7hzNN32kAnirlbwpnT7a6NOsQ
83nk11a2dePhiEYEEBECAAYFAkNbs+oACgkQi9gubzC5S1x/dACdELKoXQKkwJN0
gZztsM7kjsIgyFMAnRRMbHQ7V39XC90OIpaPjk3a01tgiEYEExECAAYFAkTxMyYA
CgkQ9knE9GCTUwwKcQCgibak/SwhxWH1ijRhgYCo5GtM4vcAnAhtzL57wcw1Kg1X
m7nVGetUqJ7fiEwEEBECAAwFAkGBywEFgwYi2YsACgkQGFnQH2d7oexCjQCcD8sJ
NDc/mS8m8OGDUOx9VMWcnGkAnj1YWOD+Qhxo3mI/Ul9oEAhNkjcfiEwEEBECAAwF
AkGByzQFgwYi2VgACgkQgcL36+ITtpIiIwCdFVNVUB8xe8mFXoPm4d9Z54PTjpMA
niSPA/ZsfJ3oOMLKar4F0QPPrdrGiEwEEBECAAwFAkGBy2IFgwYi2SoACgkQa3Ds
2V3D9HMJqgCbBYzr5GPXOXgP88jKzmdbjweqXeEAnRss4G2G/3qD7uhTL1SPT1SH
jWUXiEwEEBECAAwFAkHQkyQFgwXUEWgACgkQfSXKCsEpp8JiVQCghvWvkPqowsw8
w7WSseTcw1tflvkAni+vLHl/DqIly0LkZYn5jzK1dpvfiEwEEBECAAwFAkIrW7oF
gwV5SNIACgkQ5hukiRXruavzEwCgkzL5QkLSypcw9LGHcFSx1ya0VL4An35nXkum
g6cCJ1NP8r2I4NcZWIrqiEwEEhECAAwFAkAqWToFgwd6S1IACgkQPKEfNJT6+GEm
XACcD+A53A5OGM7w750W11ukq4iZ9ckAnRMvndAqn3YTOxxlLPj2UPZiSgSqiEwE
EhECAAwFAkA9+roFgwdmqdIACgkQ8tdcY+OcZZyy3wCgtDcwlaq20w0cNuXFLLNe
EUaFFTwAni6RHN80moSVAdDTRkzZacJU3M5QiEwEEhECAAwFAkEOCoQFgwaWmggA
CgkQOcor9D1qil/83QCeITZ9wIo7XAMjC6y4ZWUL4m+edZsAoMOhRIRi42fmrNFu
vNZbnMGej81viEwEEhECAAwFAkKApTQFgwUj/1gACgkQBA3AhXyDn6jjJACcD1A4
UtXk84J13JQyoH9+dy24714Aniwlsso/9ndICJOkqs2j5dlHFq6oiEwEExECAAwF
Aj5NTYQFgwlXVwgACgkQLbt2v63UyTMFDACglT5G5NVKf5Mj65bFSlPzb92zk2QA
n1uc2h19/IwwrsbIyK/9POJ+JMP7iEwEExECAAwFAkHXgHYFgwXNJBYACgkQZu/b
yM2C/T4/vACfXe67xiSHB80wkmFZ2krb+oz/gBAAnjR2ucpbaonkQQgnC3GnBqmC
vNaJiEwEExECAAwFAkIYgQ4FgwWMI34ACgkQdsEDHKIxbqGg7gCfQi2HcrHn+yLF
uNlH1oSOh48ZM0oAn3hKV0uIRJphonHaUYiUP1ttWgdBiGUEExECAB0FCwcKAwQD
FQMCAxYCAQIXgAUCS3AvygUJEPPzpwASB2VHUEcAAQEJEIxxjTtQcuH1sNsAniYp
YBGqy/HhMnw3WE8kXahOOR5KAJ4xUmWPGYP4l3hKxyNK9OAUbpDVYIh7BDARAgA7
BQJCdzX1NB0AT29wcy4uLiBzaG91bGQgaGF2ZSBiZWVuIGxvY2FsISBJJ20gKnNv
KiBzdHVwaWQuLi4ACgkQOcor9D1qil/vRwCdFo08f66oKLiuEAqzlf9iDlPozEEA
n2EgvCYLCCHjfGosrkrU3WK5NFVgiI8EMBECAE8FAkVvAL9IHQBTaG91bGQgaGF2
ZSBiZWVuIGEgbG9jYWwgc2lnbmF0dXJlLCBvciBzb21ldGhpbmcgLSBXVEYgd2Fz
IEkgdGhpbmtpbmc/AAoJEDnKK/Q9aopfoPsAn3BVqKOalJeF0xPSvLR90PsRlnmG
AJ44oisY7Tl3NJbPgZal8W32fbqgbIkCIgQQAQIADAUCQYHLhQWDBiLZBwAKCRCq
4+bOZqFEaKgvEACCErnaHGyUYa0wETjj6DLEXsqeOiXad4i9aBQxnD35GUgcFofC
/nCY4XcnCMMEnmdQ9ofUuU3OBJ6BNJIbEusAabgLooebP/3KEaiCIiyhHYU5jarp
ZAh+Zopgs3Oc11mQ1tIaS69iJxrGTLodkAsAJAeEUwTPq9fHFFzC1eGBysoyFWg4
bIjz/zClI+qyTbFA5g6tRoiXTo8ko7QhY2AA5UGEg+83Hdb6akC04Z2QRErxKAqr
phHzj8XpjVOsQAdAi/qVKQeNKROlJ+iq6+YesmcWGfzeb87dGNweVFDJIGA0qY27
pTb2lExYjsRFN4Cb13NfodAbMTOxcAWZ7jAPCxAPlHUG++mHMrhQXEToZnBFE4nb
nC7vOBNgWdjUgXcpkUCkop4b17BFpR+k8ZtYLSS8p2LLz4uAeCcSm2/msJxT7rC/
FvoH8428oHincqs2ICo9zO/Ud4HmmO0O+SsZdVKIIjinGyOVWb4OOzkAlnnhEZ3o
6hAHcREIsBgPwEYVTj/9ZdC0AO44Nj9cU7awaqgtrnwwfr/o4V2gl8bLSkltZU27
/29HeuOeFGjlFe0YrDd/aRNsxbyb2O28H4sG1CVZmC5uK1iQBDiSyA7Q0bbdofCW
oQzm5twlpKWnY8Oe0ub9XP5p/sVfck4FceWFHwv+/PC9RzSl33lQ6vM2wIkCIgQT
AQIADAUCQp8KHAWDBQWacAAKCRDYwgoJWiRXzyE+D/9uc7z6fIsalfOYoLN60ajA
bQbI/uRKBFugyZ5RoaItusn9Z2rAtn61WrFhu4uCSJtFN1ny2RERg40f56pTghKr
D+YEt+Nze6+FKQ5AbGIdFsR/2bUk+ZZRSt83e14Lcb6ii/fJfzkoIox9ltkifQxq
Y7Tvk4noKu4oLSc8O1Wsfc/y0B9sYUUCmUfcnq58DEmGie9ovUslmyt5NPnveXxp
5UeaRc5Rqt9tK2B4A+7/cqENrdZJbAMSunt2+2fkYiRunAFPKPBdJBsY1sxeL/A9
aKe0viKEXQdAWqdNZKNCi8rd/oOP99/9lMbFudAbX6nL2DSb1OG2Z7NWEqgIAzjm
pwYYPCKeVz5Q8R+if9/fe5+STY/55OaI33fJ2H3v+U435VjYqbrerWe36xJItcJe
qUzW71fQtXi1CTEl3w2ch7VF5oj/QyjabLnAlHgSlkSi6p7By5C2MnbCHlCfPnIi
nPhFoRcRGPjJe9nFwGs+QblvS/Chzc2WX3s/2SWm4gEUKRX4zsAJ5ocyfa/vkxCk
SxK/erWlCPf/J1T70+i5waXDN/E3enSet/WL7h94pQKpjz8OdGL4JSBHuAVGA+a+
dknqnPF0KMKLhjrgV+L7O84FhbmAP7PXm3xmiMPriXf+el5fZZequQoIagf8rdRH
HhRJxQgI0HNknkaOqs8dtrkCDQQ+PqMdEAgA7+GJfxbMdY4wslPnjH9rF4N2qfWs
EN/lxaZoJYc3a6M02WCnHl6ahT2/tBK2w1QI4YFteR47gCvtgb6O1JHffOo2HfLm
RDRiRjd1DTCHqeyX7CHhcghj/dNRlW2Z0l5QFEcmV9U0Vhp3aFfWC4Ujfs3LU+hk
AWzE7zaD5cH9J7yv/6xuZVw411x0h4UqsTcWMu0iM1BzELqX1DY7LwoPEb/O9Rkb
f4fmLe11EzIaCa4PqARXQZc4dhSinMt6K3X4BrRsKTfozBu74F47D8Ilbf5vSYHb
uE5p/1oIDznkg/p8kW+3FxuWrycciqFTcNz215yyX39LXFnlLzKUb/F5GwADBQf+
Lwqqa8CGrRfsOAJxim63CHfty5mUc5rUSnTslGYEIOCR1BeQauyPZbPDsDD9MZ1Z
aSafanFvwFG6Llx9xkU7tzq+vKLoWkm4u5xf3vn55VjnSd1aQ9eQnUcXiL4cnBGo
TbOWI39EcyzgslzBdC++MPjcQTcA7p6JUVsP6oAB3FQWg54tuUo0Ec8bsM8b3Ev4
2LmuQT5NdKHGwHsXTPtl0klk4bQk4OajHsiy1BMahpT27jWjJlMiJc+IWJ0mghkK
Ht926s/ymfdf5HkdQ1cyvsz5tryVI3Fx78XeSYfQvuuwqp2H139pXGEkg0n6KdUO
etdZWhe70YGNPw1yjWJT1IhUBBgRAgAMBQJOdz3tBQkT+wG4ABIHZUdQRwABAQkQ
jHGNO1By4fUUmwCbBYr2+bBEn/L2BOcnw9Z/QFWuhRMAoKVgCFm5fadQ3Afi+UQl
AcOphrnJ
=443I
-----END PGP PUBLIC KEY BLOCK-----
</pre>

<p>Чтобы импортировать ключ в Ваш личный публичный брелок GPG, используйте
<span><strong>gpg --import</strong></span>. Например, если Вы сохранили ключ
в файле <code>mysql_pubkey.asc</code>, команда импорта похожа на это:
<pre>
shell&gt; gpg --import mysql_pubkey.asc
gpg: key 5072E1F5: public key "MySQL Release Engineering
&lt;mysql-build@oss.oracle.com&gt;" imported
gpg: Total number processed: 1
gpg: imported: 1
gpg: no ultimately trusted keys found
</pre>

<p>Вы можете также загрузить ключ с общественного keyserver с
использованием id открытого ключа <code>5072E1F5</code>:
<pre>
shell&gt; gpg --recv-keys 5072E1F5
gpg: requesting key 5072E1F5 from hkp server keys.gnupg.net
gpg: key 5072E1F5: "MySQL Release Engineering &lt;mysql-build@oss.oracle.com&gt;"
1 new user ID
gpg: key 5072E1F5: "MySQL Release Engineering &lt;mysql-build@oss.oracle.com&gt;"
53 new signatures
gpg: no ultimately trusted keys found
gpg: Total number processed: 1
gpg: new user IDs: 1
gpg: new signatures: 53
</pre>

<p>Если Вы хотите импортировать ключ в свою конфигурацию RPM, чтобы утвердить
пакеты установки RPM, Вы должны быть в состоянии
импортировать ключ непосредственно:
<pre>
shell&gt; rpm --import mysql_pubkey.asc
</pre>

<p>Если Вы испытываете проблемы или требуете RPM-специфичную информацию, см.
<a href="#checking-rpm-signature">раздел 2.1.3.4</a>.</p>
<p>После того, как Вы загрузили и импортировали ключ, загрузите Ваш желаемый
пакет MySQL и соответствующую подпись, которая также доступна со страницы
загрузки. У файла подписи есть то же самое имя, как у файла дистрибутива с
расширением <code>.asc</code>, как показано примерами в следующей таблице.
</p>

<a name="idm139965428472448"></a><p><b>Таблица 2.1.
Пакет MySQL и файлы подписи для исходных файлов</b></p>
<table border="1">
<thead><tr><th scope="col">Тип файла</th><th scope="col">Имя файла</th></tr>
</thead>
<tbody><tr><td scope="row">Файл дистрибутива</td>
<td><code>mysql-standard-8.0.1-linux-i686.tar.gz</code></td></tr>
<tr><td scope="row">Файл подписи</td>
<td><code>mysql-standard-8.0.1-linux-i686.tar.gz.asc</code></td></tr>
</tbody></table>

<p>Удостоверьтесь, что оба файла хранятся в том же самом каталоге и затем
выполните следующую команду, чтобы проверить подпись для файла дистрибутива:
<pre>
shell&gt; gpg --verify <em><code>package_name</code></em>.asc
</pre>

<p>Если загруженный пакет будет допустим, то Вы будете видеть
"Good signature" подобно:
<pre>
shell&gt; gpg --verify mysql-standard-8.0.1-linux-i686.tar.gz.asc
gpg: Signature made Tue 01 Feb 2011 02:38:30 AM CST using DSA key ID 5072E1F5
gpg: Good signature from "MySQL Release Engineering &lt;mysql-build@oss.oracle.com&gt;"
</pre>

<p>Сообщение <code>Good signature</code> указывает, что подпись файла
допустима. Но Вы могли бы также видеть предупреждения:
<pre>
shell&gt; gpg --verify mysql-standard-8.0.1-linux-i686.tar.gz.asc
gpg: Signature made Wed 23 Jan 2013 02:25:45 AM PST using DSA key ID 5072E1F5
gpg: checking the trustdb
gpg: no ultimately trusted keys found
gpg: Good signature from "MySQL Release Engineering &lt;mysql-build@oss.oracle.com&gt;"
gpg: WARNING: This key is not certified with a trusted signature!
gpg:There is no indication that the signature belongs to the owner.
Primary key fingerprint: A4A9 4068 76FC BD3C 456770C8 8C71 8D3B 5072 E1F5
</pre>

<p>Это нормально, поскольку они зависят от Вашей установки и конфигурации.
Вот объяснения этих предупреждений:</p>
<ul><li><p><span><em>gpg: no ultimately trusted keys found</em></span>:
Это означает, что определенному ключу &quot;в конечном счете не доверяете
&quot; Вы или Ваша сеть доверия, что допустимо в целях проверки подписи файла.
</li>

<li><span><em>WARNING: This key is not certified with a trusted
signature! There is no indication that the signature belongs
to the owner.</em></span>: Это обращается к Вашему уровню доверия нашему
открытому ключу. Это личное решение. Идеально, разработчик MySQL вручил бы
Вам ключ лично, но обычно Вы загружаете его. В загрузку вмешались? Вероятно,
нет, но это решение Ваше дело. Установка сети доверия является одним методом
для того, чтобы доверять им.</p></li></ul>
<p>См. документацию GPG для получения дополнительной информации о том, как
работать с открытыми ключами.</p>

<h4><a name="checking-gpg-signature-windows"></a>2.1.3.3.
Проверка подписи, используя Gpg4win для Windows</h4>
<p><a href="#checking-gpg-signature">Раздел 2.1.3.2</a>
описывает, как проверить загрузки MySQL, используя GPG. То руководство также
относится к Microsoft Windows, но другая опция должна использовать инструмент
GUI <a href="../../../www.gpg4win.org/default.htm" target="_top">Gpg4win</a>.
Вы можете использовать различный инструмент, но наши примеры основаны на
Gpg4win, и используют его GUI <code>Kleopatra</code>.</p>

<p>Загрузите и установите Gpg4win, затем загрузите Kleopatra.
Диалог должен выглядеть подобным образом:
</p>
<a name="gnupg-kleopatra-home"></a><p><b>Рис. 2.1.
Экран после загрузки Kleopatra</b></p>
<img src="kleohome.png" width="682" height="436">

<p>Затем, добавьте сертификат MySQL Release Engineering.
Сделайте это, щелкая <span>File</span>, <span>Lookup Certificates on Server
</span>. Введите "Mysql Release Engineering" в поле
поиска и нажмите <span>Search</span>.</p>
<a name="gnupg-kleopatra-find-certificate"></a><p><b>Рис. 2.2.
Поиск сертификата MySQL Release Engineering</b></p>
<img src="findcert.png" width="854" height="330">

<p>Выберите сертификат "MySQL Release Engineering".
Fingerprint и Key-ID должны быть "5072E1F5", или выберите
<span>Details...</span>, чтобы подтвердить, что сертификат допустим.
Теперь импортируйте это, щелкая <span>Import</span>.
Диалог импорта будет выведен на экран, в нем выберите <span>Okay</span>,
и этот сертификат будет теперь перечислен под
вкладкой <span>Imported Certificates</span>.</p>

<p>Затем, сконфигурируйте трастовый уровень для нашего сертификата.
Выберите сертификат, затем из главного меню выберите
<span>Certificates</span>, <span>Change Owner Trust...</span>.
Мы предлагаем выбрать <span>I believe checks are very accurate</span>
для нашего сертификата, поскольку иначе Вы не в состоянии проверить нашу
подпись. Выберите <span>I believe checks are
very accurate</span> и <span>OK</span>.</p>

<a name="gnupg-kleopatra-change-trust"></a>
<p><b>Рис. 2.3. Изменение трастового уровня</b></p>
<img src="chtrust.png" width="656" height="472">

<p>Затем, проверьте загруженный файл пакета MySQL. Это требует файлов для
упакованного файла и подписи. У файла подписи должно быть то же самое имя,
как упакованного файла, но с расширением <code>.asc</code>,
как показано примером в следующей таблице. Подпись указана на странице
загрузок для каждого продукта MySQL. Вы должны создать файл
<code>.asc</code> с этой подписью.</p>

<a name="idm139965428411568"></a>
<p><b>Таблица 2.2. Файлы подписи для установщика MySQL для Microsoft Windows
</b></p>
<table border="1">
<thead><tr><th scope="col">Тип файла</th><th scope="col">Имя файла</th></tr>
</thead>
<tbody><tr><td scope="row">Файл дистрибутива</td>
<td><code>mysql-installer-community-8.0.1.msi</code></td></tr>
<tr><td scope="row">Файл подписи</td>
<td><code>mysql-installer-community-8.0.1.msi.asc</code></td></tr>
</tbody></table>

<p>Удостоверьтесь, что оба файла хранятся в том же самом каталоге и затем
выполните следующую команду, чтобы проверить подпись для файла дистрибутива.
</p>
<a name="gnupg-kleopatra-decrypt-load"></a><p><b>Рис. 2.4.
Диалог Decrypt/Verify Files</b></p>
<img src="decryptl.png" width="576" height="425">

<p>Нажмите <span>Decrypt/Verify</span>, чтобы проверить файл. Два наиболее
распространенных результата будут похожи на следующий, и хотя желтое
предупреждение выглядит проблематичным, следующее показывает, что проверка
файла прошла с успехом. Вы можете теперь выполнить этот установщик.</p>
<a name="gnupg-kleopatra-decrypt-okay-sig"></a><p><b>Рис. 2.5.
Decrypt/Verify Results: Good</b></p>
<img src="decrypto.png" width="576" height="424">

<p>Видя красное сообщение "The signature is bad" знайте, что
файл недопустим. Не выполняйте файл MSI, если Вы видите эту ошибку.</p>
<a name="gnupg-kleopatra-decrypt-invalid-sig"></a><p><b>Рис. 2.6.
Decrypt/Verify Results: Bad</b></p>
<img src="decrypt.png" width="656" height="518">

<p><a href="#checking-gpg-signature">Раздел 2.1.3.2</a>
объясняет, почему Вы, вероятно, не видите зеленый цвет
результата <code>Good signature</code>.</p>

<h4><a name="checking-rpm-signature"></a>2.1.3.4.
Проверка подписи, используя RPM</h4>
<p>Для пакетов RPM нет никакой отдельной подписи. У пакетов RPM есть
встроенная подпись GPG и контрольная сумма MD5. Вы можете проверить пакет,
выполняя следующую команду:
<pre>
shell&gt; rpm --checksig <em><code>package_name</code></em>.rpm
</pre>

<p>Пример:
<pre>
shell&gt; rpm --checksig MySQL-server-8.0.1-0.linux_glibc2.5.i386.rpm
MySQL-server-8.0.1-0.linux_glibc2.5.i386.rpm: md5 gpg OK
</pre>

<p>Если Вы используете RPM 4.1, и он жалуется на <code>(GPG)
NOT OK (MISSING KEYS: GPG#5072e1f5)</code>,
даже при том, что Вы импортировали публичный ключ MySQL в Ваш собственный
брелок GPG, Вы должны импортировать ключ в брелок RPM сначала.
Чтобы импортировать открытый ключ MySQL в брелок RPM, сначала получите ключ,
затем используйте <span><strong>rpm --import</strong></span>, чтобы
импортировать ключ. Например:</p>
<pre>
shell&gt; gpg --export -a 5072e1f5 &gt; 5072e1f5.asc
shell&gt; rpm --import 5072e1f5.asc
</pre>

<p>Альтернативно, <span><strong>rpm</strong></span>
также поддерживает загрузку ключа непосредственно с URL, и Вы можете
использовать эту страницу руководства:
<pre>
shell&gt; rpm --import http://dev.mysql.com/doc/refman/8.0/en/checking-gpg-signature.html
</pre>
<p>Если Вы должны получить открытый ключ MySQL, см.
<a href="#checking-gpg-signature">раздел 2.1.3.2</a>.</p>

<h3><a name="installation-layouts"></a>2.1.4. Типы установки</h3>
<p>Типы установки отличаются для различных типов дистрибутива (например,
родные пакеты, бинарные файлы и исходные тексты), что может привести к
беспорядку, управляя различными системами или используя различные источники
установки. Отдельные разметки даны в соответствующем типе установки или
платформе, как описано после.</p>

<h3><a name="compiler-characteristics"></a>2.1.5.
Определенные для компилятора характеристики</h3>
<p>В некоторых случаях, компилятор, используемый, чтобы создать MySQL,
затрагивает особенности, доступные для использования.
Примечания в этом разделе касаются двоичных дистрибутивов, обеспеченных
Oracle Corporation или того, что Вы собираете из исходных текстов.</p>

<p><span><strong><span><strong>icc</strong></span> (Intel C++ Compiler)
Builds</strong></span></p>
<p>У сервера, созданного с <span><strong>icc</strong></span>
есть эти характеристики:</p>
<ul><li><p>Поддержка SSL не включена.</p></li></ul>

<h2><a name="binary-installation"></a>2.2.
Установка MySQL на Unix/Linux, используя двоичные файлы</h2>
<p>Oracle обеспечивает ряд двоичных дистрибутивов MySQL. Они включают
двоичные дистрибутивы в форме сжатых файлов
<span><strong>tar</strong></span> (файлы с расширением <code>.tar.gz</code>)
для многих платформ, и двоичные модули в определенном для платформы формате
пакета для выбранных платформ.</p>

<p>Этот раздел покрывает установку MySQL из сжатого дистрибутива
<span><strong>tar</strong></span>.
Для других определенных для платформы форматов пакета см. другие определенные
для платформы разделы. Например, для дистрибутивов Windows см.
<a href="#windows-installation">раздел 2.3</a>.</p>

<p>У сжатых дистрибутивов MySQL <span><strong>tar</strong></span>
есть названия формы <code>mysql-<em><code>VERSION</code></em>-<em><code>OS</code></em>.tar.gz</code>,
где <code><em><code>VERSION</code></em></code> число (например,
<code>8.0.1</code>), а <em><code>OS</code></em> указывает на тип операционной
системы, для которой предназначен дистрибутив (например,
<code>pc-linux-i686</code> или <code>winx64</code>).</p>

<p>Если Вы ранее установили MySQL, используя Вашу систему управления пакетами
операционной системы, такую как <code>yum</code> или <code>apt-get</code>,
Вы можете получить проблемы, используя двоичный дистрибутив. Удостоверьтесь,
что Ваша предыдущая установка MySQL была удалена полностью (используя Вашу
систему управления пакетами), и что любые дополнительные файлы, такие как
старые версии Ваших файлов с данными, были также удалены. Вы должны также
проверить на конфигурационные файлы, такие как <code>/etc/my.cnf</code> или
каталог <code>/etc/mysql</code> и удалить их.</p>

<p>Для информации о замене имеющих отношение к третьей стороне пакетов
официальными пакетами MySQL, см. связанные руководства по
<a href="../../../dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/default.htm"
target="_top">Apt</a> или
<a href="../../../dev.mysql.com/doc/refman/5.7/en/replace-third-party-yum.html"
target="_top">Yum</a>.</p>

<p>У MySQL есть зависимость от библиотеки <code>libaio</code>.
Инициализация каталога данных и последующие шаги запуска сервера потерпят
неудачу, если эта библиотека не будет установлена локально. В случае
необходимости, установите это используя соответствующий диспетчер пакетов.
Например, на Yum-системах:
<pre>
shell&gt; <em><code>yum search libaio</code></em>  # search for info
shell&gt; <em><code>yum install libaio</code></em> # install library
</pre>

<p>На APT-системах:
<pre>
shell&gt; <em><code>apt-cache search libaio</code></em> # search for info
shell&gt; <em><code>apt-get install libaio1</code></em> # install library
</pre>

<p>Если Вы сталкиваетесь с проблемами и потребностью зарегистрировать отчет
об ошибках, пожалуйста, используйте инструкции в
<a href="intro.htm#bug-reports">разделе 1.7</a>.</p>

<p>На Unix, чтобы установить сжатый двоичный дистрибутив
<span><strong>tar</strong></span>, распакуйте это в местоположение установки,
которое Вы выбираете (как правило, <code>/usr/local/mysql</code>).
Это создает каталоги, показанные в следующей таблице.</p>

<a name="binary-installation-layout"></a><p><b>Таблица 2.3.
Расположение установки MySQL для двоичного пакета в Unix/Linux</b></p>
<table border="1">
<thead><tr><th scope="col">Каталог</th><th scope="col">Содержание</th></tr>
</thead><tbody>
<tr><td scope="row"><code>bin</code>, <code>scripts</code></td><td>
Сервер <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a>, клиент и утилиты</td></tr>
<tr><td scope="row"><code>data</code></td><td>
Файлы системного журнала, базы данных</td></tr>
<tr><td scope="row"><code>docs</code></td><td>
Руководство MySQL в формате Info</td></tr>
<tr><td scope="row"><code>man</code></td><td>Unix manual pages</td></tr>
<tr><td scope="row"><code>include</code></td><td>
Включаемые (заголовочные) файлы</td></tr>
<tr><td scope="row"><code>lib</code></td><td>Библиотеки</td></tr>
<tr><td scope="row"><code>share</code></td><td>Разные файлы поддержки,
включая сообщения об ошибках, типовые конфигурационные файлы, SQL для
установки базы данных</td></tr></tbody></table>

<p>Версии отладки <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> доступны как <a href="programs.htm#mysqld"><span><strong>
mysqld-debug</strong></span></a>. Чтобы собрать Вашу собственную версию
отладки MySQL из исходного дистрибутива, используйте соответствующие
параметры конфигурации. См.
<a href="#source-installation">раздел 2.8</a>.</p>

<p>Чтобы установить и использовать двоичный дистрибутив MySQL,
последовательность команд похожа на это:
<pre>
shell&gt; groupadd mysql
shell&gt; useradd -r -g mysql -s /bin/false mysql
shell&gt; cd /usr/local
shell&gt; tar zxvf <em><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz
shell&gt; ln -s <em><code>full-path-to-mysql-VERSION-OS</code></em> mysql
shell&gt; cd mysql
shell&gt; mkdir mysql-files
shell&gt; chmod 750 mysql-files
shell&gt; chown -R mysql .
shell&gt; chgrp -R mysql .
shell&gt; bin/mysqld --initialize --user=mysql
shell&gt; bin/mysql_ssl_rsa_setup
shell&gt; chown -R root .
shell&gt; chown -R mysql data mysql-files
shell&gt; bin/mysqld_safe --user=mysql &amp;
# Next command is optional
shell&gt; cp support-files/mysql.server /etc/init.d/mysql.server
</pre>

<p>Эта процедура предполагает, что Вы имеете доступ <code>root</code>
(administrator) к Вашей системе. Альтернативно, Вы можете выполнить каждую
команду, используя команду <span><strong>sudo</strong></span> (Linux) или
<span><strong>pfexec</strong></span> (OpenSolaris).</p>

<p>Каталог <code>mysql-files</code>
обеспечивает удобное местоположение, чтобы использовать в качестве значения
системной переменной <code>secure_file_priv</code>, которая ограничивает
операции импорта/экспорта определенным каталогом. См.
<a href="server.htm#server-system-variables">раздел 6.1.5</a>.</p>

<h3><a name="binary-installation-createsysuser"></a>
Создайте пользователя и группу mysql</h3>
<p>Если у Вашей системы нет пользователя и группы, чтобы использовать для
того, чтобы выполнить <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a>, Вы, возможно, должны их создать. Следующие команды
добавляют группу <code>mysql</code> и пользователя <code>mysql</code>.
Вы могли бы хотеть назвать пользователя и группу как-то иначе вместо
<code>mysql</code>. Если это так, замените соответствующее имя в следующих
инструкциях. Синтаксис для <span><strong>useradd</strong></span> и
<span><strong>groupadd</strong></span> может немного отличаться в разных
версиях Unix, или у них могут быть различные имена, такие как
<span><strong>adduser</strong></span> и <span><strong>addgroup</strong>
</span>.
<pre>
shell&gt; groupadd mysql
shell&gt; useradd -r -g mysql -s /bin/false mysql
</pre>

<p>Поскольку пользователь требуется только в целях собственности, а не
входа в систему, <span><strong>useradd</strong></span> использует опции
<code>-r</code> и <code>-s /bin/false</code>, чтобы создать пользователя, у
которого нет разрешений входа в систему. Опустите эти опции, если Ваш
<span><strong>useradd</strong></span> не поддерживает их.</p>

<h3><a name="binary-installation-unpack"></a>
Получите и распакуйте дистрибутив</h3>
<p>Выберите каталог, в соответствии с которым Вы хотите распаковать
дистрибутив и перейдите в него. Пример здесь распаковывает дистрибутив в
<code>/usr/local</code>. Инструкции, поэтому, предполагают, что у Вас есть
разрешение создавать файлы и каталоги в <code>/usr/local</code>. Если этот
каталог защищен, Вы должны выполнить установку как <code>root</code>.
<pre>
shell&gt; cd /usr/local
</pre>

<p>Получите файл дистрибутива, используя инструкции в
<a href="#getting-mysql">разделе 2.1.2</a>.
Для данного выпуска двоичные дистрибутивы для всех платформ созданы из того
же самого исходного дистрибутива MySQL.</p>

<p>Распакуйте дистрибутив, который создает каталог установки.
<span><strong>tar</strong></span> может расжать и распаковать дистрибутив,
если имеет поддержку опции <code>z</code>:
<pre>
shell&gt; tar zxvf <em><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz
</pre>

<p>Команда <span><strong>tar</strong></span> создает каталог
<code>mysql-<em><code>VERSION</code></em>-<em><code>OS</code></em></code>.
</p>

<p>Чтобы установить MySQL из сжатого дистрибутива <span><strong>tar</strong>
</span>, у Вашей системы должна быть утилита GNU <code>gunzip</code>, чтобы
расжать, и умная версия <span><strong>tar</strong></span>, чтобы распаковать
это. Если Ваша программа <span><strong>tar</strong></span> поддерживает
опцию <code>z</code>, она может расжать и распаковать файл.</p>

<p>GNU <span><strong>tar</strong></span>, как известно, работает. Стандартный
<span><strong>tar</strong></span>, предоставленный некоторыми операционными
системами, не в состоянии распаковать длинные имена файла. Вы должны загрузить
и установить GNU <span><strong>tar</strong></span> или, при наличии,
использовать предварительно установленную версию GNU tar. Обычно это доступно
как <span><strong>gnutar</strong></span>, <span><strong>gtar</strong></span>,
или <span><strong>tar</strong></span> в пределах каталога GNU или Free
Software в <code>/usr/sfw/bin</code> или <code>/usr/local/bin</code>. GNU
<span><strong>tar</strong></span> доступен на
<a href="../../../www.gnu.org/software/tar/default.htm" target="_top">
http://www.gnu.org/software/tar/</a>.</p>

<p>Если Ваш <span><strong>tar</strong></span> не имеет поддержки опции
<code>z</code>, используйте <span><strong>gunzip</strong></span>, чтобы
расжать дистрибутив и <span><strong>tar</strong></span>, чтобы распаковать
это. Замените предыдущую команду <span><strong>tar</strong></span>
следующей альтернативной командой, чтобы расжать и извлечь дистрибутив:
<pre>
shell&gt; gunzip &lt; <em><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz | tar xvf -
</pre>

<p>Затем создайте символическую ссылку к каталогу установки, создаваемому
<span><strong>tar</strong></span>:
<pre>
shell&gt; ln -s <em><code>full-path-to-mysql-VERSION-OS</code></em> mysql
</pre>

<p>Команда <code>ln</code> делает символическую ссылку к каталогу установки.
Это позволяет Вам обратиться более легко к этому как к
<code>/usr/local/mysql</code>. Чтобы избежать необходимости ввода пути
программ клиента всегда, когда Вы работаете с MySQL, Вы можете добавить
<code>/usr/local/mysql/bin</code> в Вашу переменную <code>PATH</code>:
<pre>
shell&gt; export PATH=$PATH:/usr/local/mysql/bin
</pre>

<h3><a name="binary-installation-postinstall"></a>Выполните установку</h3>
<p>Остаток процесса установки вовлекает собственность дистрибутива установки
и разрешения на доступ, инициализацию каталога данных, запуск сервера MySQL и
настройку конфигурационного файла. Для инструкций см.
<a href="#postinstallation">раздел 2.9</a>.</p>

<h2><a name="windows-installation"></a>2.3.
Установка MySQL на Microsoft Windows</h2>
<p>Есть несколько различных методов, чтобы установить MySQL
на Microsoft Windows.</p>

<h3><a name="idm139965428208512"></a>Простой метод установки</h3>
<p>Самый простой и рекомендуемый метод это загрузить установщик MySQL для
Windows и позволить ему устанавливать и конфигурировать все продукты MySQL
на Вашей системе:</p>

<ul><li><p>Загрузите MySQL Installer с
<a href="../../../dev.mysql.com/downloads/installer/default.htm" target="_top">
http://dev.mysql.com/downloads/installer/</a> и выполните его.</p>

<p>В отличие от стандартного установщика MySQL, меньшая версия
"web-community" не связывает приложений MySQL, но загрузит продукты MySQL,
которые Вы хотите устанавливать.</p></li>

<li><p>Выберите соответствующий <span>Setup Type</span>
для своей системы. Как правило Вы выберете <span>Developer Default</span>,
чтобы установить сервер MySQL и другие инструменты MySQL, связанные с
развитием MySQL, а также полезные инструменты, такие как MySQL Workbench.
Или выберите <span>Custom</span>, чтобы вручную выбрать
желаемые продукты MySQL.</p>
<p>Много версий сервера MySQL могут существовать на единственной системе.
Вы можете выбрать одну или много версий.</p></li>

<li><p>Завершите процесс установки, следуя инструкциям мастера MySQL Install.
Это установит несколько продуктов MySQL и запустит сервер MySQL.</li>
<li>MySQL установлен. Вы, вероятно, сконфигурировали MySQL как службу,
которая автоматически запустит сервер MySQL каждый раз, когда Вы
перезапускаете свою систему.</p></li></ul>

<p>Вы, вероятно, также устанавливали другие полезные продукты MySQL,
например, MySQL Workbench и MySQL Notifier на Вашей системе. Изучите
<a href="workbench.html">главу 28</a>, чтобы
проверить Ваше новое соединение с сервером MySQL, и
<a href="#windows-notifier">раздел 2.3.4</a>, чтобы рассмотреть
состояние соединения. По умолчанию, эти две программы автоматически
запускаются после установки MySQL.</p>

<p>Этот процесс также устанавливает приложение MySQL Installer
на Вашей системе, и позже Вы можете использовать MySQL Installer, чтобы
обновить или реконфигурировать Ваши продукты MySQL.</p>

<h3><a name="idm139965428195344"></a>Дополнительная информация об установке
</h3>
<p>MySQL доступен для Microsoft Windows для 32 и 64-битных версий. Для
поддержанной информации о платформе Windows см.
<a href="../../../www.mysql.com/support/supportedplatforms/database.html"
target="_top">http://www.mysql.com/support/supportedplatforms/database.html
</a>.</p>

<p>Возможно выполнить MySQL как стандартное приложение или как службу
Windows. При использовании службы Вы можете контролировать и управлять
работой сервера через стандартные инструменты управления службами Windows.
Для получения дополнительной информации см.
<a href="#windows-start-service">раздел 2.3.5.8</a>.</p>

<p>Вообще, Вы должны установить MySQL на Windows, используя учетную запись,
которая имеет права администратора. Иначе, Вы можете столкнуться с проблемами
с определенными операциями, такими как редактирование переменной окружения
<code>PATH</code> или доступ к <span><strong>Service Control Manager</strong>
</span>. После того, как установлен, MySQL не должен быть выполнен, используя
пользователя с привилегиями Администратора.</p>

<p>Для списка ограничений на использование MySQL на платформе Windows см.
<a href="restr.htm#limits-windows">раздел C.10.5</a>.</p>
<p>В дополнение к пакету сервера MySQL Вы, возможно, хотите, чтобы
дополнительные компоненты использовали MySQL с Вашим приложением или средой
проектирования. Они включают, но не ограничены:</p>

<ul><li><p>Чтобы соединиться с сервером MySQL, используя ODBC, у Вас должен
быть драйвер Connector/ODBC. Для получения дополнительной информации, включая
установку и инструкции конфигурации см.
<a href="../../../dev.mysql.com/doc/connector-odbc/en/default.htm" target="_top">
MySQL Connector/ODBC Developer Guide</a>.</p>
<p>MySQL Installer установит и сконфигурирует Connector/ODBC для Вас.</p></li>

<li><p>Чтобы использовать сервер MySQL с приложениями .NET, у Вас должен быть
драйвер Connector/Net. Для получения дополнительной информации, включая
установку и инструкции конфигурации см.
<a href="../../../dev.mysql.com/doc/connector-net/en/default.htm" target="_top">
MySQL Connector/Net Developer Guide</a>.</p>
<p>MySQL Installer установит и сконфигурирует Connector/NET для Вас.
</p></li></ul>

<p>Дистрибутивы MySQL для Windows могут быть загружены с
<a href="../../../dev.mysql.com/downloads/default.htm" target="_top">
http://dev.mysql.com/downloads/</a>. См.
<a href="#getting-mysql">раздел 2.1.2</a>.</p>

<p>MySQL for Windows доступен в нескольких форматах дистрибутива,
детализированных здесь. Вообще говоря, Вы должны использовать MySQL
Installer. Это содержит больше особенностей и продуктов MySQL, чем более
старый MSI, более просто использовать, чем файл Zip,
и Вы не нуждаетесь ни в каких дополнительных инструментах. MySQL Installer
автоматически устанавливает сервер MySQL и дополнительные продукты MySQL,
создает файл опций, запускает сервер и позволяет Вам создать учетные записи
пользователей по умолчанию. Для получения дополнительной информации о выборе
пакета см. <a href="#windows-choosing-package">раздел 2.3.2</a>.
</p>

<ul><li><p>MySQL Installer включает сервер MySQL и дополнительные продукты
MySQL, включая инструментальные средства MySQL Workbench, MySQL Notifier и
MySQL для Excel. Установщик MySQL может также использоваться, чтобы обновить
эти продукты в будущем.</p>
<p>Для инструкций по установке с применением MySQL Installer см.
<a href="#mysql-installer">раздел 2.3.3</a>.</li>

<li>Стандартный двоичный дистрибутив (упакованный как файл Zip)
содержит все необходимые файлы, которые Вы распаковываете в свое выбранное
местоположение. Этот пакет содержит все файлы в полном пакете Windows MSI
Installer, но не включает программу установки.</p>
<p>Для инструкций по установке MySQL, используя файл Zip см.
<a href="#windows-install-archive">раздел 2.3.5</a>.</li>

<li>Исходный дистрибутив содержит весь код и файлы поддержки для создания
пакета, используя систему Visual Studio.</p>
<p>Для инструкций по созданию MySQL из исходных текстов на Windows см.
<a href="#source-installation">раздел 2.8</a>.</p></li></ul>

<p><span><strong>Проблемы MySQL в Windows:</strong></span></p>
<ul><li><p><span><strong>Большая табличная поддержка</strong></span></p>
<p>Если Вы нуждаетесь в таблицах с размером больше 4GB,
устанавливайте MySQL на NTFS или более новой файловой системе. Не забывайте
использовать <code>MAX_ROWS</code> и <code>AVG_ROW_LENGTH</code>,
когда Вы составляете таблицы. См.
<a href="sql.htm#create-table">раздел 14.1.15</a>.</li>

<li><span><strong>MySQL и проверка на вирусы</strong></span></p>
<p>Программное обеспечение поиска вирусов, такое как Norton/Symantec
Anti-Virus на каталогах, содержащих данные MySQL и временные таблицы, может
вызвать проблемы с точки зрения результата MySQL и с точки зрения
программного обеспечения поиска вирусов, не распознающего содержание файлов.
Это происходит из-за механизма снятия отпечатков, используемого программным
обеспечением поиска вирусов, и путем, которым MySQL быстро обновляет
различные файлы, которые могут быть идентифицированы как
потенциальная угроза безопасности.</p>

<p>После установки MySQL Server рекомендуется, чтобы Вы отключили поиск
вирусов на основном каталоге
(<a href="server.htm#sysvar_datadir"><code>datadir</code></a>),
используемом, чтобы хранить Ваши табличные данные MySQL. Обычно есть система,
встроенная в программное обеспечение поиска вирусов, чтобы позволить
определенным каталогам быть проигнорированными.</p>

<p>Кроме того, по умолчанию, MySQL создает временные файлы в стандартном
временном каталоге Windows. Сконфигурируйте отдельный временный каталог для
временных файлов MySQL и добавьте этот каталог к списку исключения поиска
вирусов. Чтобы сделать это, добавьте параметр конфигурации
<a href="server.htm#option_mysqld_tmpdir"><code>tmpdir</code></a>
к Вашему конфигурационному файлу <code>my.ini</code>.
Для получения дополнительной информации см.
<a href="#windows-create-option-file">раздел 2.3.5.2</a>.
</p></li></ul>

<h3><a name="windows-installation-layout"></a>2.3.1.
Расположение установки MySQL на Microsoft Windows</h3>
<p>Для MySQL 8.0 в Windows каталог установки по умолчанию
<code>C:\Program Files\MySQL\MySQL Server 8.0</code>.
Некоторые пользователи Windows предпочитают устанавливать в
<code>C:\mysql</code>, каталог, который прежде использовался в качестве
значения по умолчанию. Однако, расположение подкаталогов остается
тем же самым.</p>

<p>Все файлы расположены в пределах этого родительского каталога, используя
структуру, показанную в следующей таблице.</p>
<a name="idm139965428154368"></a><p><b>Таблица 2.4.
Расположение установки MySQL для Microsoft Windows по умолчанию</b></p>
<table border="1">
<thead><tr><th scope="col">Каталог</th>
<th scope="col">Содержание</th><th scope="col">Примечания</th></tr></thead>
<tbody><tr><td scope="row"><code>bin</code>, <code>scripts</code></td>
<td><a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
сервер, клиент и утилиты</td><td class="auto-generated"> </td></tr>
<tr><td scope="row"><code>%PROGRAMDATA%\MySQL\MySQL Server 8.0\</code></td>
<td>Файлы системного журнала, базы данных</td><td>
Системная переменная Windows <code>%PROGRAMDATA%</code> по умолчанию
<code>C:\ProgramData</code></td></tr>
<tr><td scope="row"><code>examples</code></td><td>
Примеры программ и скриптов</td><td> </td></tr>
<tr><td scope="row"><code>include</code></td><td>
Файлы заголовков (включаемые)</td><td> </td></tr>
<tr><td scope="row"><code>lib</code></td><td>Библиотеки</td><td> </td></tr>
<tr><td scope="row"><code>share</code></td><td>
Разные файлы поддержки, включая сообщения об ошибках, файлы набора символов,
типовые конфигурационные файлы, SQL для установки базы данных</td><td> </td>
</tr></tbody></table>

<p>Если Вы устанавливаете MySQL, используя MySQL Installer,
этот пакет создает и настраивает каталог данных, который установленный сервер
будет использовать, а также создает каталог данных <code>data</code>
в соответствии с каталогом установки. После того, как установка была
выполнена, используя этот пакет, каталог данных может быть скопирован, чтобы
настроить дополнительные экземпляры MySQL. См.
<a href="server.htm#multiple-servers">раздел 6.7</a>.</p>

<h3><a name="windows-choosing-package"></a>2.3.2.
Выбор пакета установки</h3>
<p>Для MySQL 8.0 есть много форматов пакета установки MySQL в Windows.</p>
<p>Program Database (PDB) (с расширением имени файла <code>pdb</code>)
предоставляют информацию для того, чтобы отладить Вашу установку MySQL в
случае проблемы. Эти файлы включены в дистрибутив ZIP Archive (но не MSI).
</p>

<ul><li><p><span><strong>MySQL Installer</strong></span>:
у этого пакета есть имя файла, подобное
<code>mysql-installer-community-8.0.1.0.msi</code> или
<code>mysql-installer-commercial-8.0.1.0.msi</code>, он
использует MSI, чтобы автоматически установить сервер MySQL и другие
продукты. Это загрузит и применит обновления для каждого из установленных
продуктов. Это также конфигурирует дополнительные продукты.</p>

<p>Установленные продукты конфигурируемы, это включает: документация с
образцами и примерами, соединители (такие, как
C, C++, J, NET и ODBC), MySQL Workbench, MySQL Notifier, MySQL for Excel,
и MySQL Server с его компонентами.</p>

<p>MySQL Installer не включает компоненты для отладки (включая файлы PDB).
Они доступны в отдельном архиве Zip
<code>mysql-<em><code>VERSION</code></em>-winx64-debug-test.zip</code> для
64-bit и <code>mysql-<em><code>VERSION</code></em>-win32-debug-test.zip
</code> для 32-bit.</p>

<p>MySQL Installer воздействует на поддержанные версии всего MySQL Windows
(см. <a href="../../../www.mysql.com/support/supportedplatforms/database.html"
target="_top">http://www.mysql.com/support/supportedplatforms/database.html
</a>).</p>

<p>Поскольку MySQL Installer не родной компонент Microsoft Windows и зависит
от .NET, это не будет работать с минимальными опциями установки как
"Server Core" Windows Server 2008.</p>
<p>Для инструкций по установке с применением MySQL Installer см.
<a href="#mysql-installer">раздел 2.3.3</a>.</li>

<li><span><strong>Архивы Noinstall</strong></span>:
Эти пакеты содержат файлы, найденные в пакете полной установки, за
исключением GUI. Этот формат не включает автоматизированный установщик и
должен быть вручную установлен и сконфигурирован.</p>

<p>Архивы noinstall разделены на два отдельных файла Zip. Основной пакет
называют <code>mysql-<em><code>VERSION</code></em>-winx64.zip</code>
для 64-bit и <code>mysql-<em><code>VERSION</code></em>-win32.zip</code>
для 32-bit. Это содержит компоненты, которые должен был использовать MySQL на
Вашей системе. Дополнительный испытательный набор MySQL, эталонный набор
MySQL и компоненты отладочного набора (включая файлы PDB) находятся в
отдельном файле Zip с именем
<code>mysql-<em><code>VERSION</code></em>-winx64-debug-test.zip</code> для
64-bit и <code>mysql-<em><code>VERSION</code></em>-win32-debug-test.zip
</code> для 32-bit.</p></li></ul>

<p>MySQL Installer рекомендуется для большинства пользователей.</p>
<p>Ваш выбор пакета установки затрагивает процесс установки, за которым Вы
должны следовать. Если Вы хотите использовать MySQL Installer, см.
<a href="#mysql-installer">раздел 2.3.3</a>.
Если Вы хотите устанавливать архив Noinstall, см.
<a href="#windows-install-archive">раздел 2.3.5</a>.</p>

<h3><a name="mysql-installer"></a>2.3.3. Установка MySQL на
Microsoft Windows с помощью MySQL Installer</h3>
<p>MySQL Installer это приложение, которое управляет продуктами MySQL на
Microsoft Windows. Это устанавливает, обновляет, удаляет и конфигурирует
продукты MySQL, и остается в системе ее собственным приложением. MySQL
Installer доступен только для Microsoft Windows
и включает GUI и интерфейс командной строки.</p>

<p>Поддержанные продукты MySQL включают:</p>
<ul><li><p><a href="../../../dev.mysql.com/doc/default.htm" target="_top">MySQL Server</a>
(одна или много версий в той же самой системе)</li>
<li><a href="workbench.html">MySQL Workbench</a></li>
<li><a href="../../../dev.mysql.com/doc/index-connectors.html" target="_top">
MySQL Connectors</a> (.Net / Python / ODBC / Java / C / C++)</li>
<li><a href="#windows-notifier">MySQL Notifier</a></li>
<li><a href="../../../dev.mysql.com/doc/mysql-for-excel/en/default.htm" target="_top">
MySQL for Excel</a></li>
<li><a href="../../../dev.mysql.com/doc/connector-net/en/connector-net-visual-studio.html"
target="_top">MySQL for Visual Studio</a></li>
<li><a href="../../../dev.mysql.com/doc/index-utils-fabric.html" target="_top">
MySQL Utilities and MySQL Fabric</a></li>
<li>Образцы и примеры MySQL</li>
<li>Документация MySQL</li>
<li>MySQL Installer также установлен и остается в системе ее собственным
приложением, которое используется, чтобы установить дополнительные продукты
MySQL, а также обновить и сконфигурировать существующие продукты MySQL</li>
<li>Enterprise edition устанавливает версии Enterprise вышеупомянутых
продуктов, а также включает MySQL Enterprise Backup и
MySQL Enterprise Firewall</p></li></ul>

<h4><a name="idm139965428089328"></a>Типы пакета установщика</h4>
<ul><li><p><code>Full:</code> все продукты MySQL (включая сервер MySQL).
Размер файла составляет более чем 300 МБ, и у его имени есть форма
<code>mysql-installer-community-<em><code>VERSION</code></em>.<em><code>N</code></em>.msi</code>,
где <code>VERSION</code> версия MySQL Server, например, 5.7, а
<code>N</code> число пакета, которое начинается с 0.</li>

<li><code>Web:</code> содержит только MySQL Installer и конфигурационные
файлы, загружает продукты MySQL, которые Вы хотите устанавливать. Размер
этого файла составляет приблизительно 2 МБ, у названия файла есть форма
<code>mysql-installer-community-<code>web</code>-<em><code>VERSION</code></em>.<em><code>N</code></em>.msi</code>,
где <code>VERSION</code> версия MySQL Server, например, 5.7, а
<code>N</code> число пакета, которое начинается с 0.</li>

<li><code>Updates:</code> MySQL Installer
может обновить себя, таким образом, дополнительная загрузка не
требуется, чтобы обновить MySQL Installer.</p></li></ul>

<h4><a name="idm139965428076576"></a>Выпуски Installer</h4>
<ul><li><p><code>Community edition:</code> Загружаемый с
<a href="../../../dev.mysql.com/downloads/installer/default.htm" target="_top">
http://dev.mysql.com/downloads/installer/</a>.
Это устанавливает выпуск сообщества всех продуктов MySQL.</li>

<li><code>Commercial edition:</code> Загружаемый с
<a href="../../../https@support.oracle.com/default.htm" target="_top">My Oracle
Support</a> (MOS) или <a href="../../../https@edelivery.oracle.com/default.htm" target="_top">
https://edelivery.oracle.com/</a>. Это устанавливает коммерческую версию всех
продуктов MySQL, включая Workbench SE/EE, MySQL Enterprise Backup и MySQL
Enterprise Firewall. Это также объединяется с Вашей учетной записью MOS.</p>
</p></li></ul>

<p>MySQL Installer совместим с существующими ранее установками и добавляет их
к своему списку установленных компонентов. В то время как стандартный MySQL
Installer связан определенной версией сервера MySQL, единственный случай
MySQL Installer может установить и управлять многими версиями сервера MySQL.
Например, единственный MySQL Installer может установить (и обновить) версии
5.6, 5.7, и 8.0 на том же самом хосте.</p>

<p>У единственного узла не <span><em>может</em></span> быть установлен
MySQL server коммерческой и версии сообщества. Например, если Вы хотите
MySQL Server 5.7 и 8.0 на единственном узле, оба должны быть тем
же самым выпуском.</p>

<p>MySQL Installer обрабатывает начальную конфигурацию. Например:</p>
<ul><li><p>Это создает конфигурационный файл (<code>my.ini</code>), который
используется, чтобы сконфигурировать сервер MySQL. Значения написаны в этот
файл под влиянием выбора, который Вы делаете во время процесса установки.</p>
<p>Некоторые определения зависят от хоста. Например, query_cache
включен, если у узла есть меньше, чем три ядра.</p></li>

<li><p>Это может произвольно импортировать базы данных в качестве примера.
</li>
<li>По умолчанию, служба Windows для сервера MySQL добавлена.</li>
<li>Это может произвольно создать учетные записи пользователя MySQL Server
с конфигурацией разрешений, основанных на общих ролях, таких как DB
Administrator, DB Designer и Backup Admin. Это произвольно создает
пользователя Windows <code>MysqlSys</code> с ограниченными привилегиями,
который выполняет MySQL Server.</p>

<p>Учетные записи пользователя могут также быть добавлены и
сконфигурированы в MySQL Workbench.</li>
<li>Проверка <span>Show Advanced Options</span> позволяет задать
дополнительные <span>Logging Options</span>. Это включает пользовательские
пути к файлам для журнала ошибок, общего журнала, журнала медленных запросов
(включая конфигурацию секунд, которые требуются, чтобы выполнить
запрос) и двоичный журнал.</p></li></ul>
<p>MySQL Installer может произвольно проверить обновленные компоненты и
загрузить их для Вас.</p>

<h4><a name="mysql-installer-gui"></a>2.3.3.1. MySQL Installer GUI</h4>
<p>MySQL Installer добавляет ссылку в меню &quot;Пуск&quot; под группой
<span>MySQL</span>. Щелкните <span>Start</span>, <span>All Programs</span>,
<span>MySQL</span>, <span>MySQL Installer</span>, чтобы перезагрузить
MySQL Installer GUI.</p>

<p>Полные разрешения предоставляют MySQL Installer
доступ ко всем произведенным файлам, таким как <code>my.ini</code>.
Это не относится к файлам и каталогам для определенных продуктов, таким
как каталог серверных данных в <code>%ProgramData%</code>,
это принадлежит <code>SYSTEM</code>.</p>

<p>MySQL Installer требует, чтобы Вы приняли лицензионное соглашение прежде,
чем это установит продукты MySQL.</p>
<a name="mysql-installer-license-agreement"></a><p><b>Рис. 2.7.
MySQL Installer License Agreement</b></p>
<img src="mi-lic.png" width="790" height="589">

<h5><a name="idm139965428038880"></a>Установка новых пакетов</h5>
<p><a name="mysql-installer-choose-setup-type"></a>
Выберите соответствующий <span>Setup Type</span> для своей системы. Этот тип
определяет, какие продукты MySQL первоначально установлены в Вашей системе,
или выберите <span>Custom</span>, чтобы вручную выбрать продукты.</p>

<ul><li><p><span><strong>Developer</strong></span>:
Установит все продукты, которые нужны, чтобы разработать приложения с MySQL.
Это опция по умолчанию.</li>

<li><span><strong>Server only</strong></span>: Только установить MySQL server.
</li>
<li><span><strong>Client only</strong></span>:
Только установить продукты клиента MySQL, такие как MySQL Workbench.
Это не включает сервер MySQL.</li>

<li><span><strong>Full</strong></span>:
Установит все доступные продукты MySQL.</li>
<li><span><strong>Custom</strong></span>: Вручную выберите продукты MySQL,
чтобы установить и произвольно сконфигурировать пользовательские данные
MySQL и пути установки.</p>

<p>После начальной установки Вы можете использовать MySQL Installer,
чтобы вручную выбрать продукты MySQL, чтобы установить или удалить. Другими
словами, MySQL Installer становится системой управления MySQL.</p></li></ul>

<a name="mysql-installer-choose-setup-page-win"></a><p><b>Рис. 2.8.
MySQL Installer. Выбор типа установки</b></p>
<img src="mi-choos.png" width="790" height="589">

<p>MySQL Installer проверяет Вашу систему на внешние требования
(предпосылки), требуемые, чтобы устанавливать выбранные продукты MySQL.
MySQL Installer может загрузить и установить некоторые пакеты, но другие
требуют ручного вмешательства. Загрузите и установите все пакеты, которые
имеют <span>Status</span> "Manual". Щелкните <span>Check</span>, чтобы
перепроверить, если пакет был установлен вручную. После ручной установки тех
требований, щелкните <span>Execute</span>, чтобы загрузить и установить
другие пакеты. После того, как закончите, щелкните <span>Next</span>.</p>

<a name="mysql-installer-check-requirements"></a><p><b>Рис. 2.9. MySQL
Installer. Проверка требований</b></p>
<img src="mi-req" width="790" height="590">
<p>Следующее окно перечисляет продукты MySQL, которые намечены для установки:
</p>

<a name="mysql-installer-installation-progress-win"></a><p><b>Рис. 2.10.
MySQL Installer. Продвижение установки</b></p>
<img src="mi-inst.png" width="790" height="589">
<p>Поскольку компоненты установлены, их <span>Status</span>
изменяется на "Complete".</p>

<p>После того, как все компоненты установлены, следующий шаг конфигурирует
некоторые из недавно установленных продуктов MySQL. Окно
<code>Configuration Overview</code> показывает процесс и затем загружают окно
конфигурации, если требуется. Наш пример конфигурирует MySQL Server 5.7.x.
</p>

<h5><a name="idm139965427995344"></a>Настройка MySQL Server</h5>
<p>Конфигурирование сервера MySQL начинается с определения нескольких опций
<span>Type and Networking</span>.</p>

<a name="mysql-installer-initial-configuration-overview"></a><p><b>Рис. 2.11.
MySQL Installer. Краткий обзор конфигурации</b></p>
<img src="mi-prod.png" width="790" height="589">

<p><span><strong>Тип конфигурации сервера</strong></span></p>
<p>Выберите тип конфигурации сервера MySQL, который описывает Вашу установку.
Эта установка определяет количество системных ресурсов (памяти),
которые будут назначены на Ваш экземпляр сервера MySQL.</p>

<ul><li><p><span><strong>Developer</strong></span>: Машина, которая разместит
много других приложений, как правило, это Ваша личная рабочая станция. Эта
опция конфигурирует MySQL, чтобы использовать наименьшее количество памяти.
</li>

<li><span><strong>Server</strong></span>: Несколько других приложений будут
работать на этой машине, таких как веб-сервер. Эта опция конфигурирует MySQL,
чтобы использовать средний объем памяти.</li>

<li><span><strong>Dedicated</strong></span>: Машина, которая посвящена
выполнению сервера MySQL. Поскольку никакие другие главные приложения не
будут работать на этом сервере, такие как веб-сервер, эта опция конфигурирует
MySQL, чтобы использовать большую часть доступной памяти.</p></li></ul>

<p><span><strong>Связь</strong></span></p>
<p>Опции связи управляют, как соединение с MySQL сделано. Опции включают:
</p>
<ul><li><p><span>TCP/IP</span>: Вы можете включить TCP/IP здесь, поскольку
иначе только localhost-соединения позволены. Также определите <span>Port
Number</span> и открыть ли порт брандмауэра для сетевого доступа.</li>

<li><span>Named Pipe</span>: Включите и определите имя канала, подобное
использованию опции <code>--enable-named-pipe</code>.</li>
<li><span>Shared Memory</span>: Включите и определите имя памяти, подобное
использованию опции <code>--shared-memory</code>.</p></li></ul>

<p><span><strong>Расширенная конфигурация</strong></span></p>
<p>Нажмите <span>Show Advanced Options</span>, чтобы установить
дополнительные <span>Logging Options</span>. Это включает определяющие
пользовательские пути к файлам для журнала ошибок, общего журнала, журнала
медленных запросов (включая конфигурацию секунд, которые требуются, чтобы
выполнить запрос) и двоичного журнала.</p>
<a name="mysql-installer-mysql-server-configuration-choice"></a><p><b>Рис.
2.12. MySQL Installer. MySQL Server Configuration: Type and Networking</b>
</p>
<img src="mi-type.png" width="790" height="589">

<h5><a name="idm139965427958960"></a>Учетные записи и роли</h5>
<p>Определите свою информацию об учетной записи MySQL.
Назначение пароля root требуется.</p>

<p>Вы можете добавить дополнительные учетные записи пользователя MySQL с
предопределенными пользовательскими ролями. Каждая предопределенная роль,
такая как "DB Admin", сконфигурирована с их собственным набором привилегий.
Например, у "DB Admin" больше привилегий, чем у "DB Designer". Щелкните по
<span>Role</span> для списка ролевых описаний.</p>

<p>Если MySQL Server уже установлен, то Вы должны также ввести
<code>Current Root Password</code>.</p>
<a name="mysql-installer-configuration-setup-win"></a><p><b>Рис. 2.13.
MySQL Installer. Конфигурация сервера MySQL: Учетные
записи пользователя и роли</b></p>
<img src="mi-acc.png" width="790" height="589">

<a name="mysql-installer-configuration-adding-a-new-user"></a><p><b>Рис.
2.14. MySQL Installer. Добавление пользователя</b></p>
<img src="mi-accn.png" width="429" height="300">

<h5><a name="mysql-installer-windows-service"></a>Windows Service</h5>
<p>Сконфигурируйте детали <span>Windows Service</span>.
Это включает имя службы, должен ли сервер MySQL быть загружен при запуске,
как служба Windows сервера MySQL выполнена.</p>

<a name="mysql-installer-installation-configuration-win-service-details"></a>
<p><b>Рис. 2.15. MySQL Installer. Конфигурация сервера MySQL: служба Windows
</b></p>
<img src="mi-wser.png" width="790" height="589">
<p>Конфигурируя <span>Run Windows Services as ...</span>
с использованием <span>Custom User</span>, у пользователя должны
быть привилегии, чтобы войти в систему Microsoft Windows как служба. Кнопка
<span>Next</span> будет отключена, пока этот пользователь не будет
сконфигурирован с необходимыми привилегиями.</p>

<p>В Microsoft Windows 7 это может быть сконфигурировано, загружая
<code>Start Menu</code>, <code>Control Panel</code>,
<code>Administrative Tools</code>, <code>Local Security Policy</code>,
<code>Local Policies</code>, <code>User Rights Assignment</code>,
<code>Log On As A Service</code>. Выберите <code>Add User or Group</code>,
чтобы добавить пользователя, а затем
<span>OK</span>, <span>OK</span>, чтобы сохранить.</p>

<h5><a name="idm139965427919888"></a>Плагины и расширения</h5>
<p>Включите плагины и расширения MySQL. В этом примере мы позволяем X Plugin
использовать MySQL в качестве хранилища документа.</p>

<a name="mysql-installer-installation-plugins-and-extensions"></a><p><b>
Рис. 2.16. MySQL Installer. Плагины и расширения</b></p>
<img src="mi-plug.png" width="790" height="589">

<p>Экран Plugins and Extensions в MySQL Installer появляется
только при новой установке MySQL. Если Вы обновляетесь от предыдущей версии
MySQL, то Вы должны выполнить установщик снова и выбрать
<span>reconfigure</span> MySQL Server.</p>

<h5><a name="idm139965427908416"></a>Расширенные опции</h5>
<p>Следующий шаг конфигурации доступен, если отмечена опция <span>Advanced
Configuration</span>. Этот раздел включает опции, которые связаны с файлами
системного журнала MySQL:</p>

<a name="mysql-installer-installation-configuration-log-options"></a><p><b>
Рис. 2.17. MySQL Installer. Журналирование MySQL Server</b></p>
<img src="mi-adv.png" width="790" height="589">
<p>Нажмите <span>Next</span>, чтобы перейти
к заключительной странице прежде, чем все требуемые изменения будут
применены. Страница <span>Apply Server Configuration</span>
показывает шаги конфигурации, которые будут выполнены.</p>

<a name="mysql-installer-installation-configuration-apply-server-configuration">
</a><p><b>Рис. 2.18. MySQL Installer. Apply Server Configuration</b></p>
<img src="mi-apply.png" width="790" height="589">
<p>Нажмите <span>Execute</span>, чтобы выполнить шаги конфигурации. Значок
для каждого шага переключается от белого до зеленого при успехе, или процесс
прервется при сбое. Щелкните по вкладке <span>Log</span>,
чтобы просмотреть журнал.</p>

<p>После того, как процесс конфигурации MySQL Installer закончен,
MySQL Installer перезагружает вводную страницу, где Вы можете
выполнить другую установку.</p>

<p>MySQL Installer добавлен к Microsoft Windows Start menu в группе
<code>MySQL</code>. Открытие MySQL Installer загружает свою инструментальную
панель, где установленные продукты MySQL перечислены и доступны другие
действия MySQL Installer:</p>
<a name="mysql-installer-main-page"></a><p><b>Рис. 2.19. MySQL Installer.
Основная инструментальная панель</b></p>
<img src="mi-main.png" width="797" height="596">

<h5><a name="idm139965427877936"></a>Добавление продуктов MySQL</h5>
<p>Нажмите <span>Add</span>, чтобы добавить новые продукты. Это загружает
страницу <span>Select Products and Features</span>:</p>

<a name="mysql-installer-select-products-and-features"></a><p><b>Рис. 2.20.
MySQL Installer. Select Products and Features</b></p>
<img src="mi-selp.png" width="790" height="589">
<p>Выберите продукты MySQL, которые Вы хотите установить с левой панели
<span>Available Products</span>, затем щелкните по
зеленой стрелке вправо к продуктам очереди для установки.</p>

<p>Или щелкните <span>Edit</span>, чтобы открыть фильтр поиска:</p>
<a name="mysql-installer-select-products-and-features-filter"></a><p><b>Рис.
2.21. MySQL Installer. Фильтр продуктов и особенностей</b></p>
<img src="mi-filt.png" width="790" height="589">

<p>Например, Вы могли бы хотеть включать продукты Pre-Release
в свой выбор, такие как Beta-версии, которые еще не достигли статуса
General Availability (GA).</p>

<p>Выберите все продукты MySQL, которые Вы хотите установить, затем щелкните
<span>Next</span>, чтобы использовать значения по умолчанию, или выделите
выбранный продукт и щелкните <span>Advanced Options</span>, чтобы
произвольно изменить опции, такие как серверные данные MySQL и пути
установки. Щелкните <span>Execute</span>, чтобы выполнить процесс установки,
чтобы установить все выбранные продукты.</p>

<h5><a name="mysql-installer-catalog"></a>2.3.3.1.1. MySQL Product Catalog
</h5>
<p>MySQL Installer хранит каталог продукции MySQL. Каталог может быть
обновлен вручную или автоматически, история изменения каталога также
доступна. Автоматическое обновление включено по умолчанию.</p>
<p>Обновление каталога продукции также проверяет на более новую версию
MySQL Installer и запрашивает обновление, если оно есть.</p>

<p><span><strong>Ручные обновления</strong></span></p>
<p>Вы можете обновить каталог продукции MySQL в любое время, щелкая
<span>Catalog</span> в инструментальной панели.</p>

<a name="mysql-installer-open-catalog-figure"></a><p><b>Рис. 2.22. MySQL
Installer. Каталог продукции MySQL</b></p>
<img src="mi-dashc.png" width="790" height="589">
<p>Щелкните <span>Execute</span>, чтобы обновить каталог продукции.</p>

<p><span><strong>Автоматические обновления</strong></span></p>
<p>MySQL Installer может автоматически обновить каталог продукции MySQL. По
умолчанию эта опция активирована, чтобы выполнить проверку обновлений каждый
день в 0:00. Чтобы сконфигурировать эту особенность, щелкните по значку
на инструментальной панели.</p>

<p>Следующее окно конфигурирует <span>Automatic Catalog Update</span>.
Включите или отключите эту опцию, а также установите час.</p>
<a name="mysql-installer-open-catalog-schedule-configure-figure"></a><p><b>
Рис. 2.23. MySQL Installer. Настройка планировщика каталога</b></p>
<img src="mi-cat.png" width="506" height="283">
<p>Эта опция использует планировщик задач Windows, чтобы наметить задачу по
имени "Manifest Update".</p>

<p><span><strong>История изменения</strong></span></p>
<p>MySQL Installer отслеживает историю изменения для всех продуктов MySQL.
Щелкните <span>Catalog</span> в инструментальной панели, произвольно обновите
каталог (или переключите <span>Do not update at this time</span>), нажмите
<span>Next</span>/<span>Execute</span> и затем рассмотрите историю изменения.
</p>
<a name="mysql-installer-change-history-figure"></a><p><b>Рис. 2.24. MySQL
Installer. История изменения каталога</b></p>
<img src="mi-chhis.png" width="790" height="589">

<h5><a name="mysql-installer-remove"></a>2.3.3.1.2. Удаление продуктов MySQL
</h5>
<p>MySQL Installer может также удалить продукты MySQL из Вашей системы. Чтобы
удалить продукт MySQL, щелкните <span>Remove</span> из инструментальной
панели. Это открывает окно со списком установленных продуктов MySQL. Выберите
продукты MySQL, которые Вы хотите удалить, а затем щелкните <span>Execute
</span>. Чтобы выбрать все продукты MySQL, щелкните
<span>[ ]</span> слева от метки <span>Product</span>.</p>

<a name="mysql-installer-remove-products-select-figure"></a><p><b>Рис. 2.25.
MySQL Installer. Удаление продуктов: выбор</b></p>
<img src="mi-rem.png" width="790" height="589">

<a name="mysql-installer-remove-products-executed-figure"></a><p><b>Рис.
2.26. MySQL Installer. Удаление продуктов: выполнение</b></p>
<img src="mi-remd.png" width="790" height="589">

<h5><a name="mysql-installer-alter"></a>2.3.3.1.3. Измените продукты MySQL
</h5>
<p>Используйте MySQL Installer, чтобы изменить, сконфигурировать или обновить
Ваши установки продукта MySQL.</p>

<h6><a name="mysql-installer-alter-upgrade"></a>Обновление</h6>
<p>Допускающие обновление продукты MySQL перечислены на основной
инструментальной панели со значком стрелки
(<span><img src="wbe.png" align="middle" width="16" height="16"></span>)
рядом с их номером версии.</p>

<a name="mysql-installer-dashboard-upgrade-viewable-figure"></a><p><b>Рис.
2.27. MySQL Installer. Обновление продукта MySQL</b></p>
<img src="mi-dashu.png" width="790" height="589">
<p>Функциональность &quot;обновления&quot; требует текущего каталога
продукции. Этот каталог обновлен вручную или автоматически (ежедневно),
активируя <span>Automatic Catalog Update</span>.</p>

<p>Щелкните <span>Upgrade</span>, чтобы обновить доступные продукты. Наш
пример указывает, что инструментальные средства MySQL 6.2.4 могут быть
обновлены до версии 6.3.1 или 6.2.5, а сервер MySQL с 5.5.41 до 5.5.42.</p>

<a name="mysql-installer-upgrade-select-products-to-upgrade-figure"></a><p>
<b>Рис. 2.28. MySQL Installer. избранные продукты, чтобы обновить</b></p>
<img src="mi-upgr.png" width="790" height="589">
<p>Если много версий обновления доступны (такие, как наш пример
инструментальных средств MySQL выше), выберите желаемую версию для обновления
в области <span>Available Upgrades</span>.</p>

<p>Щелкните по ссылке <span><strong>Changes</strong></span>, чтобы
просмотреть информацию о версии.</p>
<p>После выбора (проверки) продуктов и версий, чтобы обновить,
щелкните по <span>Next</span>.</p>

<a name="mysql-installer-upgrade-apply-updates-figure"></a><p><b>Рис. 2.29.
MySQL Installer применяет обновления</b></p>
<img src="mi-appu.png" width="790" height="589">
<p>Обновление сервера MySQL также проверит и обновит базу данных сервера.
Этот шаг рекомендуется.</p>

<a name="mysql-installer-check-and-upgrade-database-figure"></a><p><b>Рис.
2.30. MySQL Installer. Проверка и обновление базы данных</b></p>
<img src="mi-check.png" width="790" height="589">
<p>После завершения Ваши продукты будут обновлены и доступны к использованию.
Обновление сервера MySQL также перезапускает сервер MySQL.</p>

<h6><a name="mysql-installer-alter-reconfigure"></a>Реконфигурирование</h6>
<p>Некоторые продукты MySQL, такие как сервер MySQL, включают опцию
<span>Reconfigure</span>. Это открывает те же самые параметры конфигурации,
которые были установлены, когда продукт MySQL был установлен.</p>

<p>Чтобы выполнить, щелкните <code>Reconfigure</code> под столбцом
<span>Quick Action</span> на основной инструментальной панели для продукта
MySQL, который Вы хотите реконфигурировать.</p>

<a name="mysql-installer-reconfigure-link-figure"></a><p><b>Рис. 2.31.
MySQL Installer. Реконфигурирование продукта MySQL</b></p>
<img src="mi-dashr.png" width="790" height="589">
<p>В случае сервера MySQL это открывает мастер конфигурации, который касается
выбранного продукта. Например, для сервера MySQL это включает установку типа,
портов, путей журнала и так далее.</p>

<h6><a name="mysql-installer-alter-modify"></a>Изменение</h6>
<p>Много продуктов MySQL содержат компоненты, которые могут быть добавлены
или удалены. Например, <code>Debug binaries</code> и
<code>Client Programs</code> субкомпоненты сервера MySQL.</p>

<p>Для изменения особенностей продукта, щелкните <span>Modify</span>
в основной инструментальной панели.</p>
<a name="mysql-installer-modify-product-features-figure"></a><p><b>Рис. 2.32.
MySQL Installer. Изменение характеристик продукта</b></p>
<img src="mi-mod.png" width="790" height="589">
<p>Щелкните <span>Execute</span>, чтобы выполнить запрос модификации.</p>

<h4><a name="MySQLInstallerConsole"></a>2.3.3.2. Консоль MySQL Installer</h4>
<p><a href="#MySQLInstallerConsole"><span><strong>
MySQLInstallerConsole</strong></span></a> обеспечивает функциональность,
подобную версии GUI MySQL Installer, но из командной строки. Это установлено,
когда MySQL Installer первоначально выполнен, и затем доступно в пределах
каталога <code>MySQL Installer</code>. Как правило, это находится в
<code>C:\Program Files (x86)\MySQL\MySQL Installer\</code>, консоль
должна быть выполнена с административными привилегиями.</p>

<p>Чтобы использовать, вызовите командную строку с административными
привилегиями выбором <span>Start</span>, <span>Accessories</span>, затем
кликните правой кнопкой мыши по
<span>Command Prompt</span> и выберите <code>Run as administrator</code>.
Из командной строки произвольно измените каталог туда, где расположен
<a href="#MySQLInstallerConsole"><span><strong>
MySQLInstallerConsole.exe</strong></span></a>:
<pre>
C:\&gt; cd "C:\Program Files (x86)\MySQL\MySQL Installer for Windows"
C:\&gt; MySQLInstallerConsole.exe help

C:\Program Files (x86)\MySQL\MySQL Installer for Windows &gt; MySQLInstallerConsole.exe help

The following commands are available:

Configure - Configures one or more of your installed programs.
Help      - Provides list of available commands.
Install   - Install and configure one or more available MySQL programs.
List      - Provides an interactive way to list all products available.
Modify    - Modifies the features of installed products.
Remove    - Removes one or more products from your system.
Status    - Shows the status of all installed products.
Update    - Update the current product catalog.
Upgrade   - Upgrades one or more of your installed programs.
</pre>

<p><a href="#MySQLInstallerConsole"><span><strong>
MySQLInstallerConsole.exe</strong></span></a>
поддерживает следующие опции, которые определены в командной строке:</p>

<p>Значения блока конфигурации, которые содержат двоеточие (":"),
должны быть обернуты в двойные кавычки. Например,
installdir="C:\MySQL\MySQL Server 8.0".</p>

<ul><li><p><a name="MySQLInstallerConsole-configure"></a>
<code>configure <em><code>[product1]:[setting]=[value];
[product2]:[setting]=[value]; [...]</code></em></code></p>
<p>Сконфигурируйте один или более продуктов MySQL на своей системе.
Многократные пары setting=value могут быть сконфигурированы
для каждого продукта.</p>

<p>Переключатели включают:</p>
<ul><li><p><code>-showsettings</code>: Выводит на экран доступные параметры
для выбранного продукта, проходя в названии
продукта после <code>-showsettings</code>.</li>

<li><code>-silent</code>: Отключить подсказки подтверждения.</p></li></ul>
<pre>
C:\&gt; MySQLInstallerConsole configure -showsettings server
C:\&gt; MySQLInstallerConsole configure server:port=3307
</pre></li>

<li><a name="MySQLInstallerConsole-help"></a>
<code>help <em><code>[command]</code></em></code></p>
<p>Выводит на экран сообщение справки с примерами использования, а затем
выходит. Передайте дополнительную команду, чтобы получить справку,
определенную для той команды.
<pre>
C:\&gt; MySQLInstallerConsole help
C:\&gt; MySQLInstallerConsole help install
</pre></li>

<li><a name="MySQLInstallerConsole-install"></a>
<code>install <em><code>[product]:[features]:[config
block]:[config block]:[config block]; [...]</code></em></code></p>

<p>Установить один или более продуктов MySQL в системе.</p>
<p>Переключатели и опции синтаксиса включают:</p>
<ul><li><p><code>-type=[SetupType]</code>:
Устанавливает предопределенный набор программного обеспечения. "SetupType"
может быть одним из следующего:</p>
<p>Непользовательские типы установки могут быть выбраны только, если никакие
другие продукты MySQL не установлены.</p>

<ul><li><p><span><strong>Developer</strong></span>:
Устанавливает полную среду проектирования.</li>
<li><span><strong>Server</strong></span>:
Устанавливает только сервер MySQL.</li>

<li><span><strong>Client</strong></span>:
Устанавливает программы клиента и библиотеки.</li>
<li><span><strong>Full</strong></span>: Устанавливает все.</li>
<li><span><strong>Custom</strong></span>: Устанавливает выбранные продукты.
Это опция по умолчанию.</p></li></ul></li>

<li><p><code>-showsettings</code>:
Выводит на экран доступные параметры для выбранного продукта.</li>
<li><code>-silent</code>: Отключить подсказки подтверждения.</li>

<li><code>[config block]</code>: Могут быть определены один или более блоков
конфигурации. Каждый блок конфигурации отделенный точкой с запятой список пар
значений ключа. Блок может включать ключ типа "config" или "user", где
"config" тип значения по умолчанию.</p>

<p>Значения блока конфигурации, которые содержат двоеточие (":"),
должны быть обернуты в двойные кавычки. Например,
<code>installdir="C:\MySQL\MySQL Server 8.0"</code>.</p>

<p>Только один блок типа "config" может быть определен для продукта.
Блок "user" должен быть определен для каждого пользователя, который должен
быть создан во время установки продукта.</p>
<p>Добавление пользователей не поддержано, когда продукт реконфигурирован.
</p></li>

<li><p><code>[feature]</code>: Блок особенностей отделенный точками с запятой
список особенностей или '*', чтобы выбрать все особенности.</p></li></ul>
<pre>
C:\&gt; MySQLInstallerConsole install server;5.6.25:*:port=3307;serverid=2:type=user;username=foo;password=bar;role=DBManager
C:\&gt; MySQLInstallerConsole install server;5.6.25;x64 -silent
</pre>

<p>Пример, который проходит в дополнительных блоках конфигурации, разделенных
<code>^</code>, чтобы соответствовать экрану:
<pre>
C:\&gt; MySQLInstallerConsole install server;5.6.25;x64:*:type=config;openfirewall=true; ^
generallog=true;binlog=true;serverid=3306;enable_tcpip=true;port=3306;rootpasswd=pass; ^
installdir="C:\MySQL\MySQL Server 5.6":type=user;datadir="C:\MySQL\data";username=foo;password=bar;role=DBManager
</pre></li>

<li><a name="MySQLInstallerConsole-list"></a><code>list</code></p>
<p>Перечисляет, где все доступные продукты MySQL могут искаться. Выполните
<code>MySQLInstallerConsole list</code> и введите подстроку для поиска.
<pre>
C:\&gt; MySQLInstallerConsole list
</pre></li>

<li><a name="MySQLInstallerConsole-modify"></a>
<code>modify <em><code>[product1: -removelist| +addlist]
[product2: -removelist| +addlist] [...]</code></em></code></p>
<p>Изменяет или выводит на экран особенности ранее
установленного продукта MySQL.</p>

<ul><li><p><code>-silent</code>: Отключить подсказки подтверждения.
</p></li></ul>
<pre>
C:\&gt; MySQLInstallerConsole modify server
C:\&gt; MySQLInstallerConsole modify server:+documentation
C:\&gt; MySQLInstallerConsole modify server:-debug
</pre></li>

<li><a name="MySQLInstallerConsole-remove"></a>
<code>remove <em><code>[product1] [product2] [...]</code></em></code></p>
<p>Удаляет один или больше продуктов из Вашей системы.</p>

<ul><li><p><code>*</code>: Укажите <code>*</code>, чтобы
удалить все продукты MySQL.</li>
<li><code>-continue</code>: Продолжить работу, даже если ошибка происходит.
</li>

<li><code>-silent</code>: Отключить подсказки подтверждения.</p></li></ul>
<pre>
C:\&gt; MySQLInstallerConsole remove *
C:\&gt; MySQLInstallerConsole remove server
</pre></li>

<li><a name="MySQLInstallerConsole-status"></a><code>status</code></p>
<p>Обеспечивает быстрый краткий обзор продуктов MySQL, которые установлены
в системе. Информация включает название продукта и версию, архитектуру,
дату и местоположение установки.
<pre>
C:\&gt; MySQLInstallerConsole status
</pre></li>

<li><a name="MySQLInstallerConsole-update"></a><code>update</code></p>
<p>Загружает последний каталог продукции MySQL в Вашу систему. При
успехе каталог загрузки будет применен в следующий раз, когда выполнен
MySQLInstaller или MySQLInstallerConsole.
<pre>
C:\&gt; MySQLInstallerConsole <em><code>update</code></em>
</pre>
<p>GUI-опция <span>Automatic Catalog Update</span> выполняет эту команду из
Windows Task Scheduler.</p></li>

<li><p><a name="MySQLInstallerConsole-upgrade"></a>
<code>upgrade <em><code>[product1:version]
[product2:version] [...]</code></em></code></p>
<p>Обновляет один или более продуктов на Вашей системе.
Опции синтаксиса включают:</p>

<ul><li><p><code>*</code>: Указать <code>*</code>, чтобы обновить
все продукты до последней версии.</li>
<li><code>!</code>: Указать <code>!</code> как номер версии, чтобы обновить
продукт MySQL до его последней версии.</li>

<li><code>-silent</code>: Отключить подсказки подтверждения.</p></li></ul>
<pre>
C:\&gt; MySQLInstallerConsole upgrade *
C:\&gt; MySQLInstallerConsole upgrade workbench:6.3.5
C:\&gt; MySQLInstallerConsole upgrade workbench:!
C:\&gt; MySQLInstallerConsole upgrade workbench:6.3.5 excel:1.3.2
</pre></li></ul>

<h3><a name="windows-notifier"></a>2.3.4. MySQL Notifier</h3>
<p>MySQL Notifier инструмент, который позволяет Вам контролировать и
скорректировать состояние своих копий сервера MySQL через индикатор, который
находится в системном трее. MySQL Notifier также предоставляет быстрый доступ
к инструментальным средствам MySQL через контекстное меню.</p>

<p>MySQL Notifier установлен MySQL Installer и (по умолчанию) будет
запускаться, когда Microsoft Windows будет запущена.</p>
<p>Чтобы установить, загрузите и выполните
<a href="../../../dev.mysql.com/downloads/installer/default.htm" target="_top">MySQL
Installer</a>, убедитесь, что продукт MySQL Notifier выбран,
затем возобновите установку.</p>

<h4><a name="idm139965427584144"></a>Возможности включают:</h4>
<ul><li><p>Запуск, остановку и перезапуск MySQL Server.</li>
<li>Автоматически обнаруживает (и добавляет) новые службы сервера MySQL. Они
перечислены как <span>Manage Monitored Items</span>
и могут также быть сконфигурированы.</li>

<li>Значок Tray изменяется, в зависимости от состояния. Зеленый, если все
копии MySQL Server работают, или красный, если по крайней мере
одна служба остановлена. Опция <span>Update MySQL Notifier tray icon based on
service status</span>, которая диктует это поведение, включена по умолчанию
для каждой службы.</li>

<li>Ссылки к другим приложениям, например, MySQL Workbench, MySQL Installer и
MySQL Utilities. Например, выбор <span>Manage Instance</span> загрузит окно
администрирования сервера инструментальных средств MySQL для этой копии.</li>

<li>Если MySQL Workbench установлен, опции <span>Manage Instance</span> и
<span>SQL Editor</span> доступны для местных (но не удаленных) копий MySQL.
</li>
<li>Отслеживаются местные и удаленные копии MySQL.</p></li></ul>

<h4><a name="windows-notifier-usage"></a>2.3.4.1. Использование MySQL Notifier
</h4>
<p>MySQL Notifier находится в системном трее и обеспечивает визуальную
информацию о статусе для Ваших копий сервера MySQL. Зеленый значок выведен на
экран в верхнем левом углу значка трея, если текущий сервер MySQL работает.
Значок красный, если служба остановлена.</p>

<p>MySQL Notifier автоматически добавляет службы MySQL на местной машине,
каждая служба конфигурируема. По умолчанию опция <span>Automatically add new
services whose name contains</span> включена и установлена в
<code>mysql</code>. Связанные <span>Notifications Options</span>
включают регистрацию, когда новые службы обнаружены или изменяют состояние,
и также включены по умолчанию. Удаление службы также удалит службу
из MySQL Notifier.</p>

<p>Щелчок по значку системного трея покажет несколько опций:</p>
<p>Меню Service Instance это основное окно MySQL Notifier, позволяет Вам
остановить, запустить и перезапустить сервер MySQL.</p>

<a name="windows-notifier-server-instance"></a><p><b>Рис. 2.33.
MySQL Notifier. Меню Service Instance</b></p>
<img src="server.png" width="341" height="213">
<p>Меню <span>Actions</span> включает несколько ссылок к внешним приложениям
(если они установлены) и опцию <span>Refresh Status</span>, чтобы вручную
освежить состояние всех проверенных служб (в местных и в удаленных
компьютерах) и экземпляры MySQL.</p>

<p>Главное меню не будет показывать меню <span>Actions</span>, когда не будет
никаких служб, проверяемых MySQL Notifier.</p>
<a name="windows-notifier-actions"></a><p><b>
Рис. 2.34. MySQL Notifier. Меню Actions</b></p>
<img src="windows-notifier-actions.png" width="503" height="225">
<p>Меню <span>Actions</span>, <span>Options</span>
конфигурирует MySQL Notifier и включает опции:</p>

<ul><li><p><span>Use colorful status icons</span>:
Включает красочный стиль значков для MySQL Notifier.</li>
<li><span>Run at Windows Startup</span>: Позволяет приложению быть
загруженным, когда Microsoft Windows запускается.</li>
<li><span>Automatically Check For Updates Every</span> # <span>Weeks</span>:
Проверять новую версию MySQL Notifier каждые # недель.</li>

<li><span>Automatically add new services whose name contains:</span>
текст, чтобы фильтровать службы и добавлять их автоматически к проверенному
списку MySQL Notifier.</li>

<li><span>Ping monitored MySQL Server instances every</span> # <span>seconds
</span>: интервал (в секундах), чтобы проверить с помощью ping-запросов
экземпляры MySQL Server для изменений состояния. Более длинные интервалы
могли бы быть необходимы, если список проверенных удаленных копий большой.
</li>

<li><span>Notify me when a service is automatically added</span>:
выведет на экран уведомление, когда недавно обнаруженная служба добавлена к
проверенному списку служб.</li>

<li><span>Notify me when a service changes status</span>: выведет на экран
уведомление, когда наблюдаемая служба изменяет состояние.</li>
<li><span>Automatic connections migration delayed until:</span>
Когда есть соединения для миграции, отложить перемещение на один час, один
день, одну неделю, один месяц или неопределенно.</p></li></ul>

<a name="windows-notifier-options"></a><p><b>Рис. 2.35.
MySQL Notifier. Меню Options</b></p>
<img src="options.png" width="428" height="480">

<p>Меню <span>Actions</span>, <span>Manage Monitored Items</span>
позволяет Вам сконфигурировать проверенные службы и копии MySQL:</p>
<a name="windows-notifier-manage-services"></a><p><b>Рис. 2.36.
MySQL Notifier. Меню Manage Services</b></p>
<img src="mserv.png" width="602" height="529">
<p>Вкладка <span>Instances</span> проста:</p>

<a name="windows-notifier-manage-instances"></a><p><b>Рис. 2.37. MySQL
Notifier. Меню Manage Instances</b></p>
<img src="minst.png" width="602" height="529">

<p>Добавление службы или экземпляра (после нажатия
<span>Add</span> в окне <span>Manage Monitored Items</span>)
позволяет Вам выбрать рабочую службу Microsoft Windows или соединение
и сконфигурировать MySQL Notifier, чтобы контролировать это. Добавьте новую
службу или экземпляр, щелкая по имени службы из списка, а затем по
<span>OK</span>. Может быть выбрано много служб.</p>

<a name="windows-notifier-add-services"></a><p><b>Рис. 2.38. MySQL Notifier.
Добавление новых служб</b></p>
<img src="servadd.png" width="504" height="578">

<p>Добавление новых экземпляров:</p>
<a name="windows-notifier-add-instances"></a><p><b>Рис. 2.39. MySQL Notifier.
Добавление новых экземпляров</b></p>
<img src="instadd.png" width="610" height="600">

<h5><a name="windows-notifier-troubleshooting"></a>Проблемы</h5>
<p>Для решения проблем, которые не зарегистрированы здесь, посетите
<a href="../../../forums.mysql.com/list.php@173" target="_top">
MySQL Notifier Support Forum</a>.</p>

<ul><li><p><span><em>Проблема</em></span>: попытка
запустить/остановить/перезапустить службу MySQL может произвести ошибку,
подобную "The Service <span><strong>MySQL<em><code>VERSION</code></em>
</strong></span>" при этом запрос на изменение состояния проваливается с
сообщением "The service <span><strong>mysql<em><code>VERSION</code></em>
</strong></span> was not found in the Windows Services".</p>

<p><span><em>Объяснение</em></span>: это проблема чувствительности к
регистру, дело в том, что имя службы
<span><strong>MySQL<em><code>VERSION</code></em></strong></span>, а не
<span><strong>mysql<em><code>VERSION</code></em></strong></span>,
указанным в конфигурационном файле.</p>

<p><span><em>Решение</em></span>: обновите свой конфигурационный файл
MySQL Notifier с правильной информацией, или остановите MySQL Notifier и
удалите этот конфигурационный файл. Конфигурационный файл MySQL Notifier
расположен в <code>%APPDATA%\Oracle\MySQL Notifier\settings.config</code>,
где <code>%APPDATA%</code> переменная и зависит от Вашей системы. Типичное
местоположение:
"C:\Users\<em><code>YourUsername</code></em>\AppData\Running\Oracle\MySQL
Notifier\settings.config", где <em><code>YourUsername</code></em>
имя пользователя Вашей системы. В этом файле, в пределах раздела ServerList,
измените значения ServerName на фактические имена сервисаов. Например,
изменение <span><strong>mysql<em><code>VERSION</code></em></strong></span> на
<span><strong>MySQL<em><code>VERSION</code></em></strong></span> может помочь
решить проблему. Сохраните файл, а затем перезапустите MySQL Notifier.
Альтернативно, остановите MySQL Notifier, удалите этот файл, затем
перезапустите MySQL Notifier.</li>

<li><span><em>Проблема</em></span>: соединяясь с отдаленным компьютером с
целью контроля отдаленной службы Windows диалог <span>Add Service</span>
не всегда показывает все службы, показанные в консоли Windows Services.</p>

<p><span><em>Объяснение</em></span>: этим поведением управляет операционная
система, и результат ожидается, работая с недоменными учетными записями
пользователя. Для полного описания поведения см. статью
<a href="../../../https@msdn.microsoft.com/en-us/library/aa826699(VS.85).aspx"
target="_top">User Account Control and WMI</a> Microsoft.</p>

<p><span><em>Решение</em></span>: когда отдаленный компьютер находится в
совместимом домене, рекомендуется, чтобы учетные записи пользователя домена
использовались, чтобы соединиться через WMI с отдаленным компьютером. Для
подробных инструкций настройки, используя WMI, см.
<a href="#windows-notifier-installation">раздел 2.3.4.2</a>.</p>

<p>Альтернативно, когда учетные записи пользователя домена недоступны,
Microsoft обеспечивает менее безопасное обходное решение, которое должно
быть осуществлено с осторожностью. Для получения дополнительной информации
см. <a href="../../../https@support.microsoft.com/en-us/kb/951016" target="_top">
Description of User Account Control and remote restrictions in Windows
Vista</a> статью KB Microsoft.</p></li></ul>

<h4><a name="windows-notifier-installation"></a>2.3.4.2.
Установка дистанционного мониторинга в MySQL Notifier</h4>
<p>MySQL Notifier применяет Windows Management Instrumentation (WMI), чтобы
управлять и контролировать службы на отдаленных компьютерах. Этот раздел
объясняет, как он работает и как настроить Вашу систему, чтобы контролировать
удаленные копии MySQL.</p>

<p>Чтобы сконфигурировать WMI, важно понять, что архитектура
Distributed Component Object Model (DCOM) делает работу WMI. MySQL Notifier
использует асинхронные запросы уведомления на отдаленных узлах Microsoft
Windows как .NET события. Эти события посылают асинхронный отзыв в MySQL
Notifier, таким образом, это знает, когда состояние службы изменилось на
отдаленном компьютере. Асинхронные уведомления предлагают лучшую работу по
сравнению с полусинхронными уведомлениями или синхронными
уведомлениями, использующими таймеры.</p>

<p>Асинхронное уведомление требует, чтобы отдаленный компьютер послал отзыв в
компьютер клиента (таким образом открывающий обратное соединение), значит,
настройки Firewall и DCOM Windows должны быть должным образом
сконфигурированы для коммуникации.</p>

<a name="windows-notifier-installation-wmi"></a><p><b>Рис. 2.40. MySQL
Notifier. Distributed Component Object Model (DCOM)</b></p>
<img src="wmi.png" width="661" height="194">
<p>Большинство распространенных ошибок, созданных асинхронными уведомлениями
WMI, связано с брандмауэром Windows, блокирующим коммуникацию, или с
DCOM/настройками WMI, не настроенных должным образом.</p>

<p>Следующие шаги нужны, чтобы наладить WMI. Эти шаги разделены между двумя
машинами. Единственный хост, который выполняет MySQL Notifier (Computer A),
и много отдаленных машин, которые проверяются (Computer B).</p>

<h5><a name="windows-notifier-remote-computer-a"></a>Computer A</h5>
<ol type="1"><li><p>Включите удаленное администрирование редактированием
<span>Group Policy Editor</span> или через <code>NETSH</code>:</p>

<p>Используя <span>Group Policy Editor</span>:</p>
<ol type="a"><li><p>Нажмите <span>Start</span>, <span>Run</span>, введите
<code>GPEDIT.MSC</code> и нажмите <span>OK</span>.</li>

<li>В соответствии с <span>Local Computer Policy</span>,
откройте <span>Computer Configuration</span>.</li>
<li>Разверните <span>Administrative Templates</span>, <span>Network</span>,
<span>Network Connections</span> и <span>Windows Firewall</span>.</li>

<li>Если компьютер находится в домене, то сделайте двойной клик по
<span>Domain Profile</span>, иначе по <span>Standard Profile</span>.</li>
<li>Дважды щелкните <span>Windows Firewall: Allow inbound
remote administration exception</span>, чтобы открыть окно конфигурации.</li>
<li>Проверьте переключатель <span>Enabled</span>,
затем нажмите <span>OK</span>.</p></li></ol>

<p>Используя команду <code>NETSH</code>:</p>
<p>Команда "netsh firewall" устарела в Microsoft Server 2008 и Vista
и заменена на "netsh advfirewall firewall".</p>

<ol type="a"><li><p>Откройте окно командной строки с административными
правами (щелкните правой кнопкой мыши по Command Prompt и выберите
<span>Run as Administrator</span>).</li>

<li>Выполните следующую команду:
<pre>
NETSH advfirewall firewall set service RemoteAdmin enable
</pre></li></ol></li>

<li><p>Откройте DCOM порт TCP 135:</p>
<ol type="a"><li><p>Откройте окно командной строки с административными
правами (щелкните правой кнопкой мыши по Command Prompt и выберите
<span>Run as Administrator</span>).</li>

<li>Выполните следующую команду:
<pre>
NETSH advfirewall firewall add rule name=DCOM_TCP135 protocol=TCP localport=135 dir=in action=allow
</pre></li></ol></li>

<li><p>Добавьте приложение-клиент (<code>MySqlNotifier.exe</code>) в
Windows Firewall Exceptions List (используйте конфигурацию Windows
Firewall или <code>NETSH</code>):</p>

<p>Используя конфигурацию Windows Firewall:</p>
<ol type="a"><li><p>В Control Panel дважды щелкните
по <span>Windows Firewall</span>.</li>

<li>В левой панели окна Windows Firewall кликните
<span>Allow a program or feature through Windows Firewall</span>.</li>
<li>В окне Allowed Programs кликните <span>Change Settings</span> и
сделайте одно из следующего:</p>

<ul><li><p>Если <code>MySqlNotifier.exe</code> находится в списке
Allowed programs, удостоверьтесь, что он проверен на тип сетей, с которыми
компьютер соединяется (Private, Public или оба).</li>

<li>Если <code>MySqlNotifier.exe</code> не находится в списке, щелкните
<span>Allow another program...</span>.</p>
<ol type="i"><li><p>В окне <span>Add a Program</span> выберите
<code>MySqlNotifier.exe</code>, если это существует в списке Programs, иначе
кликните Browse... и перейдите в каталог, где был установлен
<code>MySqlNotifier.exe</code>, чтобы выбрать его,
затем щелкните <span>Add</span>.</li>

<li>Удостоверьтесь, что <code>MySqlNotifier.exe</code> проверен на тип сетей,
с которыми компьютер соединяется (Private, Public или оба).
</p></li></ol></li></ul></li></ol>

<p>Используя команду <code>NETSH</code>:</p>
<ol type="a"><li><p>Откройте окно командной строки с административными
правами (щелкните правой кнопкой мыши по Command Prompt и выберите
<span>Run as Administrator</span>).</li>

<li>Выполните следующую команду, где Вы замените
"<em><code>[YOUR_INSTALL_DIRECTORY]</code></em>" на каталог установки:
<pre>
NETSH advfirewall firewall add rule name=MySqlNotifier program=[YOUR_INSTALL_DIRECTORY]\MySqlNotifier.exe action=allow dir=in
</pre></li></ol></li>

<li><p>Если Computer B является членом <code>WORKGROUP</code>
или находится в домене, которому не доверяет Computer A,
тогда соединение отзыва (Соединение 2) создается как Anonymous.
Предоставьте анонимным соединениям разрешения удаленного доступа DCOM:</p>

<ol type="a"><li><p>Нажмите <span>Start</span>, <span>Run</span>, введите
<code>DCOMCNFG</code> и кликните <span>OK</span>.</li>
<li>В окне Component Services раскройте Component Services, Computers и
кликните правой кнопкой мыши по <span>My Computer</span>,
затем выберите <span>Properties</span>.</li>

<li>В окне My Computer Properties перейдите на
вкладку <span>COM Security</span>.</li>
<li>В Access Permissions нажмите <span>Edit Limits</span>.</li>

<li>В Access Permission выберите <span>ANONYMOUS LOGON name</span>
в поле имени пользователя или группы. В столбце Allow под Permissions для
User выберите <span>Remote Access</span> и нажмите <span>OK</span>.
</p></li></ol></li></ol>

<h5><a name="windows-notifier-remote-computer-b"></a>Computer B</h5>
<p>Если учетная запись пользователя, которая зарегистрирована для компьютера,
выполняющего MySQL Notifier (Computer A) является местным администратором на
отдаленном компьютере (Computer B), Вы можете пропустить шаг
разрешения удаленного администрирования.</p>

<p>Установите безопасность DCOM, чтобы позволить не административному
пользователю получмть доступ к компьютеру удаленно:</p>
<ol type="1"><li><p>Предоставьте права "DCOM remote launch" и
разрешения активации для пользователя или группы:</p>

<ol type="a"><li><p>Кликните <span>Start</span>, <span>Run</span>, введите
<code>DCOMCNFG</code> и нажмите <span>OK</span>.</li>
<li>В окне Component Services разверните Component Services, Computers и
правой кнопкой мыши щелкните по
<span>My Computer</span>, выберите <span>Properties</span>.</li>

<li>В окне My Computer Properties перейдите на
вкладку <span>COM Security</span>.</li>
<li>Под Launch and Activation Permission нажмите <span>Edit Limits</span>.
</li>

<li>В окне <span>Launch and Activation Permission</span>
следуйте этим шагам, если Ваше имя или группа не появляются в списке групп
или имен пользователя:</p>

<ol type="i"><li><p>В окне <span>Launch and Activation
Permission</span> кликните <span>Add</span>.</li>
<li>В окне Select Users or Groups добавьте включите свое имя и группу в поле
<span>Enter the object names to select</span> и кликните <span>OK</span>.
</p></li></ol></li>

<li><p>В окне <span>Launch and Activation Permission</span> выберите
своего пользователя и группу в поле имен пользователя или группы. В столбце
Allow под Permissions for User, выберите <span>Remote Launch</span>,
<span>Remote Activation</span> и нажмите <span>OK</span>.</p></li></ol>

<p>Предоставьте разрешения удаленного доступа DCOM:</p>
<ol type="a"><li><p>Кликните <span>Start</span>, <span>Run</span>, введите
<code>DCOMCNFG</code> и нажмите <span>OK</span>.</li>

<li>В окне Component Services разверните Component Services, Computers и
правой кнопкой мыши щелкните по
<span>My Computer</span>, выберите <span>Properties</span>.</li>

<li>В окне My Computer Properties перейдите на
вкладку <span>COM Security</span>.</li>
<li>Под Access Permissions нажмите на <span>Edit Limits</span>.</li>

<li>В окне Access Permission выберите
<span>ANONYMOUS LOGON name</span> в
поле имен пользователя или группы. В столбце Allow под Permissions for User
выберите <span>Remote Access</span> и нажмите <span>OK</span>.
</p></li></ol></li>

<li><p>Разрешение пользовательского доступа не администратору к определенному
пространству имен WMI:</p>
<ol type="a"><li><p>В Control Panel откройте <span>Administrative Tools
</span>.</li>

<li>В окне Administrative Tools откройте <span>Computer Management</span>.
</li>
<li>В окне Computer Management разверните дерево
<span>Services and Applications</span>.</li>

<li>Кликните правой кнопкой по WMI Control и выберите <span>Properties</span>.
</li>
<li>В окне WMI Control Properties перейдите на вкладку <span>Security</span>.
</li>

<li>На вкладке Security выберите выберите пространство имен и щелкните
<span>Security</span>. Root/CIMV2 обычно используемое пространство имен.</li>
<li>Определите местонахождение соответствующей учетной записи и проверьте
наличие <span>Remote Enable</span> в списке Permissions.</p></li></ol></li>

<li><p>Разрешите удаленное администрирование через
<span>Group Policy Editor</span> или <code>NETSH</code>:</p>
<p>Используя <span>Group Policy Editor</span>:</p>

<ol type="a"><li><p>Кликните <span>Start</span>, <span>Run</span>, введите
<code>GPEDIT.MSC</code> и нажмите <span>OK</span>.</li>
<li>В Local Computer Policy дважды кликните
по <span>Computer Configuration</span>.</li>

<li>Дважды кликните по <span>Administrative Templates</span>,
<span>Network</span>, <span>Network Connections</span> и
<span>Windows Firewall</span>.</li>

<li>Если компьютер находится в домене, то дважды кликните по
<span>Domain Profile</span>, иначе по <span>Standard Profile</span>.</li>
<li>Кликните по <span>Windows Firewall: Allow inbound
remote administration exception</span>.</li>
<li>В меню Action выберите <span>Edit</span>.</li>
<li>Проверьте выбор <span>Enabled</span> и нажмите <span>OK</span>.
</p></li></ol>

<p>Используя команду <code>NETSH</code>:</p>
<ol type="a"><li><p>Откройте окно командной строки с административными
правами (щелкните правой кнопкой мыши по Command Prompt и выберите
<span>Run as Administrator</span>).</li>

<li>Выполните такую команду:
<pre>
NETSH advfirewall firewall set service RemoteAdmin enable
</pre></li></ol></li>

<li><p>Подтвердите, что учетная запись пользователя использует значение
<code>Name</code>, а не <code>Full Name</code>:</p>
<ol type="a"><li><p>В <span>Control Panel</span> откройте
<span>Administrative Tools</span>.</li>

<li>В окне <span>Administrative Tools</span> дважды щелкните по
<span>Computer Management</span>.</li>
<li>В окне <span>Computer Management</span> откройте
<span>System Tools</span>, затем <span>Local Users and Groups</span>.</li>

<li>Кликните по узлу <span>Users</span> и на правой панели
определите местонахождение Вашего пользователя и удостоверьтесь, что это
использует значение <span>Name</span>, чтобы соединиться, а не
значение <span>Full Name</span>.</p></li></ol></li></ol>

<h5><a name="windows-notifier-installation-errors"></a>
Распространенные ошибки</h5>
<ul><li><p><code>0x80070005</code></p>
<ul><li><p>Безопасность DCOM не была сконфигурирована должным образом (см.
шаг <code>Setting DCOM security...</code> для компьютера B).</li>

<li>Удаленная машина (Computer B) является членом WORKGROUP
или находится в домене, которому не доверяет компьютер клиента A
(см. шаг <code>Grant Anonymous connections DCOM
Remote Access permissions</code> для машины A).</p></li></ul></li>

<li><p><code>0x8007000E</code></p>
<ul><li><p>Удаленная машина (B) является членом WORKGROUP
или находится в домене, которому не доверяет компьютер клиента A
(см. шаг <code>Grant Anonymous connections DCOM
Remote Access permissions</code> для машины A).</p></li></ul></li>

<li><p><code>0x80041003</code></p>
<ul><li><p>Доступ к отдаленному пространству имен WMI не был сконфигурирован
должным образом (см. шаг <code>Allowing non-administrator users access to a
specific WMI namespace</code> для B).</p></li></ul></li>

<li><p><code>0x800706BA</code></p>
<ul><li><p>Порт DCOM не открыт на компьютере клиента (A). См. шаг
<code>Open the DCOM port TCP 135</code> для A.</li>

<li>Удаленный компьютер (B) недоступен, потому что его сетевое местоположение
установлено в Public. Удостоверьтесь, что Вы можете получить доступ к нему
через Windows Explorer.</p></li></ul></li></ul>

<h3><a name="windows-install-archive"></a>2.3.5.
Установка MySQL в Microsoft Windows, используя архив noinstall Zip</h3>
<p>Пользователи, которые устанавливают пакет <code>noinstall</code>,
могут использовать инструкции в этом разделе, чтобы вручную установить MySQL.
Процесс для того, чтобы установить MySQL из архива Zip:</p>

<ol type="1"><li><p>Извлеките основной архив.</p>
<p><span><em>Дополнительно</em></span>: также извлеките архив теста отладки,
если Вы планируете выполнить точку отсчета MySQL и испытательный набор.</li>

<li>Создайте файл опций.</li>
<li>Выберите тип сервера MySQL.</li>
<li>Инициализируйте MySQL.</li>
<li>Запустите сервер MySQL.</li>
<li>Обеспечьте учетные записи пользователя по умолчанию.</p></li></ol>
<p>Этот процесс описан в разделах ниже.</p>

<h4><a name="windows-extract-archive"></a>2.3.5.1.
Извлечение архива установки</h4>
<p>Чтобы установить MySQL вручную, сделайте следующее:</p>

<ol type="1"><li><p>Если Вы обновляете от предыдущей версии, пожалуйста,
обратитесь к <a href="#windows-upgrading">разделу 2.3.8</a>
прежде, чем начать процесс обновления.</li>
<li>Удостоверьтесь, что Вы зарегистрированы как
пользователь с привилегиями администратора.</li>

<li>Выберите местоположение установки. Традиционно, сервер MySQL установлен в
<code>C:\mysql</code>. MySQL Installation Wizard ставит MySQL в
<code>C:\Program Files\MySQL</code>. Если Вы не устанавливаете MySQL в
<code>C:\mysql</code>, Вы должны определить путь к каталогу установки во
время запуска или в файле опций. См.
<a href="#windows-create-option-file">раздел 2.3.5.2</a>.</p>
<p>Установщик MySQL устанавливает MySQL в <code>C:\Program Files\MySQL
</code>.</p></li>

<li><p>Извлеките архив установки в выбранное местоположение, используя
распаковщик Zip. Некоторые инструменты могут извлечь архив в папку в Вашем
выбранном местоположении установки. Если это происходит, Вы можете
переместить содержание подпапки в выбранное местоположение установки.
</p></li></ol>

<h4><a name="windows-create-option-file"></a>2.3.5.2.
Создание файла опций</h4>
<p>Если Вы должны определить опции запуска, когда выполняете сервер, Вы
можете указать ни в командной строке или разместить их в файле опций.
Для опций, которые используются каждый раз, когда сервер запускается, Вы
можете счесть самым удобным использовать файл опций, чтобы определить Вашу
конфигурацию MySQL. Это особенно верно при следующих обстоятельствах:</p>

<ul><li><p>Каталог установки или данных отличается от местоположений по
умолчанию (<code>C:\Program Files\MySQL\MySQL Server 8.0</code> и
<code>C:\Program Files\MySQL\MySQL Server 8.0\data</code>).</li>

<li>Вы должны настроить настройки сервера, такие как память, кэш или
информация о конфигурации InnoDB.</p></li></ul>
<p>Когда сервер MySQL запускается в Windows, он ищет файлы опции в нескольких
местоположениях, таких как каталог Windows, <code>C:\</code>
и каталог установки MySQL (для полного списка местоположений см.
<a href="programs.htm#option-files">раздел 5.2.6</a>). Каталог Windows,
как правило, <code>C:\WINDOWS</code>. Вы можете определить его точное
местоположение от значения переменной окружения <code>WINDIR</code>,
используя следующую команду:
<pre>
C:\&gt; echo %WINDIR%
</pre>

<p>MySQL ищет опции в каждом местоположении сначала в файле
<code>my.ini</code>, а потом в <code>my.cnf</code>. Однако, чтобы избежать
беспорядка, лучше, если Вы используете только один файл. Если Ваш PC
использует загрузчик операционной системы, где <code>C:</code>
не диск начальной загрузки, Ваша единственная опция должна использовать
файл <code>my.ini</code>. Какой бы ни был файл опций, который Вы используете,
это должен быть только файл простого текста.</p>

<p>При использовании установщика MySQL, чтобы установить сервер MySQL,
это создаст <code>my.ini</code> в местоположении по умолчанию и предоставлет
полные разрешения доступа этому новому файлу <code>my.ini</code>.</p>

<p>Другими словами, убедитесь, что у пользователя сервера MySQL есть
разрешение читать файл <code>my.ini</code>.</p>
<p>Вы можете также использовать в качестве примера файлы опций, включенные в
Ваш дистрибутив MySQL, см.
<a href="server.htm#server-configuration-defaults">раздел 6.1.2</a>.</p>

<p>Файл опции может быть создан и изменен любым текстовым редактором, таким
как Notepad. Например, если MySQL установлен в <code>E:\mysql</code>, а
каталог данных находится в <code>E:\mydata\data</code>,
Вы можете создать файл опции, содержащий раздел <code>[mysqld]</code>, чтобы
определить значения для опций <code>basedir</code> и <code>datadir</code>:
<pre>
[mysqld]
# set basedir to your installation path
basedir=E:/mysql
# set datadir to the location of your data directory
datadir=E:/mydata/data
</pre>

<p>Пути Microsoft Windows определены в файлах опции, используя прямые, а не
обратные слэши. Если Вы используете обратные слэши, укажите их дважды:
<pre>
[mysqld]
# set basedir to your installation path
basedir=E:\\mysql
# set datadir to the location of your data directory
datadir=E:\\mydata\\data
</pre>

<p>Правила для использования наклонной черты влево в значениях файла опции
даны в <a href="programs.htm#option-files">разделе 5.2.6</a>.
</p>

<p>Zip-архив не включает каталог <code>data</code>.
Чтобы инициализировать установку MySQL, создавая каталог данных и заполняя
таблицы в системной базе данных mysql, инициализируйте MySQL, используя
<a href="server.htm#option_mysqld_initialize"><code>--initialize</code></a>
или <a href="server.htm#option_mysqld_initialize-insecure"><code>
--initialize-insecure</code></a>. Подробности в
<a href="#data-directory-initialization-mysqld">разделе
2.9.1.1</a>.</p>

<p>Если Вы хотели бы использовать каталог данных в ином местоположении,
Вы должны скопировать все содержание каталога <code>data</code> к новому
местоположению. Например, если Вы хотите использовать <code>E:\mydata</code>
как каталог данных вместо этого, Вы должны сделать две вещи:</p>

<ol type="1"><li><p>Переместите каталог <code>data</code> и все его
содержание от местоположения по умолчанию (например,
<code>C:\Program Files\MySQL\MySQL Server 8.0\data</code>) в
<code>E:\mydata</code>.</li>

<li>Используйте опцию <a href="server.htm#option_mysqld_datadir"><code>
--datadir</code></a>, чтобы определить новое местоположение каталога данных
каждый раз, когда Вы запускаете сервер.</p></li></ol>

<h4><a name="windows-select-server"></a>2.3.5.3. Выбор типа сервера MySQL
</h4>
<p>Следующая таблица показывает доступные серверы для Windows в MySQL 8.0.
</p>

<table border="1">
<thead><tr><th scope="col">Файл</th><th scope="col">Описание</th></tr></thead>
<tbody><tr><td scope="row"><a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a></td>
<td>Оптимизированный с поддержкой именованного канала.</td></tr>
<tr><td scope="row"><a href="programs.htm#mysqld"><span>
<strong>mysqld-debug</strong></span></a></td>
<td>аналог <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a>, но с полной отладкой и автоматической проверкой распределения памяти.
</td></tr></tbody></table>

<p>Все предыдущие наборы оптимизированы для современных процессоров Intel,
но должны работать на любом процессоре i386-class или выше.</p>

<p>Каждый из серверов поддерживает тот же самый набор механизмов хранения.
<a href="sql.htm#show-engines"><code>SHOW ENGINES</code></a> покажет
механизмы, которые поддерживают данный сервер.</p>

<p>Все серверы Windows MySQL 8.0 имеют поддержку символических ссылок
каталогов базы данных.</p>
<p>MySQL поддерживает TCP/IP на всех платформах Windows. Серверы MySQL на
Windows также поддерживают именованные каналы, если Вы запускаете сервер с
опцией <a href="server.htm#option_mysqld_enable-named-pipe"><code>
--enable-named-pipe</code></a>. Необходимо использовать эту опцию явно,
потому что некоторые пользователи испытали проблемы с закрытием сервера
MySQL, когда использовали каналы. Значение по умолчанию должно использовать
TCP/IP независимо от платформы, потому что каналы медленнее, чем TCP/IP во
многих конфигурациях Windows.</p>

<h4><a name="windows-initialize-data-directory"></a>2.3.5.4.
Инициализация каталога данных</h4>
<p>Если Вы устанавливали MySQL, используя пакет <code>Noinstall</code>,
никакой каталог данных не включен. Чтобы инициализировать каталог данных,
используйте инструкции в
<a href="#data-directory-initialization-mysqld">разделе
2.9.1.1</a>.</p>

<h4><a name="windows-server-first-start"></a>2.3.5.5. Запуск сервера впервые
</h4>
<p>Этот раздел дает общий обзор запуска сервера MySQL. Следующие разделы
предоставляют более определенную информацию для того, чтобы запустить сервер
MySQL из командной строки или как службу Windows.</p>

<p>Информация здесь применяется прежде всего, если Вы устанавливали MySQL,
используя версию <code>Noinstall</code> или если Вы хотите сконфигурировать и
проверить MySQL вручную, а не с инструментами GUI.</p>

<p>Сервер MySQL автоматически запустится после использования
MySQL Installer, и GUI
<a href="#windows-notifier">MySQL Notifier</a> может
использоваться, чтобы запустить/остановить/перезапустить в любое время.</p>

<p>Примеры в этих разделах предполагают, что MySQL установлен под
местоположением по умолчанию <code>C:\Program Files\MySQL\MySQL Server 8.0
</code>. Скорректируйте пути, показанные в примерах, если установили
MySQL в иное местоположение.</p>

<p>У клиентов есть две опции. Они могут использовать TCP/IP или канал, если
сервер поддерживает соединения по именованному каналу.</p>
<p>MySQL для Windows также поддерживает соединения совместно используемой
памяти, если сервер запущен с опцией
<a href="server.htm#option_mysqld_shared-memory"><code>--shared-memory</code>
</a>. Клиенты могут соединиться через совместно используемую память при
использовании опции <a href="programs.htm#option_general_protocol"><code>
--protocol=MEMORY</code></a>.</p>

<p>Тестирование лучше всего делать из командной строки в консоли (или
<span><span>DOS window</span></span>). Таким образом у Вас могут быть
сообщения о состоянии сервера в окне, где их легко видеть. Если что-то
является неправильным с Вашей конфигурацией, эти сообщения облегчают для Вас
идентификацию и решение любых проблем.</p>

<p>База данных должна быть инициализирована прежде, чем MySQL может быть
запущен. Для дополнительной информации о процессе инициализации см.
<a href="#data-directory-initialization-mysqld">раздел 2.9.1.1
</a>.</p>

<p>Чтобы запустить сервер, введите эту команду:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld" --console
</pre>

<p>Для сервера, который включает <code>InnoDB</code>, Вы должны видеть
сообщения, подобные этим, после запуска (пути и размеры могут отличаться):
<pre>
InnoDB: The first specified datafile c:\ibdata\ibdata1 did not exist:
InnoDB: a new database to be created!
InnoDB: Setting file c:\ibdata\ibdata1 size to 209715200
InnoDB: Database physically writes the file full: wait...
InnoDB: Log file c:\iblogs\ib_logfile0 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile0 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile1 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile1 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile2 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile2 size to 31457280
InnoDB: Doublewrite buffer not found: creating new
InnoDB: Doublewrite buffer created
InnoDB: creating foreign key constraint system tables
InnoDB: foreign key constraint system tables created
011024 10:58:25 InnoDB: Started
</pre>

<p>Когда сервер заканчивает свою последовательность запуска, Вы должны видеть
что-то вроде этого, что указывает, что сервер готов
обслужить соединения клиента:
<pre>
mysqld: ready for connections
Version: '8.0.1'socket: ''port: 3306
</pre>

<p>Сервер продолжает писать на консоль диагностический вывод, который
производит. Вы можете открыть новую консоль, в которой можно
выполнить программы клиента.</p>

<p>Если Вы опускаете опцию <a href="server.htm#option_mysqld_console"><code>
--console</code></a>, сервер пишет диагностический вывод в журнал ошибок в
каталоге данных (по умолчанию это
<code>C:\Program Files\MySQL\MySQL Server 8.0\data</code>). Журнал ошибок это
файл с расширением <code>.err</code>, может быть установлен, используя опцию
<a href="server.htm#option_mysqld_log-error"><code>--log-error</code></a>.
</p>

<p>Первоначально у пользвателя <code>root</code> в таблицах прав доступа
MySQL нет никакого пароля. После запуска сервера Вы должны настроить пароль
для этого, использя инструкции в
<a href="#default-privileges">разделе 2.9.4</a>.</p>

<h4><a name="windows-start-command-line"></a>2.3.5.6.
Запуск MySQL из командной строки Windows</h4>
<p>Сервер MySQL может быть запущен вручную из командной строки.
Это может быть сделано в любой версии Windows.</p>

<p>GUI <a href="#windows-notifier">MySQL Notifier</a>
может также использоваться, чтобы
запустить/остановить/перезапустить сервер MySQL.</p>

<p>Чтобы запустить <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a> из командной строки, Вы должны запустить консоль (или
<span><span>DOS window</span></span>) и ввести эту команду:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld"
</pre>

<p>Путь к <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a> может измениться в зависимости от местоположения установки
MySQL в Вашей системе.</p>

<p>Вы можете остановить сервер MySQL, выполняя эту команду:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqladmin" -u root shutdown
</pre>

<p>Если у учетной записи пользователя MySQL <code>root</code>
есть пароль, Вы должны вызвать <a href="programs.htm#mysqladmin"><span>
<strong>mysqladmin</strong></span></a> с опцией <code>-p</code> и
ввести пароль, когда он запрошен.</p>

<p>Эта команда вызывает административную утилиту MySQL
<a href="programs.htm#mysqladmin"><span><strong>mysqladmin</strong></span>
</a>, чтобы соединиться с сервером и сказать ему завершать работу.
Команда соединяется как пользователь MySQL <code>root</code>, который
является по умолчанию административной учетной записью в системе MySQL.</p>

<p>Пользователи в системе MySQL совершенно независимы от любых
пользователей Microsoft Windows.</p>
<p>Если <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a> не запускается, проверьте журнал ошибок, чтобы видеть, написал ли сервер
какие-либо сообщения там, чтобы указать на причину проблемы. По умолчанию
журнал ошибок расположен в каталоге <code>C:\Program Files\MySQL\MySQL Server
8.0\data</code>. Это файл с суффиксом <code>.err</code>,
или может быть определен в опции
<a href="server.htm#option_mysqld_log-error"><code>--log-error</code></a>.
Альтернативно, Вы можете попытаться запустить сервер с опцией
<a href="server.htm#option_mysqld_console"><code>--console</code></a>,
в этом случае, сервер может вывести на экран немного полезной информации,
которая поможет решить проблему.</p>

<p>Последняя опция должна запустить <a href="programs.htm#mysqld"><span>
<strong>mysqld</strong></span></a> с опциями
<a href="server.htm#option_mysqld_standalone"><code>--standalone</code></a> и
<a href="server.htm#option_mysqld_debug"><code>--debug</code></a>.
В этом случае <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> пишет файл системного журнала <code>C:\mysqld.trace</code>,
который должен содержать причину, почему <a href="programs.htm#mysqld"><span>
<strong>mysqld</strong></span></a> не запускается. См.
<a href="extend.htm#dbug-package">раздел 26.5.3</a>.</p>

<p>Используйте <a href="programs.htm#mysqld"><span>
<strong>mysqld --verbose --help</strong></span></a>, чтобы
вывести на экран все опции <a href="programs.htm#mysqld"><span>
<strong>mysqld</strong></span></a>.</p>

<h4><a name="mysql-installation-windows-path"></a>2.3.5.7.
Настройка PATH для инструментов MySQL</h4>
<p>Вы должны быть внимательны, редактируя Вашу системную переменную
<code>PATH</code>: случайное удаление или модификация любой части
существующего значения <code>PATH</code> может привести к серьезным
проблемам или даже непригодной системе.</p>

<p>Чтобы облегчить вызов MySQL, Вы можете добавить путь к каталогу MySQL
<code>bin</code> к Вашей системной переменной <code>PATH</code>:</p>
<ul><li><p>На рабочем столе, кликните правой кнопкой мыши по <span>My
Computer</span> и выберите <span>Properties</span>.</li>

<li>Затем выберите вкладку <span>Advanced</span> из меню
<span>System Properties</span> и нажмите кнопку
<span>Environment Variables</span>.</li>

<li>В списке <span>System Variables</span> выберите
<span>Path</span> и кликните на <span>Edit</span>.
Диалог <span>Edit System Variable</span> должен появиться.</li>

<li>Поместите свой курсор в конец текста, появляющегося в строке, отмеченной
<span>Variable Value</span> (используйте клавишу
<span><strong>End</strong></span>, чтобы гарантировать, что Ваш курсор
расположен в самом конце текста в этом пространстве). Тогда введите имя
полного пути Вашего каталога MySQL <code>bin</code> (например,
<code>C:\Program Files\MySQL\MySQL Server 8.0\bin</code>).</p>

<p>Должна быть точка с запятой, отделяющая этот путь от любых значений,
существующих в этой области.</p>
<p>Закройте этот диалог, и каждый диалог в очереди, нажимая
<span>OK</span>, пока все диалоги, которые были открыты, не закроются. Новое
значение <code>PATH</code> должно теперь быть доступным любой новой команде,
разрешая Вам вызвать любую программу MySQL, вводя ее имя при подсказке
DOS из любого каталога в системе, не имея необходимость задавать путь. Это
включает серверы, клиент <a href="programs.htm#mysql"><span><strong>mysql
</strong></span></a> и все утилиты, например,
utilities such as <a href="programs.htm#mysqladmin"><span><strong>mysqladmin
</strong></span></a> и <a href="programs.htm#mysqldump"><span><strong>
mysqldump</strong></span></a>.</p></li></ul>

<p>Вы не должны добавить каталог MySQL <code>bin</code> к переменной
Windows <code>PATH</code>, если Вы выполняете много серверов MySQL на той
же самой машине.</p>

<h4><a name="windows-start-service"></a>2.3.5.8.
Запуск MySQL как сервис Windows</h4>
<p>В Windows рекомендуемый способ выполнить MySQL состоит в том, чтобы
установить это как службу Windows, так, чтобы MySQL запустился и остановился
автоматически, когда Windows запускается и останавливается. Сервером MySQL,
установленным как служба, можно также управлять из командной строки,
используя команды <span><strong>NET</strong></span>, или графической утилитой
<span><strong>Services</strong></span>. Вообще, чтобы установить MySQL как
службу Windows Вы должны быть зарегистрированы, используя учетную запись,
которая имеет права администратора.</p>

<p>GUI <a href="#windows-notifier">MySQL Notifier</a>
может также использоваться, чтобы контролировать состояние службы MySQL.</p>
<p>Утилита <span><strong>Services</strong></span> (Windows
<span><strong>Service Control Manager</strong></span>)
может быть найдена в Windows Control Panel (в <span>Administrative
Tools</span> в Windows Vista и Server 2003).
Чтобы избежать конфликтов, желательно закрыть утилиту
<span><strong>Services</strong></span>, выполняя установку сервера или
операции удаления из командной строки.</p>

<h5><a name="idm139965427086400"></a>Установка службы</h5>
<p>Прежде, чем установить MySQL как службу Windows, Вы должны сначала
остановить текущий сервер следующей командой:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqladmin"
        -u root shutdown
</pre>

<p>Установите сервер как службу, используя эту команду:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld" --install
</pre>

<p>Команда установки службы не запускает сервер. Инструкции для этого даны
позже в этом разделе.</p>

<p>Следующие дополнительные параметры могут
использоваться, устанавливая службу:</p>
<ul><li><p>Вы можете немедленно определить имя службы после опции
<code>--install</code>. По умолчанию <code>MySQL</code>.</li>

<li>Если имя службы дано, оно может сопровождаться единственной опцией.
В соответствии с соглашением, это должна быть
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file=
<em><code>file_name</code></em></code></a>, чтобы определить название файла
опций, из которого сервер должен считать опции, когда запускается.</p>

<p>Использование единственной опции кроме
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a> возможно, но не рекомендуется.
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a> более гибко, потому что это позволяет Вам определить много опций
запуска для сервера, размещая их в названный файл опции.</li>

<li>Вы можете также определить <code>--local-service</code>
после имени службы. Это заставляет сервер выполнять использование учетной
записи Windows <code>LocalService</code>, которая ограничивает системные
привилегии. Если оба параметра
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a> и <code>--local-service</code>
даны после имени службы, они могут быть в любом порядке.</p></li></ul>

<p>Для сервера MySQL, который установлен как служба Windows, следующие
правила определяют имя службы и файлы опции, которые использует сервер:</p>
<ul><li><p>Если команда установки службы не определяет имени службы или
задает имя службы по умолчанию (<code>MySQL</code>) после опции
<code>--install</code>, сервер использует название службы <code>MySQL</code>
и читает опции из группы <code>[mysqld]</code> в стандартных файлах опций.
</li>

<li>Если команда установки службы определяет имя службы не
<code>MySQL</code> после опции <code>--install</code>,
сервер использует то имя службы. Это читает опции из группы
<code>[mysqld]</code> и группы, у которой есть то же самое имя, как у службы,
в стандартных файлах опций. Это позволяет Вам использовать группу
<code>[mysqld]</code> для опций, которые должны использоваться всеми службами
MySQL, и группу опций с названием службы для использования сервером,
установленным с тем именем службы.</li>

<li>Если команда установки службы определяет
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a> после имени службы, сервер читает опции тем же самым путем, как
описано в предыдущем пункте, за исключением того, что это читает опции только
из названного файла и игнорирует стандартные файлы опций.</p></li></ul>

<p>Как более сложный пример, рассмотрите следующую команду:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld"
        --install MySQL --defaults-file=C:\my-opts.cnf
</pre>

<p>Здесь, имя службы по умолчанию (<code>MySQL</code>) дано после опции
<code>--install</code>. Если нет
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a>, эта команда будет заставлять сервер читать группу
<code>[mysqld]</code> стандартных файлов опции. Однако, потому что задана
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a>, опции читаются из группы
<code>[mysqld]</code> только названного файла.</p>

<p>В Windows, если сервер запущен с опциями
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a> и <a href="server.htm#option_mysqld_install"><code>--install
</code></a>, <a href="server.htm#option_mysqld_install"><code>--install
</code></a> должна быть первой. Иначе <code>mysqld.exe</code>
попытается запустить сервер MySQL.</p>

<p>Вы можете также определить опции, как Start parameters в утилите Windows
<span><strong>Services</strong></span> прежде, чем Вы запустите службу MySQL.
</p>

<h5><a name="idm139965427013168"></a>Запуск службы</h5>
<p>Как только сервер MySQL был установлен как служба, Windows запускает
службу автоматически всякий раз, когда Windows запускается.
Служба также может быть немедленно запущена из утилиты
<span><strong>Services</strong></span> или командой <span><strong>NET
START MySQL</strong></span>. Команда <span><strong>NET</strong></span>
не является чувствительной к регистру.</p>

<p>Когда выполнен как служба, <a href="programs.htm#mysqld"><span><strong>
mysqld</strong></span></a> не имеет никакого доступа к консоли, таким
образом, никакие сообщения не могут быть замечены там. Если
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
не запускается, проверьте журнал ошибок, чтобы видеть, написал ли сервер
какие-либо сообщения там, чтобы указать на причину проблемы. Журнал ошибок
расположен в каталоге данных MySQL (например,
<code>C:\Program Files\MySQL\MySQL Server 8.0\data</code>).
Это файл с суффиксом <code>.err</code>.</p>

<p>Когда сервер MySQL был установлен как служба, и служба работает, Windows
останавливает службу автоматически, когда Windows закрывается. Сервер также
может быть остановлен вручную при использовании утилиты
<code>Services</code>, командой <span><strong>NET STOP MySQL</strong></span>
или <a href="programs.htm#mysqladmin"><span><strong>mysqladmin shutdown
</strong></span></a>.</p>

<p>У Вас также есть выбор установки сервера как ручной службы, если Вы не
хотите, чтобы служба была запущена автоматически во время процесса загрузки.
Чтобы сделать это, используйте опцию
<code>--install-manual</code> до опции <code>--install</code>:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld" --install-manual
</pre>

<h5><a name="idm139965426998736"></a>Удаление службы</h5>
<p>Чтобы удалить сервер, который установлен как служба, сначала остановите
его, если это работает, выполняя <span><strong>NET STOP MySQL</strong>
</span>. Затем используйте опцию <a href="server.htm#option_mysqld_remove">
<code>--remove</code></a>:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld" --remove
</pre>

<p>Если <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a> не работает как служба, Вы можете запустить его из командной строки.
Для инструкций см.
<a href="#windows-start-command-line">раздел 2.3.5.6</a>.</p>

<p>Если Вы сталкиваетесь с трудностями во время установки, см.
<a href="#windows-troubleshooting">раздел 2.3.6</a>.</p>
<p>Для получения дополнительной информации об остановке или удалении службы
Windows MySQL см. <a href="server.htm#multiple-windows-services">раздел
6.7.2.2</a>.</p>

<h4><a name="windows-testing"></a>2.3.5.9. Тестирование установки MySQL</h4>
<p>Вы можете проверить, работает ли сервер MySQL, выполняя какую-либо
из следующих команд:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqlshow"
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqlshow" -u root mysql
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqladmin" version status proc
C:\&gt; "C:\Program Files\MySQL\MySQL Server 8.0\bin\mysql" test
</pre>

<p>Если <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a> не спешит отвечать на соединения TCP/IP из программ клиента, есть,
вероятно, проблема с Вашим DNS. В этом случае запустите
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
с опцией <a href="server.htm#option_mysqld_skip-name-resolve"><code>
--skip-name-resolve</code></a> и используйте <code>localhost</code>
и IP-адреса в столбце <code>Host</code> таблиц прав доступа MySQL.
Убедитесь, что существует учетная запись, которая определяет IP-адрес, или Вы
не сможете соединиться.</p>

<p>Вы можете вынудить клиента MySQL использовать соединение именованного
канала, а не TCP/IP, определяя
<a href="programs.htm#option_general_pipe"><code>--pipe</code></a> или
<a href="programs.htm#option_general_protocol"><code>--protocol=PIPE</code>
</a> или указывая в качестве имени хоста точку (<code>.</code>). Используйте
опцию <a href="programs.htm#option_general_socket"><code>--socket</code></a>,
чтобы определить название канала, если Вы не хотите использовать имя
канала по умолчанию.</p>

<p>Если Вы установили пароль для <code>root</code>, удалили
анонимную учетную запись или создали новую учетную запись пользователя, то
чтобы соединиться с сервером MySQL, Вы должны использовать соответствующие
опции <code>-u</code> и <code>-p</code> с командами, показанными ранее. См.
<a href="programs.htm#connecting">раздел 5.2.2</a>.</p>

<p>Подробности о <a href="programs.htm#mysqlshow"><span><strong>mysqlshow
</strong></span></a> в <a href="programs.htm#mysqlshow">разделе 5.5.7</a>.
</p>

<h3><a name="windows-troubleshooting"></a>2.3.6.
Поиск неисправностей в Microsoft Windows MySQL Server</h3>
<p>Устанавливая и выполняя MySQL впервые, Вы можете столкнуться с
определенными ошибками, которые препятствуют тому, чтобы сервер MySQL
запустился. Этот раздел помогает Вам диагностировать и исправить некоторые
из этих ошибок.</p>

<p>Вашим первым ресурсом, расследуя проблемы сервера, является
<a href="glossary.htm#glos_error_log">журнал ошибок</a>. Сервер MySQL
использует журнал ошибок, чтобы сделать запись информации, относящейся к
ошибке, которая препятствует тому, чтобы сервер запустился. Журнал ошибок
расположен в <a href="glossary.htm#glos_data_directory">каталоге данных</a>,
определенном в Вашем файле <code>my.ini</code>. Местоположение каталога
данных по умолчанию <code>C:\Program Files\MySQL\MySQL Server 8.0\data</code>
или <code>C:\ProgramData\Mysql</code> в Windows 7 и Windows Server 2008.
Каталог <code>C:\ProgramData</code> по умолчанию скрыт. Вы должны изменить
свои опции папки, чтобы видеть каталог и содержание. Для получения
дополнительной информации о журнале ошибок и понимании контента, см.
<a href="server.htm#error-log">раздел 6.4.2</a>.</p>

<p>Для информации относительно возможных ошибок, также консультируйтесь с
сообщениями в консоли, выведенными на экран, когда служба MySQL запускается.
Используйте команду <span><strong>NET START MySQL</strong></span> из
командной строки после установки
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
как службы, чтобы видеть любые сообщения об ошибках при запуске сервера MySQL
как службы. См. <a href="#windows-start-service">раздел 2.3.5.8
</a>.</p>

<p>Следующие примеры показывают другие частые сообщения об
ошибках, с которыми Вы могли бы столкнуться, устанавливая MySQL и
запуская сервер впервые:</p>

<ul><li><p>Если сервер MySQL не может найти базу данных привилегий
<code>mysql</code> или другие критические файлы, это выводит на
экран эти сообщения:
<pre>
System error 1067 has occurred.
Fatal error: Can't open and lock privilege tables:
Table 'mysql.user' doesn't exist
</pre>

<p>Эти сообщения часто происходят, когда MySQL или каталоги данных
установлены в иных местоположениях чем значения по умолчанию
(<code>C:\Program Files\MySQL\MySQL Server 8.0</code> и <code>C:\Program
Files\MySQL\MySQL Server 8.0\data</code>, соответственно).</p>

<p>Эта ситуация может произойти, когда MySQL обновлен и установлен в
новое место, но конфигурационный файл не обновлен, чтобы отразить новое
местоположение. Кроме того, старые и новые конфигурационные файлы могли бы
находиться в противоречии. Убедитесь, что удалили или переименовали любые
старые конфигурационные файлы, обновляя MySQL.</p>

<p>Если Вы установили MySQL не в каталог
<code>C:\Program Files\MySQL\MySQL Server 8.0</code>,
гарантируйте, что сервер MySQL знает об этом с помощью конфигурации
(<code>my.ini</code>). Поместите файл <code>my.ini</code> в каталог Windows,
обычно это <code>C:\WINDOWS</code>. Определить его точное местоположение
можно из значения <code>WINDIR</code>:
<pre>
C:\&gt; echo %WINDIR%
</pre>

<p>Вы можете создать или изменить файл опций любым текстовым редактором,
например, Notepad. Например, если MySQL установлен в
<code>E:\mysql</code> и каталог данных <code>D:\MySQLdata</code>,
Вы можете создать файл опций и настроить раздел <code>[mysqld]</code>, чтобы
определить значения для опций <code>basedir</code> и <code>datadir</code>:
<pre>
[mysqld]
# set basedir to your installation path
basedir=E:/mysql
# set datadir to the location of your data directory
datadir=D:/MySQLdata
</pre>

<p>Пути Microsoft Windows определены в файлах опции, используя прямые, а не
обратные слэши. Если Вы действительно используете обратные слэши, удвойте их:
<pre>
[mysqld]
# set basedir to your installation path
basedir=C:\\Program Files\\MySQL\\MySQL Server 8.0
# set datadir to the location of your data directory
datadir=D:\\MySQLdata
</pre>

<p>Если Вы изменяете <code>datadir</code> в своем конфигурационном файле
MySQL, Вы должны переместить содержание существующего каталога данных MySQL
прежде, чем перезапустить сервер MySQL.</p></li>

<li>Если Вы повторно устанавливаете или обновляете MySQL без остановки и
удаления существующей службы MySQL и устанавливаете MySQL, используя
MySQL Installer, Вы могли бы видеть эту ошибку:
<pre>
Error: Cannot create Windows service for MySql. Error: 0
</pre>
<p>Это происходит, когда мастер конфигурации пытается установить службу и
находит существующую службу с тем же самым именем.</p>

<p>Одно решение этой проблемы состоит в том, чтобы выбрать имя службы не
<code>mysql</code>, используя мастер конфигурации. Это позволяет новой службе
быть установленной правильно, но оставляет устаревшую службу. Хотя это
безопасно, лучше удалять старые службы, которые больше
не находятся в использовании.</p>

<p>Чтобы удалить старую службу <code>mysql</code>, выполните следующую
команду как пользователя с административными привилегиями:
<pre>
C:\&gt; sc delete mysql
[SC] DeleteService SUCCESS
</pre>

<p>Если утилита <code>sc</code> не доступна для Вашей версии Windows,
загрузите <code>delsrv</code> с
<a href="../../../www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp"
target="_top">
http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp</a>
и примените синтаксис <code>delsrv mysql</code>.</p></li></ul>

<h3><a name="windows-postinstallation"></a>2.3.7.
Постпроцессы установки в Windows</h3>
<p>Есть инструменты GUI, которые выполняют большинство задач, описанных в
этом разделе, включая:</p>

<ul><li><p><a href="#mysql-installer">MySQL Installer</a>:
Используемый, чтобы установить и обновить продукты MySQL.</li>
<li><a href="workbench.html">MySQL Workbench</a>: Управляет сервером MySQL и
редактирует запросы SQL.</li>

<li><a href="#windows-notifier">MySQL Notifier</a>:
Запускает, останавливает или перезапускает сервер MySQL,
контролирует его состояние.</li>

<li><a href="../../../dev.mysql.com/doc/mysql-for-excel/en/default.htm"
target="_top">MySQL for Excel</a>: Для редактирования данных
MySQL из Microsoft Excel.</p></li></ul>

<p>В случае необходимости, инициализируйте каталог данных и составьте таблицы
привилегий MySQL. Операции установки в Windows, выполненные MySQL Installer,
инициализируют каталог данных автоматически. Для установки из Zip-пакета
Вы можете инициализировать каталог данных как описано в
<a href="#data-directory-initialization-mysqld">разделе 2.9.1.1
</a>.</p>

<p>Относительно паролей, если Вы устанавливали MySQL, используя MySQL
Installer, Вы, возможно, уже назначили пароль пользователю
<code>root</code> (см. <a href="#mysql-installer">раздел 2.3.3
</a>). Иначе, используйте процедуру назначения пароля, данную в
<a href="#default-privileges">разделе 2.9.4</a>.</p>

<p>Прежде, чем назначить пароли, Вы могли бы попытаться выполнить некоторые
программы клиента, чтобы удостовериться, что Вы можете соединиться с сервером
и что он работает должным образом. Удостоверьтесь, что сервер работает (см.
<a href="#windows-server-first-start">
раздел 2.3.5.5</a>). Вы можете также настроить службу MySQL, которая работает
автоматически, когда Windows запускается (см.
<a href="#windows-start-service">раздел 2.3.5.8</a>).</p>

<p>Эти инструкции предполагают, что Ваше текущее местоположение
каталог установки MySQL и что есть подкаталог <code>bin</code>, содержащий
программы MySQL, используемые здесь. Если это не так,
скорректируйте пути команды соответственно.</p>

<p>Если Вы устанавливали MySQL через MySQL Installer (см.
<a href="#mysql-installer">раздел 2.3.3</a>), каталог установки
по умолчанию <code>C:\Program Files\MySQL\MySQL Server 8.0</code>:
<pre>
C:\&gt; cd "C:\Program Files\MySQL\MySQL Server 8.0"
</pre>

<p>Общее местоположение установки для установки из Zip-архива
<code>C:\mysql</code>:
<pre>
C:\&gt; cd C:\mysql
</pre>

<p>Альтернативно, добавьте каталог <code>bin</code> в переменную
<code>PATH</code> системы. Это позволяет Вашему интерпретатору команд найти
программы MySQL должным образом, так, чтобы Вы могли выполнить программу,
вводя только ее имя. См.
<a href="#mysql-installation-windows-path">раздел 2.3.5.7</a>.</p>

<p>Выполните следующие команды, чтобы проверить, что Вы можете получить
информацию от сервера. Вывод должен быть подобным показанному здесь.</p>
<p>Используйте <a href="programs.htm#mysqlshow"><span><strong>mysqlshow
</strong></span></a>, чтобы видеть, какие базы данных существуют:
<pre>
C:\&gt; bin\mysqlshow
+--------------------+
| Databases          |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
</pre>
<p>Список установленных баз данных может измениться, но будет всегда включать
минимум <code>mysql</code> и <code>information_schema</code>.</p>

<p>Предыдущая команда (и команды для других программ MySQL, таких как
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a>),
возможно, не работают, если правильная учетная запись MySQL не существует.
Например, программа может потерпеть неудачу с ошибкой, или Вы не можете быть
в состоянии рассмотреть все базы данных. Если Вы устанавливали MySQL через
MySQL Installer, пользователь <code>root</code> будет создан автоматически с
паролем, который Вы задали. В этом случае Вы должны использовать опции
<code>-u root</code> и <code>-p</code>. Вы должны использовать эти опции,
если Вы уже обеспечили начальные учетные записи MySQL. С <code>-p</code>
программа клиента запрашивает пароль для <code>root</code>. Например:
<pre>
C:\&gt; bin\mysqlshow -u root -p
Enter password: <em><code>(здесь вводится пароль)</code></em>
+--------------------+
| Databases          |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
</pre>

<p>Если Вы определяете имя базы данных
<a href="programs.htm#mysqlshow"><span><strong>mysqlshow</strong></span></a>,
выводит на экран список таблиц в пределах базы данных:
<pre>
C:\&gt; bin\mysqlshow mysql
Database: mysql
+---------------------------+
| Tables                    |
+---------------------------+
| columns_priv              |
| db                        |
| engine_cost               |
| event                     |
| func                      |
| general_log               |
| gtid_executed             |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| innodb_index_stats        |
| innodb_table_stats        |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| proxies_priv              |
| server_cost               |
| servers                   |
| slave_master_info         |
| slave_relay_log_info      |
| slave_worker_info         |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+
</pre>

<p>Используйте <a href="programs.htm#mysql"><span><strong>mysql</strong>
</span></a>, чтобы выбрать информацию из таблицы в
базе данных <code>mysql</code>:
<pre>
C:\&gt; bin\mysql -e "SELECT User, Host, plugin FROM mysql.user" mysql
+------+-----------+-----------------------+
| User | Host      | plugin                |
+------+-----------+-----------------------+
| root | localhost | mysql_native_password |
+------+-----------+-----------------------+
</pre>

<h3><a name="windows-upgrading"></a>2.3.8. Обновление MySQL в Windows</h3>
<p>Чтобы обновить MySQL в Windows, следуйте этим шагам:</p>
<ol type="1"><li><p>Изучите <a href="#upgrading">раздел 2.10.1
</a> для дополнительной информации об обновлении MySQL, которая не является
определенной для Windows.</li>

<li>Всегда резервируйте свою текущую установку MySQL прежде, чем выполнить
обновление. См. <a href="backup.htm#backup-methods">раздел 8.2</a>.</li>
<li>Загрузите последний дистрибутив Windows MySQL с
<a href="../../../dev.mysql.com/downloads/default.htm" target="_top">
http://dev.mysql.com/downloads/</a>.</li>

<li>Прежде, чем обновить MySQL, остановите сервер. Если сервер установлен как
служба, остановите службу следующей командой:
<pre>
C:\&gt; NET STOP MySQL
</pre>

<p>Если Вы не выполняете сервер MySQL как службу, используйте
<a href="programs.htm#mysqladmin"><span><strong>mysqladmin</strong></span>
</a>, чтобы остановить его. Например, прежде, чем обновиться от MySQL 5.7 к
8.0, используйте <a href="programs.htm#mysqladmin"><span><strong>mysqladmin
</strong></span></a> из MySQL 5.7:
<pre>
C:\&gt; "C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqladmin" -u root shutdown
</pre></li>

<li><p>Прежде, чем обновить до MySQL 8.0 от версии ниже 4.1.5, или
от версии MySQL, установленной из Zip-архива, к версии MySQL, установленной
через Installation Wizard, Вы должны сначала вручную удалить предыдущую
установку и службу MySQL (если сервер установлен как служба).</p>

<p>Чтобы удалить службу MySQL, используйте следующую команду:
<pre>
C:\&gt; C:\mysql\bin\mysqld --remove
</pre>

<p><span><strong>Если Вы не удаляете существующую службу, мастер установки
MySQL может быть не в состоянии должным образом установить
новую службу MySQL.</strong></span></li>
<li>Если Вы используете MySQL Installer, запустите его как описано в
<a href="#mysql-installer">разделе 2.3.3</a>.</li>

<li>Если Вы обновляете MySQL из Zip-архива, распакуйте архив. Вы можете
перезаписать свою существующую установку MySQL (обычно располагается в
<code>C:\mysql</code>) или установить это в иной каталог, такой как
<code>C:\mysql5</code>. Перезапись существующей установки рекомендуется.
Однако, для обновлений (в противоположность установке впервые), Вы должны
удалить каталог данных из своей существующей установки MySQL, чтобы не
заменять Ваши текущие файлы с данными. Чтобы сделать так,
следуйте этим шагам:</p>

<ol type="a"><li><p>Разархивируйте архив в некотором местоположении кроме
Вашей текущей установки MySQL.</li>
<li>Удалите каталог данных.</li>
<li>Повторно создайте архив.</li>
<li>Разархивируйте измененный архив в корень
своей существующей установки.</p></li></ol>

<p>Или:</p>
<ol type="a"><li><p>Разархивируйте архив в некотором местоположении кроме
Вашей текущей установки MySQL.</li>
<li>Удалите каталог данных.</li>
<li>Переместите каталог данных от текущей установки MySQL
на место только что удаленного каталога данных.</li>

<li>Удалите текущую установку MySQL.</li>
<li>Переместите разархивированную установку на место только
что удаленной установки.</p></li></ol></li>

<li><p>Если Вы выполняли MySQL как службу Windows, и Вы должны были удалить
службу ранее в этой процедуре, надо повторно установить службу (см.
<a href="#windows-start-service">раздел 2.3.5.8</a>).</li>

<li>Перезапустите сервер. Например, используйте <span><strong>NET START
MySQL</strong></span>, если Вы выполняете MySQL как службу, или вызовите
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
напрямую в противном случае.</li>

<li>Как Администратор, выполните <a href="programs.htm#mysql-upgrade"><span>
<strong>mysql_upgrade</strong></span></a>, чтобы проверить Ваши таблицы,
попытаться восстановить их в случае необходимости, и обновить Ваши таблицы
привилегий, если они изменились так, чтобы Вы могли использовать в своих
интересах любые новые способности. См.
<a href="programs.htm#mysql-upgrade">раздел 5.4.5</a>.</li>

<li>Если Вы сталкиваетесь с ошибками, см.
<a href="#windows-troubleshooting">раздел 2.3.6</a>.
</p></li></ol>

<h2><a name="osx-installation"></a>2.4. Установка MySQL под OS X</h2>
<p>Для списка версий OS X, которые поддерживает сервер MySQL, см.
<a href="../../../www.mysql.com/support/supportedplatforms/database.html"
target="_top">http://www.mysql.com/support/supportedplatforms/database.html
</a>.</p>

<p>MySQL for OS X доступен во многих различных формах:</p>
<ul><li><p>Native Package Installer, который использует родной OS X
установщик (DMG), чтобы провести Вас через установку MySQL. Для получения
дополнительной информации см. <a href="#osx-installation-pkg">
раздел 2.4.2</a>. Вы можете использовать установщик пакета с OS X. У
пользователя, которого Вы используете, чтобы выполнить установку, должны
быть привилегии администратора.</li>

<li>Сжатый архив TAR, который использует файл, упакованнвый с помощью
Unix <span><strong>tar</strong></span> и <span><strong>gzip</strong></span>.
Чтобы использовать этот метод, Вы должны будете открыть окно
<span><strong>Terminal</strong></span>. Вы не нуждаетесь в привилегиях
администратора, используя этот метод, поэтому Вы можете установить сервер
MySQL где угодно, используя этот метод. Для получения дополнительной
информации об использовании этого метода Вы можете использовать общие
инструкции по архивам в <a href="#binary-installation">разделе 2.2
</a>.</p>

<p>В дополнение к основной установке Package Installer, обратите внимание на
разделы <a href="#osx-installation-launchd">2.4.3</a> и
<a href="#osx-installation-prefpane">2.4.4</a>,
оба из которых упрощают управление Вашей установкой.</p></li></ul>

<h3><a name="osx-installation-notes"></a>2.4.1. Общие сведения об установке
MySQL под OS X</h3>
<p>Вы должны помнить следующие проблемы и примечания:</p>

<ul><li><p>Демон launchd установлен, и он включает параметры конфигурации
MySQL. Рассмотрите редактирование этого если нужно, см. документацию ниже для
дополнительной информации. Кроме того, в macOS 10.10 удалена поддержка
элемента запуска в пользу демонов launchd. Дополнительная привилегированная
область MySQL под macOS <span>System Preferences</span> использует launchd.
</li>

<li>Вы, возможно, нуждаетесь (или хотите) создать определенного пользователя
<code>mysql</code>, чтобы иметь каталог MySQL и данные. Вы можете сделать это
через <span><strong>Directory Utility</strong></span>, и
пользователь <code>mysql</code> должен уже существовать.
Для использования в однопользовательском режиме запись для
<code>_mysql</code> (отметьте приставку подчеркивания) должен уже
существовать в пределах системного файла <code>/etc/passwd</code>.</li>

<li>Поскольку установщик пакета MySQL устанавливает содержание MySQL в
каталог, определенный версией и платформой Вы можете использовать это, чтобы
обновить и мигрировать Вашу базу данных между версиями.
Вы будете нуждаться в копии каталога <code>data</code> из старойверсии в
новой или альтернативно определять значение <code>datadir</code>, чтобы
установить местоположение каталога данных. По умолчанию, каталоги MySQL
установлены под <code>/usr/local/</code>.</li>

<li>Вы могли бы хотеть добавить псевдонимы к файлу ресурса своей оболочки,
чтобы облегчить доступ к обычно используемым программам, таким как
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a> и
<a href="programs.htm#mysqladmin"><span><strong>mysqladmin</strong></span>
</a> из командной строки. Синтаксис для <span><strong>bash</strong></span>:
<pre>
alias mysql=/usr/local/mysql/bin/mysql
alias mysqladmin=/usr/local/mysql/bin/mysqladmin
</pre>

<p>Для <span><strong>tcsh</strong></span> надо:
<pre>
alias mysql /usr/local/mysql/bin/mysql
alias mysqladmin /usr/local/mysql/bin/mysqladmin
</pre>

<p>Еще лучше добавить <code>/usr/local/mysql/bin</code> к переменной
окружения <code>PATH</code>. Вы можете сделать это, изменяя соответствующий
файл запуска для Вашей оболочки. Для получения дополнительной информации см.
<a href="programs.htm#invoking-programs">раздел 5.2.1</a>.</li>

<li>После того, как Вы скопировали файлы базы данных MySQL с предыдущей
установки и успешно запустили новый сервер, Вы должны полагать, что удаление
старых файлов установки сэкономит дисковое пространство. Дополнительно Вы
должны также удалить более старые версии каталогов Package Receipt,
расположенных в <code>/Library/Receipts/mysql-<em><code>VERSION</code>
</em>.pkg</code>.</li>
<li>До OS X 10.7 сервер MySQL был связан с OS X Server.</p></li></ul>

<h3><a name="osx-installation-pkg"></a>2.4.2. Установка MySQL под OS X,
используя родные пакеты</h3>
<p>Пакет расположен в файле образа диска (<code>.dmg</code>), так что Вы
сначала должны смонтировать двойным щелчком его значок в Finder.
Это должно смонтировать образ и вывести на экран его содержание.</p>

<p>Перед продолжением установки надо убедиться, что остановили все рабочие
копии сервера MySQL при использовании MySQL Manager Application (в OS X
Server), preference pane или
<a href="programs.htm#mysqladmin"><span><strong>mysqladmin shutdown</strong>
</span></a>.</p>

<p>Чтобы поставить MySQL, используя установщик пакета:</p>
<ol type="1"><li><p>Загрузите образ диска (<code>.dmg</code>).
Версия сообщества доступна на
<a href="../../../dev.mysql.com/downloads/mysql/default.htm" target="_top">
http://dev.mysql.com/downloads/mysql/</a>), который содержит установщик
пакета MySQL. Двойным щелчком по файлу смонтируйте образ диска, чтобы
видеть его содержание.</p>
<a name="mac-installer-dmg-contents"></a>
<p><b>Рис. 2.41. MySQL Package Installer: содержание DMG</b></p>
<img src="dmg-con.png" width="428" height="382"></li>

<li><p>Двойной щелкните пакет установщика MySQL. Это названо
согласно версии MySQL, который Вы загрузили. Например, если Вы загрузили
сервер MySQL 8.0.1, кликать надо по
<code>mysql-8.0.1-osx-<em><code>10.11-x86_64</code></em>.pkg</code>.</li>

<li>Вам покажут вводный диалог установщика. Щелкните <span>Continue</span>.
</p>
<a name="mac-installer-dmg-introduction"></a>
<p><b>Рис. 2.42. MySQL Package Installer: введение</b></p>
<img src="dmg-int.png" width="732" height="550"></li>

<li><p>Если Вы загрузили версию сообщества MySQL, Вам покажут копию
соответствующей GNU General Public License. Кликните <span>Continue</span>
и <span>Agree</span> для продолжения.</li>

<li>На странице <span>Installation Type</span> Вы можете щелкнуть
<span>Install</span>, чтобы выполнить мастер установки, используя все
значения по умолчанию, щелкнуть <span>Customize</span>, чтобы изменить, какие
компоненты установить (сервер MySQL, Preference Pane, Launchd Support, по
умолчанию все) или кликнуть по <span>Change Installation Location</span>,
чтобы изменить тип установки, при наличии.</p>

<a name="mac-installer-installation-type-main"></a>
<p><b>Рис. 2.43. MySQL Package Installer: Тип установки</b></p>
<img src="instype.png" width="732" height="550">

<a name="mac-installer-installation-destination-select"></a>
<p><b>Рис. 2.44. MySQL Package Installer: выбор
места назначения (местоположения установки)</b></p>
<img src="destin.png" width="733" height="550">

<a name="mac-installer-installation-customize-main"></a>
<p><b>Рис. 2.45. MySQL Package Installer: настройка</b></p>
<img src="customiz.png" width="732" height="550"></li>
<li><p>Нажмите <span>Install</span> для запуска установки.</li>

<li>Как только установка была завершена успешно, Вам предоставят Ваш
временный пароль root. Это не может быть восстановлено, таким образом, Вы
должны сохранить этот пароль. Например:</p>

<a name="mac-installer-installation-root-password"></a>
<p><b>Рис. 2.46. MySQL Package Installer: временный пароль для Root</b></p>
<img src="root.png" width="600" height="316">
<p>После входа в MySQL, используя этот временный пароль, MySQL блокирует этот
пароль и потребует, чтобы Вы создали новый.</p></li>

<li><p>Затем следует сообщение <span>Install Succeeded</span> с кратким
итогом. <span>Закройте</span> мастер.</p>
<a name="mac-installer-installation-summary"></a>
<p><b>Рис. 2.47. MySQL Package Installer: итог</b></p>
<img src="summary.png" width="732" height="550"></li></ol>

<p>Сервер MySQL теперь установлен, но он не загружен (или запущен) по
умолчанию. Используйте launchctl из командной строки или запустите MySQL,
щелкая по "Start", используя MySQL preference pane. Для дополнительной
информации см. разделы <a href="#osx-installation-launchd">2.4.3
</a> и <a href="#osx-installation-prefpane">2.4.4</a>.
Используйте MySQL Preference Pane или launchd, чтобы сконфигурировать MySQL
для автоматического запуска.</p>

<p>Устанавливая использование установщика пакета, файлы установлены в каталог
в пределах <code>/usr/local</code> в соответствии с названием версии
установки и платформы. Например, файл установщика
<code>mysql-8.0.1-<em><code>osx10.11-x86_64.dmg</code></em></code>
установит MySQL в <code>/usr/local/mysql-8.0.1-osx10.11-x86_64/</code>.
Следующая таблица показывает расположение каталога установки.</p>

<a name="mysql-installation-layout-osx"></a>
<p><b>Таблица 2.5. Расположение установки MySQL на OS X</b></p>
<table border="1">
<thead><tr><th scope="col">Каталог</th>
<th scope="col">Содержание каталога</th></tr></thead>
<tbody><tr><td scope="row"><code>bin</code>, <code>scripts</code></td>
<td>Сервер <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a>, клиент и утилиты</td></tr>
<tr><td scope="row"><code>data</code></td><td>
Файлы системного журнала, базы данных</td></tr>
<tr><td scope="row"><code>docs</code></td><td>
Документы, такие как информация о версии</td></tr>
<tr><td scope="row"><code>include</code></td><td>Файлы заголовков</td></tr>
<tr><td scope="row"><code>lib</code></td><td>Библиотеки</td></tr>
<tr><td scope="row"><code>man</code></td><td>Unix manual pages</td></tr>
<tr><td scope="row"><code>mysql-test</code></td><td>MySQL test suite</td></tr>
<tr><td scope="row"><code>share</code></td><td>
Разные файлы поддержки, включая сообщения об ошибках, типовые
конфигурационные файлы, SQL для установки базы данных</td></tr>
<tr><td scope="row"><code>support-files</code></td><td>
Скрипты и типовые конфигурационные файлы</td></tr>
<tr><td scope="row"><code>/tmp/mysql.sock</code></td><td>
Местоположение скоета MySQL Unix</td></tr></tbody></table>
<p>Во время процесса установки создается ссылка
<code>/usr/local/mysql</code> на соответствующий каталог.</p>

<h3><a name="osx-installation-launchd"></a>2.4.3.
Установка демона запуска MySQL</h3>
<p>OS X использует демоны запуска, чтобы автоматически запустить, остановить
и управлять процессами и приложениями, такими как MySQL.</p>

<p>По умолчанию, пакет установки (DMG) на OS X установит файл launchd с
именем <code>/Library/LaunchDaemons/com.oracle.oss.mysql.mysqld.plist</code>,
который содержит plist-определение, подобное:
<pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
&lt;key&gt;Label&lt;/key&gt; &lt;string&gt;com.oracle.oss.mysql.mysqld&lt;/string&gt;
&lt;key&gt;ProcessType&lt;/key&gt; &lt;string&gt;Interactive&lt;/string&gt;
&lt;key&gt;Disabled&lt;/key&gt;&lt;false/&gt;
&lt;key&gt;RunAtLoad&lt;/key&gt; &lt;true/&gt;
&lt;key&gt;KeepAlive&lt;/key&gt; &lt;true/&gt;
&lt;key&gt;SessionCreate&lt;/key&gt; &lt;true/&gt;
&lt;key&gt;LaunchOnlyOnce&lt;/key&gt;&lt;false/&gt;
&lt;key&gt;UserName&lt;/key&gt;&lt;string&gt;_mysql&lt;/string&gt;
&lt;key&gt;GroupName&lt;/key&gt; &lt;string&gt;_mysql&lt;/string&gt;
&lt;key&gt;ExitTimeOut&lt;/key&gt; &lt;integer&gt;600&lt;/integer&gt;
&lt;key&gt;Program&lt;/key&gt; &lt;string&gt;/usr/local/mysql/bin/mysqld&lt;/string&gt;
&lt;key&gt;ProgramArguments&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;/usr/local/mysql/bin/mysqld&lt;/string&gt;
&lt;string&gt;--user=_mysql&lt;/string&gt;
&lt;string&gt;--basedir=/usr/local/mysql&lt;/string&gt;
&lt;string&gt;--datadir=/usr/local/mysql/data&lt;/string&gt;
&lt;string&gt;--plugin-dir=/usr/local/mysql/lib/plugin&lt;/string&gt;
&lt;string&gt;--log-error=/usr/local/mysql/data/mysqld.local.err&lt;/string&gt;
&lt;string&gt;--pid-file=/usr/local/mysql/data/mysqld.local.pid&lt;/string&gt;
&lt;/array&gt;
&lt;key&gt;WorkingDirectory&lt;/key&gt;&lt;string&gt;/usr/local/mysql&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</pre>

<p>Некоторые пользователи сообщают, что добавление plist DOCTYPE
заставляет launchd терпеть неудачу, несмотря на прохождение проверки lint.
Мы подозреваем, что это ошибка copy-n-paste. md5 контрольная сумма файла,
содержащего вышеупомянутый отрывок,
<span><em>24710a27dc7a28fb7ee6d825129cd3cf</em></span>.</p>

<p>Чтобы включить сервис launchd, Вы можете также:</p>
<ul><li><p>Кликнуть <span>Start MySQL Server</span> из MySQL preference pane.
</p>
<a name="mac-installer-preference-pane-location-start"></a>
<p><b>Рис. 2.48. MySQL Preference Pane: расположение</b></p>
<img src="prefloc.png" width="800" height="746">

<a name="mac-installer-preference-pane-usage"></a>
<p><b>Рис. 2.49. MySQL Preference Pane: использование</b></p>
<img src="prefusag.png" width="780" height="426"></li>

<li><p>Или вручную загрузите файл launchd.
<pre>
shell&gt; cd /Library/LaunchDaemons
shell&gt; sudo launchctl load -F com.oracle.oss.mysql.mysqld.plist
</pre></li>

<li>Чтобы сконфигурировать MySQL, чтобы автоматически запустить в
программе начального запуска, Вы можете:
<pre>
shell&gt; sudo launchctl load -w com.oracle.oss.mysql.mysqld.plist
</pre></li></ul>

<p>Обновляя сервер MySQL, процесс установки удалит старые элементы запуска,
которые были установлены с сервером MySQL 5.7.7 и ниже.</p>
<p>Кроме того, обновление заменит Ваш существующий файл launchd того
же самого имени.</p>

<p>Дополнительная информация о launchd:</p>
<ul><li><p>plist переопределяет записи в <code>my.cnf</code>,
потому что их передают как параметры командной строки. Для дополнительной
информации о передаче опций программы см.
<a href="programs.htm#program-options">раздел 5.2.3</a>.</li>

<li>Раздел <span><strong>ProgramArguments</strong></span>
определяет параметры командной строки, которые передают в программу, которая
является исполняемым модулем <code>mysqld</code> в этом случае.</li>

<li>Значение по умолчанию определения plist написано с менее сложными
случаями использования. Для более сложных установок Вы можете хотеть удалить
некоторые из параметров и вместо этого положиться на конфигурационный файл
MySQL, такой как <code>my.cnf</code>.</li>

<li>Если Вы редактируете файл plist, то отмените опцию установщика, повторно
устанавливая или обновляя MySQL. Иначе Ваш отредактированный plist файл
будет перезаписан, и все редактирования будут потеряны.</p></li></ul>

<p>Поскольку значение по умолчанию plist определяет несколько
<span><strong>ProgramArguments</strong></span>, Вы могли бы удалить
большинство этих параметров и вместо этого положиться на Ваш конфигурационный
файл <code>my.cnf</code> MySQL, чтобы определить их. Например:
<pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
&lt;key&gt;Label&lt;/key&gt; &lt;string&gt;com.oracle.oss.mysql.mysqld&lt;/string&gt;
&lt;key&gt;ProcessType&lt;/key&gt; &lt;string&gt;Interactive&lt;/string&gt;
&lt;key&gt;Disabled&lt;/key&gt;&lt;false/&gt;
&lt;key&gt;RunAtLoad&lt;/key&gt; &lt;true/&gt;
&lt;key&gt;KeepAlive&lt;/key&gt; &lt;true/&gt;
&lt;key&gt;SessionCreate&lt;/key&gt; &lt;true/&gt;
&lt;key&gt;LaunchOnlyOnce&lt;/key&gt;&lt;false/&gt;
&lt;key&gt;UserName&lt;/key&gt;&lt;string&gt;_mysql&lt;/string&gt;
&lt;key&gt;GroupName&lt;/key&gt; &lt;string&gt;_mysql&lt;/string&gt;
&lt;key&gt;ExitTimeOut&lt;/key&gt; &lt;integer&gt;600&lt;/integer&gt;
&lt;key&gt;Program&lt;/key&gt; &lt;string&gt;/usr/local/mysql/bin/mysqld&lt;/string&gt;
&lt;key&gt;WorkingDirectory&lt;/key&gt;&lt;string&gt;/usr/local/mysql&lt;/string&gt;
&lt;key&gt;ProgramArguments&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;/usr/local/mysql/bin/mysqld&lt;/string&gt;
&lt;string&gt;--user=_mysql&lt;/string&gt;
&lt;/array&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</pre>

<p>В этом случае опции <a href="server.htm#sysvar_basedir"><code>basedir
</code></a>, <a href="server.htm#sysvar_datadir"><code>datadir</code></a>,
<a href="server.htm#sysvar_plugin_dir"><code>plugin_dir</code></a>,
<a href="server.htm#sysvar_log_error"><code>log_error</code></a> и
<a href="server.htm#sysvar_pid_file"><code>pid_file</code></a>
были удалены из определения plist, а затем Вы Вы могли бы определить
их в <code>my.cnf</code>.</p>

<h3><a name="osx-installation-prefpane"></a>2.4.4.
Установка и использование MySQL Preference Pane</h3>
<p>MySQL Installation Package включает MySQL preference pane, которая
позволяет Вам запустить, остановить и управлять автоматизированным запуском
во время начальной загрузки Вашей установки MySQL.</p>
<p>Эта preference pane установлена по умолчанию и перечислена в
окне <span><em>System Preferences</em></span>.</p>

<a name="mac-installer-preference-pane-location-start-2"></a>
<p><b>Рис. 2.50. MySQL Preference Pane: расположение</b></p>
<img src="prefloc.png" width="800" height="746">

<p>Чтобы установить MySQL Preference Pane:</p>
<ol type="1"><li><p>Загрузите образ диска (<code>.dmg</code>), который
содержит установщик пакета MySQL. Двойной щелчок по файлу смонтирует образ
диска и покажет его содержание.</p>

<a name="mac-installer-dmg-contents-prefpane"></a>
<p><b>Рис. 2.51. MySQL Package Installer: содержание DMG</b></p>
<img src="dmg-con.png" width="428" height="382"></li>

<li><p>Пройдите процесс установки сервера MySQL, как описано в документации в
<a href="#osx-installation-pkg">разделе 2.4.2</a>.</li>

<li>Нажмите <span>Customize</span> на шаге <span>Installation Type</span>.
Опция "Preference Pane" перечислена там и включена по умолчанию,
удостоверьтесь, что это так.</p>

<a name="mac-startup-installer-customize-prefpane"></a>
<p><b>Рис. 2.52 MySQL Installer on OS X: Customize</b></p>
<img src="customiz.png" width="732" height="550"></li>
<li><p>Завершите процесс установки сервера MySQL.</p></li></ol>

<p>MySQL preference pane запускает и останавливает только MySQL,
установленный из пакета установки MySQL, который был установлен в
местоположении по умолчанию.</p>

<p>Как только MySQL preference pane установлен, Вы можете управлять своим
сервером MySQL, используя preference pane. Для этого откройте
<span>System Preferences...</span> в меню Apple. Выберите MySQL preference
pane, щелкая по эмблеме MySQL в пределах
<span>нижнего</span> раздела списка preference panes.
</p>

<a name="mac-installer-preference-pane-location"></a>
<p><b>Рис. 2.53. MySQL Preference Pane: расположение</b></p>
<img src="prefloc.png" width="800" height="746">

<a name="mac-installer-preference-pane-usage-3"></a>
<p><b>Рис. 2.54. MySQL Preference Pane: использование</b></p>
<img src="prefusag.png" width="780" height="426">

<p>MySQL Preference Pane показывает текущий статус сервера MySQL, показывая
<span>stopped</span> (красный), если сервер не работает и
<span>running</span> (зеленый), если сервер был уже запущен. Также показывает
текущую установку того, был ли сервер MySQL
установлен запускаться автоматически.</p>

<ul><li><p><span><strong>Чтобы запустить сервер MySQL,
используя preference pane:</strong></span></p>
<p>Кликните <span>Start MySQL Server</span>.
Вы можете быть запрошены об имени и пароле пользователя с привилегиями
администратора, чтобы запустить сервер MySQL.</li>

<li><span><strong>Чтобы остановить сервер MySQL,
используя preference pane:</strong></span></p>
<p>Кликните <span>Stop MySQL Server</span>.
Вы можете быть запрошены об имени и пароле пользователя с привилегиями
администратора, чтобы запустить сервер MySQL.</li>

<li><span><strong>Чтобы автоматически запустить сервер MySQL,
когда система загружается:</strong></span></p>
<p>Проверьте, что флажок рядом с <span>Automatically Start
MySQL Server on Startup</span> установлен.</li>

<li><span><strong>Чтобы автоматически не запускать сервер MySQL,
когда система загружается:</strong></span></p>
<p>Проверьте, что флажок рядом с <span>Automatically Start
MySQL Server on Startup</span> снят.</p></li></ul>
<p>Вы можете закрыть окно <span><strong>System Preferences...</strong>
</span>, как только Вы завершили свои настройки.</p>

<h2><a name="linux-installation"></a>2.5. Установка MySQL в Linux</h2>
<p>Linux поддерживает много различных решений для того, чтобы установить
MySQL. Мы рекомендуем, чтобы Вы использовали один из дистрибутивов от
Oracle, для которого несколько методов для установки доступны:</p>

<ul><li><p>С помощью Yum, используя
<a href="../../../dev.mysql.com/downloads/repo/yum/default.htm" target="_top">MySQL Yum
repository</a>. Детали в <a href="#linux-installation-yum-repo">
разделе 2.5.1</a>.</li>

<li>С помощью APT, используя
<a href="../../../dev.mysql.com/downloads/repo/apt/default.htm" target="_top">MySQL APT
Repository</a>. Детали в <a href="#linux-installation-apt-repo">
разделе 2.5.2</a>.</li>

<li>С помощью Zypper, используя
<a href="../../../dev.mysql.com/downloads/repo/suse/default.htm" target="_top">MySQL SLES
Repository</a>. Детали в <a href="#linux-installation-sles-repo">
разделе 2.5.3</a>.</li>

<li>Установка предварительно собранного пакета RPM. Для получения
дополнительной информации см. <a href="#linux-installation-rpm">
раздел 2.5.4</a>.</li>

<li>Установка предварительно собранного пакета Debian. Для получения
дополнительной информации см. <a href="#linux-installation-debian">
раздел 2.5.5</a>.</li>

<li>Установка из двоичного пакета в формате <code>.tar.gz</code>. См.
<a href="#binary-installation">раздел 2.2</a>.</li>
<li>Извлечение и компилирование MySQL из исходных текстов. См.
<a href="#source-installation">раздел 2.8</a>.</p></li></ul>

<p>Как альтернатива, Вы можете использовать диспетчер пакетов на своей
системе, чтобы автоматически загрузить и установить MySQL с пакетами от
родных репозитариев программного обеспечения Вашего дистрибутива Linux. Эти
родные пакеты часто на несколько версий позади в настоящее время доступного
выпуска. Вы также обычно будете неспособны установить выпуски развития
(DMR), поскольку они обычно не делаются доступными в родных репозитариях. Для
получения дополнительной информации об использовании родных установщиков
пакета см. <a href="#linux-installation-native">раздел 2.5.6</a>.
</p>

<p>Для многих установок Linux Вы будете хотеть настроить MySQL, который будет
запущен автоматически, когда Ваша машина запустится. Многие из родных
установок пакета выполняют эту работу для Вас, но для исходных текстов
и решений для RPM, Вы, возможно, должны настроить это отдельно. Необходимый
скрипт, <a href="programs.htm#mysql-server"><span><strong>mysql.server
</strong></span></a>, может быть найден в каталоге <code>support-files</code>
в соответствии с каталогом установки MySQL или в исходном дереве MySQL. Вы
можете установить это как <code>/etc/init.d/mysql</code>
для автоматического запуска MySQL и завершения работы. См.
<a href="programs.htm#mysql-server">раздел 5.3.3</a>.</p>

<h3><a name="linux-installation-yum-repo"></a>2.5.1. Установка MySQL в Linux,
используя репозитарий Yum</h3>
<p>MySQL обеспечивает репозитарий программного обеспечения стиля Yum
для следующих платформ Linux:</p>

<ul><li><p>EL6 и EL7-платформы (например, соответствующие версии
Red Hat Enterprise Linux, Oracle Linux и CentOS).</li>
<li>Fedora 23 и 24.</p></li></ul>

<p>В настоящее время <a href="../../../dev.mysql.com/downloads/repo/yum/default.htm"
target="_top">MySQL Yum</a> для вышеупомянутых платформ обеспечивает пакеты
RPM для того, чтобы они установили сервер MySQL, клиента, инструментальные
средства MySQL, утилиты MySQL, Connector/ODBC и Connector/Python
(не все пакеты доступны для всех платформ).</p>

<h4><a name="idm139965426541056"></a>Прежде, чем начать</h4>
<p>Как популярное, общедоступное, программное обеспечение, MySQL в его
оригинальной или повторно упакованной форме широко установлен на многих
системах из различных источников, включая различные сайты для скачивания
программного обеспечения, репозитарии программного обеспечения и так далее.
Следующие инструкции предполагают, что MySQL не установлен на Вашей системе,
используя распределенный третьей стороне пакет RPM, если это не так, следуйте
инструкциям, данным в <a href="#updating-yum-repo">разделе
2.10.1.2</a> или на
<a href="../../../dev.mysql.com/doc/refman/5.7/en/replace-third-party-yum.html"
target="_top">Replacing a Third-Party Distribution of MySQL Using the
MySQL Yum Repository</a>.</p>

<h4><a name="idm139965426537904"></a>Шаги для новой установки MySQL</h4>
<p>Следуйте за шагами ниже, чтобы установить последнюю версию GA MySQL из
репозитария MySQL Yum:</p>

<ol type="1"><li><h4><a name="yum-repo-setup"></a>
Добавление репозитария MySQL Yum</h4>
<p>Во-первых, добавьте репозитарий MySQL Yum к списку репозитариев своей
системы. Это одноразовая работа, которая может быть выполнена, устанавливая
RPM, обеспеченный MySQL. Следуйте за этими шагами:</p>

<ol type="a"><li><p>Перейдите на страницу Download MySQL Yum Repository
(<a href="../../../dev.mysql.com/downloads/repo/yum/default.htm" target="_top">
http://dev.mysql.com/downloads/repo/yum/</a>) в MySQL Developer Zone.</li>

<li>Выберите и загрузите пакет выпуска для своей платформы.</li>
<li>Установите загруженный пакет выпуска следующей командой, заменяя
<em><code>platform-and-version-specific-package-name</code></em>
названием загруженного пакета RPM:
<pre>
shell&gt; sudo yum localinstall <em><code>platform-and-version-specific-package-name</code></em>.rpm
</pre>

<p>Для систем EL6 команда:
<pre>
shell&gt; sudo yum localinstall mysql57-community-release-el6-<em><code>{version-number}</code></em>.noarch.rpm
</pre>

<p>Для систем EL7 команда:
<pre>
shell&gt; sudo yum localinstall mysql57-community-release-el7-<em><code>{version-number}</code></em>.noarch.rpm
</pre>

<p>Для Fedora 23:
<pre>
shell&gt; sudo dnf localinstall mysql57-community-release-fc23-<em><code>{version-number}</code></em>.noarch.rpm
</pre>

<p>Для Fedora 24:
<pre>
shell&gt; sudo dnf localinstall mysql57-community-release-fc24-<em><code>{version-number}</code></em>.noarch.rpm
</pre>

<p>Команда установки добавляет репозитарий MySQL Yum к списку репозитариев
Вашей системы и загружает ключ GnuPG, чтобы проверить целостность пакетов
программ. См. <a href="#checking-gpg-signature">
раздел 2.1.3.2</a> для деталей о проверке ключа GnuPG.</p>

<p>Вы можете проверить, что репозитарий был успешно добавлен следующей
командой (для dnf-систем замените <span><strong>yum</strong></span> на
<span><strong>dnf</strong></span>):
<pre>
shell&gt; yum repolist enabled | grep "mysql.*-community.*"
</pre></li></ol>

<p>Как только репозитарий включен на Вашей системе, любое обновление в
масштабе всей системы командой <span><strong>yum update</strong></span>
(или <span><strong>dnf upgrade</strong></span> для dnf-систем)
обновит пакеты MySQL на Вашей системе, а также заменит любые имеющие
отношение к третьей стороне пакеты, если Yum найдет замены для них в
репозитарии MySQL Yum, см.
<a href="#updating-yum-repo">раздел 2.10.1.2</a>
и, для обсуждения некоторых возможных эффектов этого на Вашей системе, см.
<a href="#updating-yum-repo-client-lib">
Обновление совместно используемых библиотек клиента</a>.</p></li>

<li><h4><a name="yum-repo-select-series"></a>Выбор ряда выпуска</h4>
<p>Используя репозитарий, последний ряд GA (в настоящее время MySQL 5.7)
выбран для установки по умолчанию. Если это то, что Вы хотите, Вы можете
пропустить к следующему шагу.</p>

<p>В пределах репозитария различные серии выпуска MySQL Community Server
размещены в различных подрепозитариях. Подрепозитарий для последнего ряда GA
(в настоящее время MySQL 5.7) включен по умолчанию, а подрепозитарии для
всех других рядов (например, MySQL 8.0) отключены по умолчанию. Используйте
эту команду, чтобы видеть все подрепозитарии в репозитарии и видеть, кто из
них включен или отключен (для dnf-систем, замените
<span><strong>yum</strong></span> на <span><strong>dnf</strong></span>):
<pre>
shell&gt; yum repolist all | grep mysql
</pre>

<p>Чтобы установить последний выпуск из
последнего ряда GA, никакая конфигурация не необходима. Чтобы установить
последний выпуск из определенного ряда кроме последнего ряда GA, отключите
подрепозитарий для последнего ряда GA и включите подрепозитарий для
определенного ряда прежде, чем выполнить команду установки.
Если Ваша платформа поддерживает
<span><strong>yum-config-manager</strong></span>,
Вы можете сделать это, этими командами, которые отключают подрепозитарий для
5.7 и включают для ряда 8.0:
<pre>
shell&gt; sudo yum-config-manager --disable mysql57-community
shell&gt; sudo yum-config-manager --enable mysql80-community
</pre>

<p>Для dnf-систем:
<pre>
shell&gt; sudo dnf config-manager --disable mysql57-community
shell&gt; sudo dnf config-manager --enable mysql80-community
</pre>

<p>Помимо использования <span><strong>yum-config-manager</strong></span>
или <span><strong>dnf config-manager</strong></span>,
Вы можете также выбрать ряд выпуска, редактируя вручную файл
<code>/etc/yum.repos.d/mysql-community.repo</code>.
Это типичный вход для серийного подрепозитария выпуска в файле:
<pre>
[mysql57-community]
name=MySQL 5.7 Community Server
baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/6/$basearch/
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql
</pre>

<p>Найдите вход для подрепозитария, который Вы хотите сконфигурировать, и
отредактируйие опцию <code>enabled</code>. Определите
<code>enabled=0</code>, чтобы отключить подрепозитарий, или
<code>enabled=1</code> для включения. Например, чтобы установить MySQL 8.0,
удостоверьтесь, что Вы имеете <code>enabled=0</code>
для вышеупомянутого входа подрепозитария для MySQL 5.7 и
<code>enabled=1</code> для входа ряда 8.0:
<pre>
# Enable to use MySQL 8.0
[mysql80-community]
name=MySQL 8.0 Community Server
baseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/6/$basearch/
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql
</pre>

<p>Вы должны только включить подрепозитарию для одного ряда выпуска в любое
время. Когда подрепозитарии больше чем для одного ряда выпуска будут
включены, последний ряд будет использоваться Yum.</p>

<p>Проверьте, что правильные подрепозитарии были включены и отключены,
выполняя следующую команду и проверяя ее вывод (для dnf-систем
замените <span><strong>yum</strong></span> на
<span><strong>dnf</strong></span>):
<pre>
shell&gt; yum repolist enabled | grep mysql
</pre></li>

<li><h4><a name="yum-repo-installing-mysql"></a>Установка MySQL</h4>
<p>Установка MySQL делается следующей командой (для dnf-систем замените
<span><strong>yum</strong></span> на <span><strong>dnf</strong></span>):
<pre>
shell&gt; sudo yum install mysql-community-server
</pre>

<p>Это устанавливает пакет для сервера MySQL
(<code>mysql-community-server</code>), а также пакеты для компонентов,
требуемых чтобы выполнять сервер, включая пакеты для клиента
(<code>mysql-community-client</code>), сообщения об ошибках и наборы символов
для клиента и сервера (<code>mysql-community-common</code>)
и совместно используемые библиотеки клиента
(<code>mysql-community-libs</code>).</p></li><li>

<h4><a name="yum-repo-starting-and-stopping-server"></a>
Запуск сервера MySQL</h4>
<p>Запустите сервер MySQL следующей командой:
<pre>
shell&gt; sudo service mysqld start
Starting mysqld:[ OK ]
</pre>

<p>Вы можете проверить состояние сервера MySQL следующей командой:
<pre>
shell&gt; sudo service mysqld status
mysqld (pid 3066) is running.
</pre></li></ol>

<p>При начальном запуске сервера происходит следующее, учитывая, что каталог
данных сервера пуст:</p>
<ul><li><p>Сервер инициализирован.</li>
<li>SSL-сертификат и ключевые файлы произведены в каталоге данных.</li>
<li>Плагин <a href="security.html#validate-password-plugin">
validate_password</a> установлен и включен.</li>

<li>Учетная запись пользователя <code>'root'@'localhost</code> создается.
Пароль для суперпользователя установлен и сохранен в файле журнала ошибок.
Чтобы показать это, используйте следующую команду:
<pre>
shell&gt; sudo grep 'temporary password' /var/log/mysqld.log
</pre>

<p>Измените пароль как можно скорее, входя в систему с
временным паролем и установите пользовательский пароль
для учетной записи:
<pre>
shell&gt; mysql -uroot -p
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass4!';
</pre>

<p>Плагин MySQL <a href="security.html#validate-password-plugin">
validate_password</a> установлен по умолчанию. Это потребует, чтобы пароли
содержали по крайней мере одну прописную букву, одну строчную букву, одну
цифру, один специальный символ и что полная длина пароля по
крайней мере 8 символов.</p></li></ul>

<p><a name="yum-install-compatibility-el7"></a>
<span><em>Информация о совместимости для EL7-платформ:</em></span>
следующие пакеты RPM от родных репозитариев программного обеспечения платформ
являются несовместимыми с пакетом от репозитария MySQL Yum, который
устанавливает сервер MySQL. Как только Вы установили MySQL, используя
репозитарий MySQL Yum, Вы не будете в состоянии установить
эти пакеты (и наоборот).</p>
<ul><li><p>akonadi-mysql.</p></li></ul>

<h4><a name="yum-install-components"></a>Установка дополнительных продуктов
MySQL и компонентов через Yum</h4>
<p>Вы можете использовать Yum, чтобы установить и управлять отдельными
компонентами MySQL. Некоторые из этих компонентов размещены в подрепозитариях
репозитария MySQL Yum: например, MySQL Connectors должны быть найдены в
подрепозитарии MySQL Connectors Community, а MySQL Workbench в MySQL Tools
Community. Вы можете использовать следующую команду, чтобы перечислить пакеты
для всех компонентов MySQL, доступных для Вашей платформы из репозитария
MySQL Yum (для dnf-систем замените <span><strong>yum</strong></span> на
<span><strong>dnf</strong></span>):
<pre>
shell&gt; sudo yum --disablerepo=\* --enablerepo='mysql*-community*' list available
</pre>

<p>Установите любые пакеты своего выбора со следующей командой, заменяя
<em><code>package-name</code></em> на имя пакета
(для dnf-систем замените <span><strong>yum</strong></span> на
<span><strong>dnf</strong></span>):
<pre>
shell&gt; sudo yum install <em><code>package-name</code></em>
</pre>

<p>Например, чтобы установить инструментальные средства MySQL на Fedora 24:
<pre>
shell&gt; sudo dnf install mysql-workbench-community
</pre>

<p>Чтобы установить совместно используемые библиотеки клиента:
<pre>
shell&gt; sudo yum install mysql-community-libs
</pre>

<h4><a name="idm139965426438352"></a>Обновление MySQL через Yum</h4>
<p>Помимо установки, Вы можете также выполнить обновления для продуктов MySQL
и компонентов, используя репозитарий MySQL Yum. См.
<a href="#updating-yum-repo">раздел 2.10.1.2</a>.</p>

<h3><a name="linux-installation-apt-repo"></a>2.5.2. Установка MySQL на
Linux, используя MySQL репозитарий APT</h3>
<p>Репозитарий MySQL APT обеспечивает <code>deb</code>-пакеты для установки и
управления сервером MySQL, клиентом и другими компонентами на
следующих платформах Linux:</p>

<ul><li><p>Debian 8.x (<span><span>jessie</span></span>)</li>
<li>Ubuntu 14.04 LTS (<span><span>Trusty Tahr</span></span>)</li>
<li>Ubuntu 16.04 (<span><span>Xenial Xerus</span></span>)</p></li></ul>

<p>Инструкции для того, чтобы использовать репозитарий MySQL APT доступны
на <a href="../../../dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/default.htm"
target="_top">A Quick Guide to Using the MySQL APT Repository</a>.</p>

<h3><a name="linux-installation-sles-repo"></a>2.5.3. Установка MySQL на
Linux, используя MySQL репозитарий SLES</h3>
<p>Репозитарий MySQL SLES обеспечивает пакеты RPM для установки и управления
сервером MySQL, клиентом, и другими компонентами на SUSE
Enterprise Linux Server.</p>

<p>Инструкции для того, чтобы использовать репозитарий MySQL SLES доступны
на <a href="../../../dev.mysql.com/doc/mysql-sles-repo-quick-guide/en/default.htm"
target="_top">A Quick Guide to Using the MySQL SLES Repository</a>.</p>

<p>Репозитарий MySQL SLES находится в разработке. Мы поощряем Вас пробовать
это и предоставлять нам обратную связь. Пожалуйста, сообщите о любых ошибках
или несогласованностях, которые Вы наблюдаете, через
<a href="../../../bugs.mysql.com/default.htm" target="_top">Bugs Database</a>.</p>

<h3><a name="linux-installation-rpm"></a>2.5.4. Установка MySQL на
Linux, используя RPM-пакеты Oracle</h3>
<p>Рекомендуемый способ установить MySQL на RPM-Linux дистрибутивах
при использовании пакетов RPM, обеспеченных Oracle. Есть два источника
для того, чтобы получить их, для Community Edition MySQL:</p>

<ul><li><p>Из репозитариев программного обеспечения MySQL:</p>
<ul><li><p>MySQL Yum repository (см.
<a href="#linux-installation-yum-repo">раздел 2.5.1</a>).</li>

<li>MySQL SLES repository (см.
<a href="#linux-installation-sles-repo">раздел 2.5.3</a>).
</p></li></ul></li>

<li><p>Со страницы <a href="../../../dev.mysql.com/downloads/mysql/default.htm"
target="_top">Download MySQL Community Server</a> в
<a href="../../../dev.mysql.com/default.htm" target="_top">MySQL Developer Zone</a>.
</p></li></ul>

<p>RPM-дистрибутивы MySQL также обеспечены другими поставщиками. Знайте, что
они могут отличаться от созданных Oracle в особенностях, способностях и
соглашениях (включая коммуникационную установку), и что инструкции по
установке в этом руководстве не обязательно относятся к ним.</p>

<p>RPM-пакеты для MySQL перечислены в следующих таблицах:</p>
<a name="idm139965426402576"></a><p><b>Таблица 2.6. RPM-пакеты
для MySQL Community Edition</b></p>
<table border="1">
<thead><tr><th scope="col">Имя</th><th scope="col">Обзор</th></tr></thead>
<tbody><tr><td scope="row"><code>mysql-community-server</code></td>
<td>Сервер и связанные инструменты</td></tr>
<tr><td scope="row"><code>mysql-community-client</code></td><td>
Клиент MySQL и утилиты</td></tr>
<tr><td scope="row"><code>mysql-community-common</code></td><td>
Общие файлы для сервера и библиотек клиента</td></tr>
<tr><td scope="row"><code>mysql-community-devel </code></td><td>
Заголовочные файлы и библиотеки для приложений-клиентов базы данных MySQL
</td></tr>
<tr><td scope="row"><code>mysql-community-libs</code></td><td>
Совместно используемые библиотеки для приложений-клиентов базы данных MySQL
</td></tr>
<tr><td scope="row"><code>mysql-community-libs-compat</code></td><td>
Совместно используемые библиотеки совместимости для
предыдущих установок MySQL</td></tr>
<tr><td scope="row"><code>mysql-community-embedded</code></td><td>
Библиотека MySQL embedded</td></tr>
<tr><td scope="row"><code>mysql-community-embedded-devel</code></td><td>
Заголовочные файлы и библиотеки для MySQL как встраиваемой библиотеки
</td></tr>
<tr><td scope="row"><code>mysql-community-test</code></td><td>
Испытательный набор для сервера MySQL</td></tr></tbody></table>

<a name="idm139965426381856"></a><p><b>Таблица 2.7. RPM-пакеты для
MySQL Enterprise Edition</b></p>
<table border="1">
<thead><tr><th scope="col">Имя</th><th scope="col">Обзор</th></tr></thead>
<tbody><tr><td scope="row"><code>mysql-commercial-server</code></td><td>
Сервер и связанные инструменты</td></tr>
<tr><td scope="row"><code>mysql-commercial-client</code></td><td>
Клиент MySQL и утилиты</td></tr>
<tr><td scope="row"><code>mysql-commercial-common</code></td><td>
Общие файлы для сервера и библиотек клиента</td></tr>
<tr><td scope="row"><code>mysql-commercial-devel </code></td><td>
Заголовочные файлы и библиотеки для приложений-клиентов базы данных MySQL
</td></tr>
<tr><td scope="row"><code>mysql-commercial-libs </code></td><td>
Совместно используемые библиотеки для приложений-клиентов базы данных MySQL
</td></tr>
<tr><td scope="row"><code>mysql-commercial-libs-compat</code></td><td>
Совместно используемые библиотеки совместимости для
предыдущих установок MySQL</td></tr>
<tr><td scope="row"><code>mysql-commercial-embedded</code></td><td>
Библиотека MySQL embedded</td></tr>
<tr><td scope="row"><code>mysql-commercial-embedded-devel</code></td><td>
Заголовочные файлы и библиотеки для MySQL как встраиваемой библиотеки
</td></tr>
<tr><td scope="row"><code>mysql-commercial-test </code></td><td>
Испытательный набор для сервера MySQL</td></tr></tbody></table>

<p>У полных имен для RPM есть следующий синтаксис:
<pre>
<em><code>packagename</code></em>-<em><code>version</code></em>-<em><code>distribution</code></em>-<em><code>arch</code></em>.rpm
</pre>

<p>Значения <em><code>distribution</code></em> и <em><code>arch</code></em>
указывают на дистрибутив Linux и тип процессора, для которого был создан
пакет. См. таблицу ниже для списков идентификаторов дистрибутива:</p>

<a name="idm139965426357040"></a><p><b>Таблица 2.8. Идентификаторы дистрибутива
пакета MySQL Linux RPM</b></p>
<table border="1">
<thead><tr><th scope="col">Значение дистрибутива</th>
<th scope="col">Намеченное использование</th></tr></thead>
<tbody><tr><td scope="row"><code>el6</code>, <code>el7</code></td><td>
Red Hat Enterprise Linux/Oracle Linux/CentOS 6 или 7</td></tr>
<tr><td scope="row"><code>fc23</code>, <code>fc24</code></td><td>
Fedora 23 или 24</td></tr>
<tr><td scope="row"><code>sles12</code></td><td>
SUSE Linux Enterprise Server 12</td></tr></tbody></table>

<p>Чтобы уидеть все файлы в пакете RPM (например,
<code>mysql-community-server</code>), используйте следующую команду:
<pre>
shell&gt; rpm -qpl mysql-community-server-<em><code>version</code></em>-<em><code>distribution</code></em>-<em><code>arch</code></em>.rpm
</pre>

<p><span><em>Обсуждение в остальной части этого раздела применяется только к
процессу установки, используя пакеты RPM, непосредственно загруженные из
Oracle, а не через репозитарий MySQL.</em></span></p>

<p>Отношения зависимости существуют среди некоторых из пакетов. Если Вы
планируете установить многие из пакетов, Вы можете хотеть загрузить вместо
этого файл <span><strong>tar</strong></span>, который содержит все упомянутые
выше пакеты RPM, так, чтобы Вы не загрузили их отдельно.</p>

<p>В большинстве случаев, Вы должны установить пакеты
<code>mysql-community-server</code>, <code>mysql-community-client</code>,
<code>mysql-community-libs</code>, <code>mysql-community-common</code> и
<code>mysql-community-libs-compat</code>, чтобы получить функциональную,
стандартную установку MySQL. Чтобы выполнить такую стандартную, минимальную
установку, пойдите в папку, которая содержит все те пакеты (и предпочтительно
никакие другие пакеты RPM с аналогичными именами) и
примените следующую команду:
<pre>
shell&gt; sudo yum install mysql-community-{server,client,common,libs}-*
</pre>

<p>Замените <span><strong>yum</strong></span> на
<span><strong>zypper</strong></span> для систем SLES или на
<span><strong>dnf</strong></span> для dnf-систем (подобноe Fedora 23 или 24).
</p>

<p>В то время как очень предпочтительно использовать высокоуровневый
инструмент управления пакетами, например, <span><strong>yum</strong></span>,
чтобы установить пакеты, пользователи, которые предпочитают прямые команды
<span><strong>rpm</strong></span> могут заменить
<span><strong>yum install</strong></span> на <span><strong>rpm -Uvh</strong>
</span>, однако, использование <span><strong>rpm -Uvh</strong></span>
делает процесс установки более склонным к отказу, из-за
потенциальной зависимости пакетов.</p>

<p>Чтобы установить только программы клиента, Вы можете пропустить
<code>mysql-community-server</code> в Вашем списке пакетов,
примените следующую команду:
<pre>
shell&gt; sudo yum install mysql-community-{client,common,libs}-*
</pre>

<p>Замените <span><strong>yum</strong></span> на
<span><strong>zypper</strong></span> для SLES и на
<span><strong>dnf</strong></span> для dnf-систем (Fedora 23 и 24).</p>

<p>Стандартная установка MySQL, используя пакеты RPM приводит к файлам и
ресурсам, создаваемым в соответствии с системными каталогами,
показанными в следующей таблице.</p>

<a name="mysql-installation-layout-linuxrpm"></a>
<p><b>Таблица 2.9. Расположение установки MySQL для пакетов RPM Linux из
зоны разработки MySQL</b></p>
<table border="1">
<thead><tr><th scope="col">Файлы или ресурсы</th>
<th scope="col">Местоположение</th></tr></thead>
<tbody><tr><td scope="row">Программы клиента и скрипты</td>
<td><code>/usr/bin</code></td></tr>
<tr><td scope="row">Сервер <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a></td><td><code>/usr/sbin</code></td></tr>
<tr><td scope="row">Конфигурационный файл</td>
<td><code>/etc/my.cnf</code></td></tr>
<tr><td scope="row">Каталог данных</td>
<td><code>/var/lib/mysql</code></td></tr>
<tr><td scope="row">Файл журнала ошибок</td><td><p>Для платформ RHEL, Oracle
Linux, CentOS или Fedora: <code>/var/log/mysqld.log</code></p>
<p>Для SLES: <code>/var/log/mysql/mysqld.log</code></p></td></tr>
<tr><td scope="row">Значение <a href="server.htm#sysvar_secure_file_priv">
<code>secure_file_priv</code></a></td><td><code>/var/lib/mysql-files</code>
</td></tr>
<tr><td scope="row">Скрипт System V init</td><td><p>Для RHEL, Oracle Linux,
CentOS или Fedora: <code>/etc/init.d/mysqld</code></p>
<p>Для SLES: <code>/etc/init.d/mysql</code></p></td></tr>
<tr><td scope="row">Сервис Systemd</td><td><p>
Для RHEL, Oracle Linux, CentOS или Fedora: <code>mysqld</code></p>
<p>Для SLES: <code>mysql</code></p></td></tr>
<tr><td scope="row">Файл Pid</td><td><code> /var/run/mysql/mysqld.pid</code>
</td></tr>
<tr><td scope="row">Сокет</td><td><code>/var/lib/mysql/mysql.sock
</code></td></tr>
<tr><td scope="row">Каталог ключей</td>
<td><code>/var/lib/mysql-keyring</code></td></tr>
<tr><td scope="row">Unix manual pages</td>
<td><code>/usr/share/man</code></td></tr>
<tr><td scope="row">Включаемые файлы (заголовки)</td>
<td><code>/usr/include/mysql</code></td></tr>
<tr><td scope="row">Библиотеки</td>
<td><code>/usr/lib/mysql</code></td></tr>
<tr><td scope="row">Разные файлы поддержки (например, сообщения об ошибках и
файлы набора символов)</td>
<td><code>/usr/share/mysql</code></td></tr></tbody></table>

<p>Установка также создает пользователя и группу <code>mysql</code>.</p>
<p>Установка предыдущих версий MySQL, используя более старые пакеты,
возможно, создала конфигурационный файл <code>/usr/my.cnf</code>.
Перенесите настройки из него в <code>/etc/my.cnf</code>.</p>

<p>MySQL автоматически не запущен в конце процесса установки. Для
Red Hat Enterprise Linux, Oracle Linux, CentOS и Fedora
используют следующую команду, чтобы запустить MySQL:
<pre>
shell&gt; sudo service mysqld start
</pre>

<p>Для SLES команда та же самая, но имя службы отличается:
<pre>
shell&gt; sudo service mysql start
</pre>

<p>Если операционная система поддерживает systemd, команды
<span><strong>service</strong></span>, такие как
<span><strong>stop</strong></span>, <span><strong>start</strong></span>,
<span><strong>status</strong></span> и <span><strong>restart</strong></span>
должны использоваться, чтобы управлять службой сервера MySQL. Служба
<code>mysqld</code> включена по умолчанию, и она запускается в системе.
Заметьте, что определенные вещи могли бы работать по-другому в
systemd-платформами: например, изменение местоположения каталога данных могло
бы вызвать проблемы. См. <a href="#using-systemd">раздел 2.5.9</a>.
</p>

<p>При начальном запуске сервера происходит следующее, учитывая, что каталог
данных сервера пуст:</p>
<ul><li><p>Сервер инициализирован.</li>
<li>SSL-сертификаты и ключевые файлы произведены в каталоге данных.</li>
<li>Плагин <a href="security.html#validate-password-plugin">
validate_password</a> установлен и включен.</li>

<li>Учетная запись пользователя <code>'root'@'localhost'</code>
создается. Пароль для суперпользователя установлен и сохранен в файле журнала
ошибок. Чтобы показать это, используйте следующую команду для RHEL, Oracle
Linux, CentOS и Fedora:
<pre>
shell&gt; sudo grep 'temporary password' /var/log/mysqld.log
</pre>

<p>Используйте следующую команду для систем SLES:
<pre>
shell&gt; sudo grep 'temporary password' /var/log/mysql/mysqld.log
</pre>

<p>Следующий шаг: войти в систему с временным паролем и установить
пользовательский пароль для учетной записи пользователя:</p></li></ul>
<pre>
shell&gt; mysql -u root -p
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass4!';
</pre>

<p>Плагин MySQL <a href="security.html#validate-password-plugin">
validate_password</a> установлен по умолчанию. Это потребует, чтобы пароли
содержали по крайней мере одну прописную букву, одну строчную букву, одну
цифру, один специальный символ и что полная длина пароля по
крайней мере 8 символов.</p>

<p>Если что-то идет не так, как надо во время установки, Вы могли бы найти
информацию об отладке в файле журнала ошибок
<code>/var/log/mysqld.log</code>.</p>

<p>Для некоторых дистрибутивов Linux может быть необходимо увеличить предел
описателей файла, доступных
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>. См.
<a href="error.htm#not-enough-file-handles">раздел B.5.2.17</a>.</p>

<p><b>Установка библиотек клиента от разных версий MySQL. </b>
Возможно установить много версий библиотеки клиента, это касается случая,
если Вы хотите поддержать совместимость с более старыми приложениями.
Чтобы установить более старую библиотеку клиента, используйте опцию
<code>--oldpackage</code> для <span><strong>rpm</strong></span>.
Например, чтобы установить <code>mysql-community-libs-5.5</code> на EL6,
которая имеет <code>libmysqlclient.21</code> из
MySQL 8.0, используйте команду:
<pre>
shell&gt; rpm --oldpackage -ivh mysql-community-libs-5.5.50-2.el6.x86_64.rpm
</pre>

<p><b>Пакет отладки. </b>Специальная разновидность сервера MySQL, собранного
с <a href="extend.htm#dbug-package">debug package</a> была включена в пакеты
RPM сервера. Это выполняет отладку, проверку памяти и производит файл следа,
когда сервер работает. Чтобы использовать эту версию, запустите MySQL как
<code>/usr/sbin/mysqld-debug</code>, вместо того, чтобы запустить это как
службу или <code>/usr/sbin/mysqld</code>. См.
<a href="extend.htm#dbug-package">раздел 26.5.3</a>
для опций отладки, которые Вы можете использовать.</p>

<p><b>Восстановление RPM из исходных SRPM. </b>Исходный код пакетов SRPM для
MySQL доступен для скачивания. Они могут использоваться как есть, чтобы
восстановить MySQL RPM со стандартной цепочкой <span><strong>rpmbuild
</strong></span>.</p>

<h3><a name="linux-installation-debian"></a>2.5.5.
Установка MySQL на Linux, используя пакеты Debian от Oracle</h3>
<p>Oracle обеспечивает пакеты Debian для того, чтобы они установили MySQL на
системах Debian Linux. Пакеты доступны через два различных канала:</p>

<ul><li><p><a href="../../../dev.mysql.com/downloads/repo/apt/default.htm" target="_top">
MySQL APT Repository</a>. Это лучший метод для того, чтобы установить MySQL
на системах подобных Debian, поскольку это обеспечивает простой и удобный
способ установить и обновить продукты MySQL. Для деталей см.
<a href="#linux-installation-apt-repo">раздел 2.5.2</a>.</li>

<li><a href="../../../dev.mysql.com/downloads/default.htm" target="_top">MySQL Developer
Zone's Download Area</a>. Для деталей см.
<a href="#getting-mysql">раздел 2.1.2</a>.
Следующее некоторая информация о пакетах Debian, доступных там и инструкции
для того, чтобы установить их:</p>

<ul><li><p>Различные пакеты Debian обеспечены в MySQL Developer Zone
для того, чтобы они установили различные компоненты MySQL на различных
платформах Debian или Ubuntu (в настоящее время Debian 8 и Ubuntu 14 и 16
поддержаны). Привилегированный метод должен использовать связку архивов tar,
которая содержит пакеты, необходимые для основной установки MySQL. У связок
tar есть имена в формате
<code>mysql-server_<em><code>MVER</code></em>-<em><code>DVER</code></em>_<em><code>CPU</code></em>.deb-bundle.tar</code>.
<em><code>MVER</code></em> версия MySQL и
<em><code>DVER</code></em> версия Linux. <em><code>CPU</code></em>
указывает на тип процессора или семейство, для которого пакет создан, как
показано в следующей таблице:</p>

<a name="idm139965426227312"></a><p><b>Таблица 2.10. Идентификаторы CPU
пакетов установки MySQL для Debian и Ubuntu</b></p>
<table border="1">
<thead><tr><th scope="col"><em><code>CPU</code></em></th>
<th scope="col">Намеченный тип процессора</th></tr></thead>
<tbody><tr><td scope="row"><code>i386</code></td>
<td>Pentium или выше, 32 bit</td></tr>
<tr><td scope="row"><code>amd64</code></td>
<td>64-bit x86</td></tr></tbody></table></li>

<li><p>После загрузки tar-архива распакуйте его следующей командой:
<pre>
shell&gt; tar -xvf mysql-server_<em><code>MVER</code></em>-<em><code>DVER</code></em>_<em><code>CPU</code></em>.deb-bundle.tar
</pre></li>

<li>Вы, возможно, должны установить библиотеку <code>libaio</code>, если ее
еще нет в системе:
<pre>
shell&gt; sudo apt-get install libaio1
</pre></li>

<li>Предварительно сконфигурируйте пакет сервера MySQL следующей командой:
<pre>
shell&gt; sudo dpkg-preconfigure mysql-community-server_*.deb
</pre>
<p>Вас попросят предоставить пароль пользователя root для Вашей установки
MySQL. Вам могут также задать другие вопросы относительно установки.</p>

<p><a name="linux-installing-debian-password"></a>
Удостоверьтесь, что Вы помните пароль root, который Вы устанавливаете.
Пользователи, которые хотят установить пароль позже, могут оставить область
<span>password</span> пустой в диалоговом окне, и только нажать
<span>OK</span>. В этом случае доступ root к серверу заверен, используя
<a href="security.html#socket-authentication-plugin">MySQL
Socket Peer-Credential Authentication Plugin</a> для соединений,
используя файл сокета Unix. Вы можете установить пароль позже, используя
<a href="programs.htm#mysql-secure-installation"><span><strong>
mysql_secure_installation</strong></span></a>.</p></li>

<li><p>Для основной установки сервера MySQL, установите пакет общих файлов
базы данных, пакет клиента, метапакет клиента, пакет сервера и метапакет
сервера (в этом порядке!). Вы можете сделать это единственной командой:
<pre>
shell&gt; sudo dpkg -i mysql-{common,community-client,client,community-server,server}_*.deb
</pre>

<p>Если Вы предупреждаетесь относительно зависимостей
<span><strong>dpkg</strong></span>, Вы можете установить их используя
<span><strong>apt-get</strong></span>:
<pre>
sudo apt-get -f install
</pre>

<p>Вот где файлы установлены в системе:</p>
<ul><li><p>Все конфигурационные файлы (к примеру,
<code>my.cnf</code>) находятся в <code>/etc/mysql</code>.</li>

<li>Все двоичные модули, библиотеки, заголовки и т.д. находятся в
<code>/usr/bin</code> и <code>/usr/sbin</code>.</li>
<li>Каталог данных находится в <code>/var/lib/mysql</code>.
</p></li></ul></li></ul></li></ul>

<p>Дистрибутивы Debian MySQL также обеспечены другими поставщиками.
Знайте, что они могут отличаться от созданных Oracle, и что инструкции в этом
руководстве не обязательно относятся к их установке.</p>

<h3><a name="linux-installation-native"></a>2.5.6. Установка MySQL на Linux
из родных репозитариев программного обеспечения</h3>
<p>Много дистрибутивов Linux включают версию сервера MySQL, инструментов
клиента и компонентов развития в их родных репозитариях программного
обеспечения и могут быть установлены со стандартными системами управления
пакета платформ. Этот раздел обеспечивает исходные мысли для того, чтобы
установить MySQL, используя эти системы управления пакета.</p>

<p>Родные пакеты часто на несколько версий позади в настоящее время
доступного выпуска. Вы также обычно будете неспособны установить выпуски
(DMR), поскольку они обычно не делаются доступными в родных репозитариях.
Перед переходом мы рекомендуем, чтобы Вы проверили другие опции установки,
описанные в <a href="#linux-installation">разделе 2.5</a>.</p>

<p>Конкретные инструкции для дистрибутивов:</p>
<ul><li><p><span><strong>Red Hat Linux, Fedora, CentOS</strong></span></p>
<p>Для EL6 или EL7 и Fedora 23 или 24, Вы можете установить MySQL, используя
репозитарий MySQL Yum вместо родного репозитария программного обеспечения
платформы. См. <a href="#linux-installation-yum-repo">раздел
2.5.1</a>.</p>

<p>Для Red Hat и подобных дистрибутивов, дистрибутив MySQL разделен на многие
отдельные пакеты, <code>mysql</code> для инструментов клиента,
<code>mysql-server</code> для сервера и связанных инструментов и
<code>mysql-libs</code> для библиотек. Библиотеки требуются, если Вы хотите
обеспечить связь с различными языками и средами, такими как
Perl, Питон и другие.</p>

<p>Чтобы установить, используйте <span><strong>yum</strong></span>, чтобы
определить пакеты, которые Вы хотите установить. Например:
<pre>
root-shell&gt; yum install mysql mysql-server mysql-libs mysql-server
Loaded plugins: presto, refresh-packagekit
Setting up Install Process
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package mysql.x86_64 0:5.1.48-2.fc13 set to be updated
---&gt; Package mysql-libs.x86_64 0:5.1.48-2.fc13 set to be updated
---&gt; Package mysql-server.x86_64 0:5.1.48-2.fc13 set to be updated
--&gt; Processing Dependency: perl-DBD-MySQL for package: mysql-server-5.1.48-2.fc13.x86_64
--&gt; Running transaction check
---&gt; Package perl-DBD-MySQL.x86_64 0:4.017-1.fc13 set to be updated
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package ArchVersion RepositorySize
================================================================================
Installing:
 mysql x86_645.1.48-2.fc13 updates889 k
 mysql-libsx86_645.1.48-2.fc13 updates1.2 M
 mysql-serverx86_645.1.48-2.fc13 updates8.1 M
Installing for dependencies:
 perl-DBD-MySQLx86_644.017-1.fc13updates136 k

Transaction Summary
================================================================================
Install 4 Package(s)
Upgrade 0 Package(s)

Total download size: 10 M
Installed size: 30 M
Is this ok [y/N]: y
Downloading Packages:
Setting up and reading Presto delta metadata
Processing delta metadata
Package(s) data still to download: 10 M
(1/4): mysql-5.1.48-2.fc13.x86_64.rpm| 889 kB 00:04
(2/4): mysql-libs-5.1.48-2.fc13.x86_64.rpm | 1.2 MB 00:06
(3/4): mysql-server-5.1.48-2.fc13.x86_64.rpm | 8.1 MB 00:40
(4/4): perl-DBD-MySQL-4.017-1.fc13.x86_64.rpm| 136 kB 00:00
--------------------------------------------------------------------------------
Total 201 kB/s |10 MB 00:52
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
Installing : mysql-libs-5.1.48-2.fc13.x86_641/4
Installing : mysql-5.1.48-2.fc13.x86_64 2/4
Installing : perl-DBD-MySQL-4.017-1.fc13.x86_64 3/4
Installing : mysql-server-5.1.48-2.fc13.x86_644/4

Installed:
mysql.x86_64 0:5.1.48-2.fc13mysql-libs.x86_64 0:5.1.48-2.fc13
mysql-server.x86_64 0:5.1.48-2.fc13

Dependency Installed:
perl-DBD-MySQL.x86_64 0:4.017-1.fc13
Complete!
</pre>

<p>MySQL и сервер MySQL должны теперь быть установлены. Типовой
конфигурационный файл установлен в <code>/etc/my.cnf</code>. Скрипт init,
чтобы запустить и остановить сервер, будет установлен в
<code>/etc/init.d/mysqld</code>. Чтобы запустить сервер MySQL используют
<span><strong>service</strong></span>:
<pre>
root-shell&gt; service mysqld start
</pre>

<p>Чтобы позволить серверу быть запущенным и остановленным автоматически во
время начальной загрузки, используйте
<span><strong>chkconfig</strong></span>:
<pre>
root-shell&gt; chkconfig --levels 235 mysqld on
</pre>
<p>Это позволяет серверу MySQL быть запущенным (и остановленным)
автоматически на указанном уровне выполнения.</p>

<p>Таблицы базы данных будут автоматически созданы для Вас, если они еще не
существуют. Вы должны, однако, выполнить
<a href="programs.htm#mysql-secure-installation"><span><strong>
mysql_secure_installation</strong></span></a>, чтобы установить
пароли на Вашем сервере.</li>

<li><span><strong>Debian, Ubuntu, Kubuntu</strong></span></p>
<p>Для Debian 8 и Ubuntu 14 и 16 MySQL может быть установлен, используя
<a href="../../../dev.mysql.com/downloads/repo/apt/default.htm" target="_top">
MySQL APT Repository</a> вместо родного репозитария программного обеспечения
платформы. См. <a href="#linux-installation-apt-repo">раздел 2.5.2
</a>.</p>

<p>В Debian и связанных дистрибутивах, есть два пакета для MySQL в их
репозитариях программного обеспечения, <code>mysql-client</code> и
<code>mysql-server</code>, для компонентов клиента и сервера соответственно.
Вы должны определить версию явно, например, <code>mysql-client-5.1</code>,
чтобы гарантировать, что Вы устанавливаете версию MySQL, которую хотите.</p>

<p>Чтобы загрузить и установить, включая любые зависимости, используют
<span><strong>apt-get</strong></span>, определяя пакеты, которые
Вы хотите установить.</p>

<p>Перед установкой удостоверьтесь, что Вы обновляете Ваши индексные файлы
<code>apt-get</code>, чтобы гарантировать, что Вам загружают
последнюю доступную версию.</p>

<p>Типовая установка пакетов MySQL могла бы быть похожей на это (некоторые
разделы обрезаны для ясности):
<pre>
root-shell&gt; apt-get install mysql-client-5.1 mysql-server-5.1
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following packages were automatically installed and are no longer required:
linux-headers-2.6.28-11 linux-headers-2.6.28-11-generic
Use 'apt-get autoremove' to remove them.
The following extra packages will be installed:
bsd-mailx libdbd-mysql-perl libdbi-perl libhtml-template-perl
libmysqlclient15off libmysqlclient16 libnet-daemon-perl libplrpc-perl mailx
mysql-common postfix
Suggested packages:
dbishell libipc-sharedcache-perl tinyca procmail postfix-mysql postfix-pgsql
postfix-ldap postfix-pcre sasl2-bin resolvconf postfix-cdb
The following NEW packages will be installed
bsd-mailx libdbd-mysql-perl libdbi-perl libhtml-template-perl
libmysqlclient15off libmysqlclient16 libnet-daemon-perl libplrpc-perl mailx
mysql-client-5.1 mysql-common mysql-server-5.1 postfix
0 upgraded, 13 newly installed, 0 to remove and 182 not upgraded.
Need to get 1907kB/25.3MB of archives.
After this operation, 59.5MB of additional disk space will be used.
Do you want to continue [Y/n]? Y
Get: 1 http://gb.archive.ubuntu.com jaunty-updates/main mysql-common 5.1.30really5.0.75-0ubuntu10.5 [63.6kB]
Get: 2 http://gb.archive.ubuntu.com jaunty-updates/main libmysqlclient15off 5.1.30really5.0.75-0ubuntu10.5 [1843kB]
Fetched 1907kB in 9s (205kB/s)
Preconfiguring packages ...
Selecting previously deselected package mysql-common.
(Reading database ... 121260 files and directories currently installed.)
...
Processing 1 added doc-base file(s)...
Registering documents with scrollkeeper...
Setting up libnet-daemon-perl (0.43-1) ...
Setting up libplrpc-perl (0.2020-1) ...
Setting up libdbi-perl (1.607-1) ...
Setting up libmysqlclient15off (5.1.30really5.0.75-0ubuntu10.5) ...
Setting up libdbd-mysql-perl (4.008-1) ...
Setting up libmysqlclient16 (5.1.31-1ubuntu2) ...
Setting up mysql-client-5.1 (5.1.31-1ubuntu2) ...
Setting up mysql-server-5.1 (5.1.31-1ubuntu2) ...
 * Stopping MySQL database server mysqld
 ...done.
2013-09-24T13:03:09.048353Z 0 [Note] InnoDB: 8.0.1 started; log sequence number 1566036
2013-09-24T13:03:10.057269Z 0 [Note] InnoDB: Starting shutdown...
2013-09-24T13:03:10.857032Z 0 [Note] InnoDB: Shutdown completed; log sequence number 1566036
 * Starting MySQL database server mysqld
 ...done.
 * Checking for corrupt, not cleanly closed and upgrade needing tables.
...
Processing triggers for libc6 ...
ldconfig deferred processing now taking place
</pre>

<p><span><strong>apt-get</strong></span> установит много пакетов, включая
сервер MySQL, чтобы обеспечить типичные инструменты и окружающую среду
приложения. Это может означать, что Вы устанавливаете большое количество
пакетов в дополнение к основному пакету MySQL.</p>

<p>Во время установки будет создаваться начальная база данных, и Вы
будете запрошены относительно пароля MySQL root. Конфигурационный файл будет
создан в <code>/etc/mysql/my.cnf</code>.
Скрипт init будет создан в <code>/etc/init.d/mysql</code>.</p>

<p>Сервер будет уже запущен. Вы можете вручную запустить и
остановить использование сервера:
<pre>
root-shell&gt; service mysql [start|stop]
</pre>
<p>Служба будет автоматически добавлена к 2, 3 и 4 уровням выполнения,
со скриптами остановки в уровнях single, shutdown и restart.</p></li></ul>

<h3><a name="linux-installation-docker"></a>2.5.7.
Установка MySQL на Linux с docker</h3>
<p>Структура развертывания docker поддерживает легкую установку и
конфигурацию серверов MySQL. Для инструкций см.
<a href="../../../https@hub.docker.com/r/mysql/mysql-server/default.htm" target="_top">
https://hub.docker.com/r/mysql/mysql-server/</a>. Эта страница также
обеспечивает обширную документацию об использовании MySQL с docker.</p>

<h3><a name="linux-installation-juju"></a>2.5.8.
Установка MySQL на Linux с juju</h3>
<p>Структура развертывания juju поддерживает легкую установку и конфигурацию
серверов MySQL. Для инструкций см.
<a href="../../../https@jujucharms.com/mysql/default.htm" target="_top">
https://jujucharms.com/mysql/</a>.</p>

<h3><a name="using-systemd"></a>2.5.9.
Управление сервером MySQL с systemd</h3>
<p>Если Вы устанавливаете MySQL, используя дистрибутив RPM на следующих
платформах Linux, запуском сервера и завершением работы управляет systemd:
</p>

<ul><li><p>Red Hat Enterprise Linux 7; Oracle Linux 7; CentOS 7</li>
<li>SUSE Linux Enterprise Server 12</li>
<li>Fedora 23 и 24</p></li></ul>

<p>Чтобы получить поддержку systemd, если Вы устанавливаете из исходных
текстов, сконфигурируйте дистрибутив, используя опцию
<a href="#option_cmake_with_systemd"><code>-DWITH_SYSTEMD=1</code>
</a> для <span><strong>CMake</strong></span>. См.
<a href="#source-configuration-options">раздел 2.8.4</a>.</p>

<p>Следующее обсуждение затрагивает эти темы:</p>
<ul><li><p><a href="#systemd-overview">Краткий обзор systemd</a>
</li>

<li><a href="#systemd-mysql-configuration">
Конфигурирование MySQL используя systemd</a></li>
<li><a href="#systemd-multiple-mysql-instances">
Конфигурирование нескольких копий MySQL используя systemd</a></li>
<li><a href="#mysqld-safe-to-systemd-migration">
Перемещение от mysqld_safe к systemd</a></p></li></ul>

<h4><a name="systemd-overview"></a>Краткий обзор systemd</h4>
<p>systemd обеспечивает автоматический запуск сервера и завершение работы.
Это также включает ручное управлене сервером, используя команду
<span><strong>systemctl</strong></span>. Например:
<pre>
systemctl {start|stop|restart|status} mysqld
</pre>

<p>Альтернативно, используйте команду <span><strong>service</strong></span>:
<pre>
service mysqld {start|stop|restart|status}
</pre>

<p>Для <span><strong>systemctl</strong></span> или
<span><strong>service</strong></span>, если имя службы MySQL не
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>,
используют соответствующее имя (например, <code>mysql</code>
на SLES-системах).</p>

<p>Поддержка systemd включает эти файлы:</p>
<ul><li><p><code>mysqld.service</code>: конфигурация модуля службы systemd с
деталями о сервисе <code>mysqld</code>.</li>

<li><code>mysqld@.service</code>: аналог <code>mysqld.service</code>,
но используемый для того, чтобы управлять многими копиями MySQL.</li>
<li><code>mysqld.tmpfiles.d</code>: файл, содержащий информацию, чтобы
поддержать <code>tmpfiles</code>. Этот файл установлен под
именем <code>mysql.conf</code>.</li>

<li><code>mysqld_pre_systemd</code>: Скрипт для файла модуля. Помогает в
создании файла журнала ошибок, только если его местоположение соответствует
образцу /var/log/mysql*.log. В других случаях каталог журнала ошибок должен
быть перезаписываемым, или журнал ошибок должен присутствовать и быть
перезаписываемым для пользователя, выполняющего процесс
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.
</p></li></ul>

<p>На платформах, для которых поддержка systemd установлена, такие скрипты,
как <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong>
</span></a> скрипт инициализации System V не установлены, потому что они не
нужны. Например, <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe
</strong></span></a> может обработать перезапуски сервера, но systemd
обеспечивает ту же самую возможность и делает это совместимо с управлением
другими службами вместо того, чтобы использовать определенную
для приложения программу.</p>

<p>На платформах, для которых установлена поддержка systemd у systemd есть
способность управления многими копиями MySQL. Следовательно,
<a href="programs.htm#mysqld-multi"><span><strong>mysqld_multi</strong>
</span></a> и <span><strong>mysqld_multi.server</strong></span>
не установлены, потому что они не нужны.</p>

<h4><a name="systemd-mysql-configuration"></a>
Конфигурирование MySQL, используя systemd</h4>
<p>Чтобы добавить или изменить опции для MySQL, доступны эти методы:</p>

<ul><li><p>Используйте ограниченный systemd конфигурационный файл.</li>
<li>Примите меры, чтобы systemd установил переменные окружения для
процесса сервера MySQL.</li>
<li>Установите переменную systemd <code>MYSQLD_OPTS</code>.</p></li></ul>

<p>Чтобы использовать ограниченный systemd конфигурационный файл, создайте
каталог <code>/etc/systemd/system/mysqld.service.d</code>. В нем
создайте файл, который содержит раздел <code>[Service]</code>, перечисляющий
желаемые настройки. Например:
<pre>
[Service]
LimitNOFILE=<em><code>max_open_files</code></em>
PIDFile=<em><code>/path/to/pid/file</code></em>
Nice=<em><code>nice_level</code></em>
LimitCore=<em><code>core_file_limit</code></em>
Environment="LD_PRELOAD=<em><code>/path/to/malloc/library</code></em>"
Environment="TZ=<em><code>time_zone_setting</code></em>"
</pre>

<p>Обсуждение здесь использует <code>override.conf</code> как название этого
файла. Более новые версии systemd поддерживают следующую команду, которая
открывает редактор и разрешает Вам редактировать файл:
<pre>
systemctl edit mysqld
</pre>

<p>Всякий раз, когда Вы создаете или изменяете
<code>override.conf</code>, перезагрузите конфигурацию systemd,
затем скажите systemd перезапустить службу MySQL:
<pre>
systemctl daemon-reload
systemctl restart mysqld
</pre>

<p>С systemd метод конфигурации <code>override.conf</code>
должен использоваться для определенных параметров, а не настроек в группах
<code>[mysqld_safe]</code> или <code>[mysqld]</code> файла опций MySQL:</p>

<ul><li><p>Для некоторых параметров <code>override.conf</code> должен
использоваться, потому что сам systemd должен знать их значения, и он не
может считать файлы опции MySQL, чтобы получить их.</li>

<li>Параметры, которые определяют значения, устанавливаемые
только используя опции, известные
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>, должны быть определены, используя systemd, потому что нет никакого
соответствующего параметра для <a href="programs.htm#mysqld"><span><strong>
mysqld</strong></span></a>.</p></li></ul>

<p>Вы можете установить следующие параметры в <code>override.conf</code>:</p>
<ul><li><p>Чтобы определить файл ID процесса, надо использовать
<code>override.conf</code> и изменить оба параметра
<code>PIDFile</code> и <code>ExecStart</code>, задав
имя пути к файлу. Любая установка файла ID
процесса в файлах опции MySQL будет проигнорирована.</li>

<li>Чтобы определить число описателей файла, доступных серверу MySQL, надо
использовать <code>LimitNOFILE</code> в <code>override.conf</code> вместо
опции <a href="programs.htm#option_mysqld_safe_open-files-limit"><code>
--open-files-limit</code></a> для <a href="programs.htm#mysqld-safe"><span>
<strong>mysqld_safe</strong></span></a> или
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.</li>

<li>Чтобы установить максимальный основной размер файла, надо использовать
<code>LimitCore</code> в <code>override.conf</code> вместо опции
<a href="programs.htm#option_mysqld_safe_core-file-size"><code>
--core-file-size</code></a> в
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>.</li>

<li>Чтобы установить приоритет планирования для сервера MySQL, надо
использовать <code>Nice</code> в <code>override.conf</code> вместо
<a href="programs.htm#option_mysqld_safe_nice"><code>--nice</code></a> в
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>.</p></li></ul>

<p>Некоторые параметры MySQL сконфигурированы,
используя переменные окружения:</p>
<ul><li><p><code>LD_PRELOAD</code>: Установите эту переменную, если сервер
MySQL должен пользоваться определенной библиотекой распределения памяти.</li>
<li><code>TZ</code>: Установите эту переменную, чтобы определить часовой пояс
по умолчанию для сервера.</p></li></ul>

<p>Есть разные способы определить значение переменных среды, которые должны
быть заданы для процесса сервера MySQL, которым управляет systemd:</p>
<ul><li><p>Используйте строки <code>Environment</code> в файле
<code>override.conf</code>. Для синтаксиса см. пример в предыдущем
обсуждении, которое описывает, как использовать этот файл.</li>

<li>Определите значения в файле <code>/etc/sysconfig/mysql</code>
(создайте файл, если он не существует). Назначьте значения,
используя следующий синтаксис:
<pre>
LD_PRELOAD=<em><code>/path/to/malloc/library</code></em>
TZ=<em><code>time_zone_setting</code></em>
</pre>

<p>После изменения <code>/etc/sysconfig/mysql</code>
перезапустите сервер, чтобы сделать изменения эффективными:
<pre>
systemctl restart mysqld
</pre></li></ul>

<p>Чтобы определить опции для <a href="programs.htm#mysqld"><span><strong>
mysqld</strong></span></a>, не изменяя конфигурационные файлы systemd
непосредственно, установите или сбросьте переменную systemd
<code>MYSQLD_OPTS</code>. Например:
<pre>
systemctl set-environment MYSQLD_OPTS="--general_log=1"
systemctl unset-environment MYSQLD_OPTS
</pre>

<p>После изменения окружения systemd
перезапустите сервер, чтобы сделать изменения эффективными:
<pre>
systemctl restart mysqld
</pre>

<h4><a name="systemd-multiple-mysql-instances"></a>
Конфигурирование нескольких копий MySQL, используя systemd</h4>
<p>На платформах, для которых установлена поддержка systemd, у systemd есть
способность управления несколькими копиями MySQL. Следовательно,
<a href="programs.htm#mysqld-multi"><span><strong>mysqld_multi</strong>
</span></a> и <span><strong>mysqld_multi.server</strong></span>
не установлены, потому что они не нужны.</p>

<p>Чтобы использовать несколько копий, измените <code>my.cnf</code>, чтобы
включить конфигурацию ключевых опций для каждой копии. Например, чтобы
управлять двумя копиями <code>replica01</code> и <code>replica02</code>,
добавьте что-то вроде этого к файлу:
<pre>
[mysqld@replica01]
datadir=/var/lib/mysql-replica01
socket=/var/lib/mysql-replica01/mysql.sock
port=3307
log-error=/var/log/mysqld-replica01.log

[mysqld@replica02]
datadir=/var/lib/mysql-replica02
socket=/var/lib/mysql-replica02/mysql.sock
port=3308
log-error=/var/log/mysqld-replica02.log
</pre>

<p>Имена, показанные здесь, используют <code>@</code> как разделитель потому,
что это единственный разделитель, поддержанный systemd.</p>
<p>Копии тогда управляют нормальные команды systemd, такие как:
<pre>
systemctl start mysqld@replica01
systemctl start mysqld@replica02
</pre>

<p>Чтобы позволить копиям стартовать во время загрузки, сделайте это:
<pre>
systemctl enable mysqld@replica01
systemctl enable mysqld@replica02
</pre>

<p>Использование подстановочных знаков также поддержано. Например, эта
команда выводит на экран состояние всех копий:
<pre>
systemctl status 'mysqld@replica*'
</pre>

<p>Для управления многими копиями MySQL на той же самой машине, systemd
автоматически использует другой файл модуля (<code>mysqld@.service</code>
вместо <code>mysqld.service</code>). В этом файле модуля
<code>%I</code> и <code>%i</code> ссылаются на параметр, который передают
после маркера <code>@</code> и используется, чтобы управлять определенной
копией. Для команды такой, как эта:
<pre>
systemctl start mysqld@mysql1
</pre>

<p>systemd запускает сервер, используя такую команду:
<pre>
mysqld --defaults-group-suffix=@%I ...
</pre>

<p>Результат состоит в том, что группы опций
<code>[server]</code>, <code>[mysqld]</code> и
<code>[mysqld@mysql1]</code> считаны и используются для этой копии.</p>

<h4><a name="mysqld-safe-to-systemd-migration"></a>
Перемещение от mysqld_safe к systemd</h4>
<p>Так как <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe
</strong></span></a> не установлен, когда systemd используется, опции, ранее
определенные для той программы (например, в группе опций
<code>[mysqld_safe]</code>) должны быть определены иначе:</p>

<ul><li><p>Некоторые опции <a href="programs.htm#mysqld-safe"><span><strong>
mysqld_safe</strong></span></a> также поняты под
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
и могут быть перемещены от группы опций <code>[mysqld_safe]</code> в группу
<code>[mysqld]</code>. Это <span><em>не</em></span> включает
<code>--pid-file</code> или <code>--open-files-limit</code>.
Чтобы определить те опции, используйте файл <code>override.conf</code> для
systemd, описанный выше.</li>

<li>Для некоторых опций <a href="programs.htm#mysqld-safe"><span><strong>
mysqld_safe</strong></span></a> есть подобные у
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.
Например, опция <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe
</strong></span></a> для того, чтобы включить журналирование в
<code>syslog</code>: <a href="programs.htm#option_mysqld_safe_syslog"><code>
--syslog</code></a>. Для <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a> включите системную переменную
<a href="server.htm#sysvar_log_syslog"><code>log_syslog</code></a> вместо
этого. Для деталей см. <a href="server.htm#error-log">раздел 6.4.2</a>.</li>

<li>Опции <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe
</strong></span></a>, не понятые под
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>,
могут быть определены в <code>override.conf</code> или переменных окружения.
Например, с <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe
</strong></span></a>, если сервер должен пользоваться определенной
библиотекой распределения памяти, это определено, используя
<a href="programs.htm#option_mysqld_safe_malloc-lib"><code>--malloc-lib
</code></a>. Для установок, которые управляют сервером с systemd, установите
переменную окружения <code>LD_PRELOAD</code>, как описано выше.</p></li></ul>

<h2><a name="solaris-installation"></a>2.6. Установка MySQL на
Solaris и OpenSolaris</h2>
<p>MySQL на Solaris и OpenSolaris доступны во многих различных форматах.</p>

<ul><li><p>Для информации об установке с использованием родного формата
Solaris PKG см. <a href="#solaris-installation-pkg">раздел 2.6.1
</a>.</li>

<li>В OpenSolaris стандартные репозитарии включают пакеты MySQL, созданные
для OpenSolaris, которые включают записи для Service Management Framework
(SMF), чтобы включить управлению, используя команды SMF. См.
<a href="#solaris-installation-opensolaris">раздел 2.6.2</a>.</li>

<li>Чтобы использовать стандартный вариант <code>tar</code>,
примените примечания, обеспеченные в
<a href="#binary-installation">разделе 2.2</a>.
Проверьте примечания и подсказки в конце этого раздела для Solaris, в которых
Вы, возможно, нуждаетесь прежде или после установки.</p></li></ul>

<p>Получить двоичный дистрибутив MySQL для Solaris в формате tarball или PKG
можно на сайте <a href="../../../dev.mysql.com/downloads/mysql/8.0.html"
target="_top">http://dev.mysql.com/downloads/mysql/8.0.html</a>.</p>

<p>Дополнительные примечания, устанавливая и используя MySQL на Solaris:</p>
<ul><li><p>Если Вы хотите использовать MySQL с пользователем и группой
<code>mysql</code>, используйте <span><strong>groupadd</strong></span> и
<span><strong>useradd</strong></span>:
<pre>
groupadd mysql
useradd -g mysql -s /bin/false mysql
</pre></li>

<li>Если Вы устанавливаете MySQL, используя двоичный дистрибутив tar,
Вы можете столкнуться с проблемой даже прежде, чем Вы распаковали дистрибутив
MySQL, поскольку Solaris <span><strong>tar</strong></span>
не может обработать длинные имена файла. Это означает, что Вы можете видеть
ошибки, когда Вы пытаетесь распаковать MySQL.</p>

<p>Если это происходит, Вы должны использовать GNU <span><strong>tar</strong>
</span> (<span><strong>gtar</strong></span>), чтобы распаковать дистрибутив.
В Solaris 10 и OpenSolaris <span><strong>gtar</strong></span>
обычно располагается в <code>/usr/sfw/bin/gtar</code>,
но, возможно, не будет включен в определение пути по умолчанию.</li>

<li>Используя Solaris 10 для x86_64, Вы должны установить любые файловые
системы, на которых Вы намереваетесь сохранить файлы <code>InnoDB</code>, с
опцией <code>forcedirectio</code>. По умолчанию установка сделана без этой
опции. Иначе будет существенное понижение скорости работы, используя
механизм хранения <code>InnoDB</code> на этой платформе.</li>

<li>Если Вы хотели бы, чтобы MySQL запустился автоматически, Вы можете
скопировать <code>support-files/mysql.server</code> в
<code>/etc/init.d</code> и создайте символическую ссылку к
<code>/etc/rc3.d/S99mysql.server</code>.</li>

<li>Если слишком много процессов пытаются соединиться очень быстро с
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>,
Вы должны видеть эту ошибку в журнале MySQL:
<pre>
Error in accept: Protocol error
</pre>

<p>Вы могли бы попытаться запустить сервер с опцией
<a href="server.htm#sysvar_back_log"><code>--back_log=50</code></a>
как обходное решение для этого.</li>

<li>Чтобы сконфигурировать основные файлы в Solaris, Вы должны использовать
команду <span><strong>coreadm</strong></span>. Из-за значений безопасности
производства ядра на <code>setuid()</code>, по умолчанию, Solaris
не поддерживает файлы ядра на программах <code>setuid()</code>.
Однако, Вы можете изменить это поведение, используя
<span><strong>coreadm</strong></span>. Если Вы включаете
<code>setuid()</code> файлы ядра для текущего пользователя, они будут
произведены, используя режим 600 и принадлежать суперпользователю.
</p></li></ul>

<h3><a name="solaris-installation-pkg"></a>2.6.1.
Установка MySQL на Solaris, применяя Solaris PKG</h3>
<p>Вы можете установить MySQL на Solaris и OpenSolaris, используя
двоичный формат Solaris PKG вместо tar-архива.</p>

<p>У пакета установки есть зависимость от Oracle Developer Studio 12.5
Runtime Libraries, которые должны быть установлены прежде, чем Вы выполните
пакет установки MySQL. См. опции загрузки для Oracle Developer Studio
<a href="../../../www.oracle.com/technetwork/server-storage/developerstudio/downloads/index.html"
target="_top">здесь</a>. Пакет установки позволяет Вам устанавливать только
библиотеки выполнения вместо полной Oracle Developer Studio, см.
<a href="../../../https@docs.oracle.com/cd/E60778_01/html/E60743/gouag.html#scrolltoc"
target="_top">Installing Only the Runtime Libraries on Oracle Solaris 10 and Linux</a> и
<a href="../../../https@docs.oracle.com/cd/E60778_01/html/E60743/gozsu.html#scrolltoc"
target="_top">Installing Only the Runtime Libraries on Oracle Solaris 11</a>.
</p>

<p>Чтобы использовать этот пакет, загрузите и распакуйте соответствующий
файл <code>mysql-VERSION-solaris11-PLATFORM.pkg.gz</code>. Например:
<pre>
shell&gt; gunzip mysql-<em><code>8.0.1</code></em>-solaris11-x86_64.pkg.gz
</pre>

<p>Чтобы установить новый пакет, используйте
<span><strong>pkgadd</strong></span> и следуйте за экранными подсказками. У
Вас должны быть привилегии root:
<pre>
shell&gt; pkgadd -d mysql-<em><code>8.0.1</code></em>-solaris11-x86_64.pkg

The following packages are available:
1 mysql MySQL Community Server (GPL)
  (i86pc) 8.0.1

Select package(s) you wish to process (or 'all' to process
all packages). (default: all) [?,??,q]:
</pre>

<p>Установщик PKG устанавливает все необходимые файлы и инструменты, а затем
инициализирует Вашу базу данных, если ее нет. Чтобы завершить установку, Вы
должны установить пароль root для MySQL как предусмотрено в инструкциях в
конце установки. Альтернативно, Вы можете выполнить скрипт
<a href="programs.htm#mysql-secure-installation"><span><strong>
mysql_secure_installation</strong></span></a>, который идет с установкой.</p>

<p>По умолчанию пакет PKG устанавливает MySQL под <code>/opt/mysql</code>.
Вы можете изменить только путь корня установки, используя
<span><strong>pkgadd</strong></span>, который может использоваться, чтобы
установить MySQL в иной зоне Solaris. Если Вы должны установить в
определенный каталог, используйте двоичный дистрибутив
<span><strong>tar</strong></span>.</p>

<p><code>pkg</code> копирует подходящий скрипт запуска для MySQL в
<code>/etc/init.d/mysql</code>. Чтобы включить MySQL в запуск и завершение
работы автоматически, Вы должны создать ссылку между этим файлом и каталогами
init. Например, чтобы гарантировать безопасный запуск и завершение работы
MySQL Вы могли использовать следующие команды, чтобы
добавить правильные ссылки:
<pre>
shell&gt; ln /etc/init.d/mysql /etc/rc3.d/S91mysql
shell&gt; ln /etc/init.d/mysql /etc/rc0.d/K02mysql
</pre>

<p>Чтобы удалить MySQL, имя пакета <code>mysql</code>.
Вы можете использовать это в комбинации с
<span><strong>pkgrm</strong></span>, чтобы удалить установку.</p>

<p>Чтобы обновить, используя формат файла пакета Solaris,
Вы должны удалить существующую установку прежде, чем установить обновленный
пакет. Удаление пакета не удаляет существующую информацию о базе данных,
только сервер и файлы поддержки.
Типичная последовательность обновления поэтому:
<pre>
shell&gt; mysqladmin shutdown
shell&gt; pkgrm mysql
shell&gt; pkgadd -d mysql-<em><code>8.0.1</code></em>-solaris11-x86_64.pkg
shell&gt; mysqld_safe &amp;
shell&gt; mysql_upgrade
</pre>

<p>Вы должны проверить примечания в
<a href="#upgrading-downgrading">
разделе 2.10</a> прежде, чем выполнить любое обновление.</p>

<h3><a name="solaris-installation-opensolaris"></a>2.6.2. Установка MySQL на
OpenSolaris через IPS</h3>
<p>OpenSolaris включает стандартные пакеты для MySQL в основном репозитарии.
Пакеты MySQL основаны на определенном выпуске MySQL и обновлены периодически.
Для последнего выпуска Вы должны использовать Solaris PKG, <code>tar</code>
или исходные тексты. Пакеты OpenSolaris включают файлы SMF так, чтобы Вы
могли легко управлять своей установкой MySQL, включая автоматический запуск и
восстановление, используя родные инструменты управления службы.</p>

<p>Чтобы установить MySQL на OpenSolaris, используйте
<span><strong>pkg</strong></span>. Вы должны быть зарегистрированы как root
или использовать <span><strong>pfexec</strong></span>,
как показано в примере ниже:
<pre>
shell&gt; pfexec pkg install SUNWmysql80
</pre>

<p>Пакет установил три отдельных пакета,
<code>SUNWmysql80lib</code>, который содержит библиотеки клиента MySQL,
<code>SUNWmysql80r</code>, который содержит компоненты, включая SMF и
конфигурационные файлы, и <code>SUNWmysql80u</code>, который содержит
скрипты, утилиты и прочие файлы. Вы можете установить эти пакеты
индивидуально, если Вы нуждаетесь только в соответствующих компонентах.</p>

<p>Файлы MySQL установлены в <code>/usr/mysql</code>, который имеет сслылки
из подкаталогов (<code>bin</code>, <code>lib</code>, ...) на каталоги,
специфичные для конкретной версии. Для MySQL 8.0 полная установка расположена
в <code>/usr/mysql/8.0</code>. Каталог данных по умолчанию
<code>/var/mysql/8.0/data</code>. Конфигурационный файл установлен в
<code>/etc/mysql/8.0/my.cnf</code>. Это расположение разрешает многим версиям
MySQL быть установленными, не перезаписывая данные от других версий.</p>

<p>После того, как пакет установлен, Вы должны инициализировать каталог
данных (см. <a href="#data-directory-initialization">раздел 2.9.1
</a>) и используйте <a href="programs.htm#mysql-secure-installation"><span>
<strong>mysql_secure_installation</strong></span></a>,
чтобы защитить Вашу установку.</p>

<h4><a name="idm139965425881536"></a>Использование SMF, чтобы управлять
Вашей установкой MySQL</h4>
<p>После того, как установлен пакет, Вы можете запустить и остановить свой
сервер MySQL, используя установленную конфигурацию SMF. Имя службы
<code>mysql</code>, или если Вы устанавливали много копий, Вы должны
использовать полное имя версии, например, <code>mysql:version_80</code>.
Запустить и позволить MySQL быть запущенным во время загрузки:
<pre>
shell&gt; svcadm enable mysql
</pre>

<p>Чтобы смотреть журналы SMF, используйте эту команду:
<pre>
shell&gt; svcadm enable svc:/application/database/mysql
</pre>

<p>Чтобы проверить, работает ли служба MySQL:</p>
<p>
shell&gt; svcs -xv
svc:/application/database/mysql
</p>

<p>Отключить MySQL от запуска в ходе загрузки и закрыть сервер MySQL,
если он работает:
<pre>
shell&gt; svcadm disable mysql
</pre>

<p>Чтобы перезапустить MySQL, например, после того, как конфигурационный файл
изменяется, используйте опцию <code>restart</code>:
<pre>
shell&gt; svcadm restart mysql
</pre>

<p>Вы можете также использовать SMF, чтобы сконфигурировать каталог данных и
включить полный 64-битный режим. Например, чтобы установить каталог
данных, используемый MySQL:
<pre>
shell&gt; svccfg
svc:&gt; select mysql:version_80
svc:/application/database/mysql:version_80&gt; setprop mysql/data=/data0/mysql
</pre>

<p>По умолчанию 32-битные исполняемые модули используются. Чтобы включить
64-битный сервер на 64-битных платформах, установите параметр
<code>enable_64bit</code>. Например:
<pre>
svc:/application/database/mysql:version_80&gt; setprop mysql/enable_64bit=1
</pre>

<p>Вы должны освежить SMF после установки этих опций:
<pre>
shell&gt; svcadm refresh mysql
</pre>

<h2><a name="freebsd-installation"></a>2.7. Установка MySQL на FreeBSD</h2>
<p>Этот раздел предоставляет информацию об установке MySQL на
разновидностях Unix FreeBSD.</p>

<p>Вы можете установить MySQL на FreeBSD при использовании двоичного
дистрибутива, обеспеченного Oracle. Для получения дополнительной информации
см. <a href="#binary-installation">раздел 2.2</a>.</p>

<p>Самый легкий способ установить MySQL, это использовать порты
<a href="programs.htm#mysql-server"><span><strong>mysql-server</strong>
</span></a> и <code>mysql-client</code>, доступные в
<a href="../../../www.freebsd.org/default.htm" target="_top">
http://www.freebsd.org/</a>. Использование этих портов приносит
Вам следующую пользу:</p>

<ul><li><p>Рабочий MySQL со всей оптимизацией, который работает с Вашей
версией FreeBSD.</li>
<li>Автоматическая конфигурация и построение.</li>
<li>Скрипты запуска, установленные в <code>/usr/local/etc/rc.d</code>.</li>

<li>Способность использовать <code>pkg_info -L</code>, чтобы увидеть,
какие файлы установлены.</li>
<li>Способность использовать <code>pkg_delete</code>, чтобы
удалить MySQL, если Вы больше не хотите его на своей машине.</p></li></ul>

<p>Процесс сборки MySQL требует GNU make (<span><strong>gmake</strong>
</span>). Если GNU <span><strong>make</strong></span> недоступна, Вы должны
установить ее прежде, чем собрать MySQL.</p>

<p>Установить с использованием системы портов:
<pre>
# cd /usr/ports/databases/mysql80-server
# make
...
# cd /usr/ports/databases/mysql80-client
# make
...
</pre>

<p>Стандартная установка порта помещает сервер в
<code>/usr/local/libexec/mysqld</code> со скриптом запуска для сервера MySQL,
помещенным в <code>/usr/local/etc/rc.d/mysql-server</code>.</p>

<p>Некоторые дополнительные примечания по выполнению BSD:</p>
<ul><li><p>Удалить MySQL после установки, используя систему портов:
<pre>
# cd /usr/ports/databases/mysql80-server
# make deinstall
...
# cd /usr/ports/databases/mysql80-client
# make deinstall
...
</pre></li>

<li>Если Вы получаете проблемы с текущей датой в MySQL, установка
переменной <code>TZ</code> должна помочь. См.
<a href="programs.htm#environment-variables">раздел 5.9</a>.</p></li></ul>

<h2><a name="source-installation"></a>2.8.
Установка MySQL из исходных текстов</h2>
<p>Для списка систем, на которых MySQL, как известно, работает см.
<a href="../../../www.mysql.com/support/supportedplatforms/database.html"
target="_top">http://www.mysql.com/support/supportedplatforms/database.html
</a>.</p>

<p>Прежде, чем Вы начнете установку из исходных текстов, проверьте,
производит ли Oracle предварительно собранное двоичный дистрибутив для Вашей
платформы и работает ли это. Мы прикладываем много усилий в обеспечение того,
что наши сборки созданы с самыми лучшими опциями для оптимальной работы.
Инструкции для того, чтобы установить двоичные дистрибутива доступны в
<a href="#binary-installation">разделе 2.2</a>.</p>

<p>Исходный код MySQL содержит внутреннюю документацию, использующую
Doxygen. Произведенный контент Doxygen доступен на
<a href="../../../dev.mysql.com/doc/dev/mysql-server/latest/default.htm" target="_top">
http://dev.mysql.com/doc/dev/mysql-server/latest/</a>.
Также возможно произвести этот контент в местном масштабе из исходного
дистрибутива MySQL, используя инструкции в
<a href="#source-installation-doxygen">разделе 2.8.7</a>.</p>

<h3><a name="idm139965425829104"></a>Методы установки из исходных текстов</h3>
<p>Есть два метода для того, чтобы установить MySQL из исходных текстов:</p>
<ul><li><p>Используйте стандартный исходный дистрибутив MySQL. Чтобы получить
его, см. <a href="#getting-mysql">раздел 2.1.2</a>.
Для инструкций по сборке из стандартного дистрибутива см.
<a href="#installing-source-distribution">раздел 2.8.2</a>.</p>

<p>Стандартные дистрибутивы доступны как сжатые файлы
<span><strong>tar</strong></span>, Zip-архивы и RPM-пакеты.
У файлов дистрибутива есть названия формы
<code>mysql-<em><code>VERSION</code></em>.tar.gz</code>,
<code>mysql-<em><code>VERSION</code></em>.zip</code> или
<code>mysql-<em><code>VERSION</code></em>.rpm</code>, где
<em><code>VERSION</code></em> число вроде <code>8.0.1</code>.
Имена файла для исходных текстов можно отличить от имен для предварительно
собранных двоичных дистрибутивов тем, что имена исходных текстов являются
общими и не включают имени платформы, тогда как имена двоичных дистрибутивов
включают имя платформы, указывающее на тип системы, для которой предназначен
дистрибутив (например, <code>pc-linux-i686</code> или <code>winx64</code>).
</li>

<li>Используйте дерево развития MySQL. Для информации о сборке из одного из
деревьев развития см. <a href="#installing-development-tree">
раздел 2.8.3</a>.</p></li></ul>

<h3><a name="idm139965425815712"></a>Системные требования установки</h3>
<p>Установка MySQL из исходных текстов требует нескольких средств разработки.
Некоторые из этих инструментов необходимы независимо от того, используете ли
Вы стандартные исходные тексты или дерево развития. Другие требования
зависят от того, который метод установки Вы используете.</p>

<p>Чтобы установить MySQL из исходных текстов, следующие системные требования
должны быть удовлетворены, независимо от метода установки:</p>

<ul><li><p><span><strong>CMake</strong></span>, который используется в
качестве структуры сборки на всех платформах. <span><strong>CMake</strong>
</span> можно скачать с <a href="../../../www.cmake.org/default.htm" target="_top">
http://www.cmake.org</a>.</li>

<li>Хорошая программа <span><strong>make</strong></span>.
Хотя некоторые платформы идут со своим собственным
<span><strong>make</strong></span>, настоятельно рекомендовано применять GNU
<span><strong>make</strong></span> 3.75 или выше.
Это может уже быть доступно на Вашей системе как
<span><strong>gmake</strong></span>. GNU <span><strong>make</strong></span>
скачивается с <a href="../../../www.gnu.org/software/make/default.htm" target="_top">
http://www.gnu.org/software/make/</a>.</li>

<li>Исходный текст MySQL 8.0 использует особенности C++11.
Чтобы включить хороший уровень поддержки C++11 на всех поддержанных
платформах, следующие минимальные версии компилятора применяются:</p>

<ul><li><p>GCC: 4.8 или выше.</li>
<li>Clang: 3.4 или выше (Xcode 7 в OS X).</li>
<li>Solaris Studio: 12.4 или выше (сборка только клиента Solaris).</li>
<li>Visual Studio: 2015.</li>
<li>CMake: В Windows необходимая версия Visual Studio
приводит к необходимой версии CMake 3.2.3 или выше.</p></li></ul></li>

<li><p>Библиотеки Boost C++ обязаны создавать MySQL (но не использовать его).
Текущая версия Boost должна быть установлена. Чтобы получить Boost
и его инструкции по установке, посетите
<a href="../../../www.boost.org/default.htm" target="_top">http://www.boost.org</a>.
После того, как Boost установлено, создавайте систему, где файлы Boost
расположены, определяя опцию
<a href="#option_cmake_with_boost"><code>WITH_BOOST</code></a> в
<span><strong>CMake</strong></span>. Например:
<pre>
shell&gt; cmake . -DWITH_BOOST=/usr/local/boost_1_60_0
</pre>
<p>Скорректируйте путь по мере необходимости, чтобы
соответствовать Вашей установке.</li>

<li>Достаточная свободная память. Если Вы сталкиваетесь с проблемами, такими
как <span><span>internal compiler error</span></span>, собирая большие
исходные файлы, может случиться так, что у Вас есть слишком маленькая
память. Собирая на виртуальной машине, попытайтесь
увеличить распределение памяти.</li>

<li>Perl необходим, если Вы намереваетесь выполнить испытательные скрипты.
Большинство Unix-систем включают Perl. В Windows
Вы можете использовать такую версию, как ActiveState Perl.</p></li></ul>

<p>Чтобы установить MySQL из стандартного исходного дистрибутива, один из
следующих инструментов обязан распаковать файл дистрибутива:</p>
<ul><li><p>Для файлов <code>.tar.gz</code>: GNU <code>gunzip</code>
расжимает архив и соответствующий
<span><strong>tar</strong></span> для распаковки. Если Ваша программа
<span><strong>tar</strong></span> понимает опцию <code>z</code>,
это может расжать и распаковать файл.</p>

<p>GNU <span><strong>tar</strong></span> работает.
Стандартная <span><strong>tar</strong></span>, предоставленная некоторыми
операционными системами, не в состоянии распаковать длинные имена файла.
Вы должны загрузить и установить GNU <span><strong>tar</strong></span>
или при наличии, использовать предварительно установленную версию GNU tar.
Обычно это доступно как <span><strong>gnutar</strong></span>,
<span><strong>gtar</strong></span> или как
<span><strong>tar</strong></span> в каталоге GNU или Free Software, например,
such as <code>/usr/sfw/bin</code> или <code>/usr/local/bin</code>. GNU
<span><strong>tar</strong></span> доступен на
<a href="../../../www.gnu.org/software/tar/default.htm" target="_top">
http://www.gnu.org/software/tar/</a>.</li>

<li>Для архивов <code>.zip</code>: <span><strong>WinZip</strong></span>
или другой инструмент, который может читать файлы <code>.zip</code>.</li>
<li>Для пакетов <code>.rpm</code>: программа <span><strong>rpmbuild</strong>
</span>, используемая, чтобы создать дистрибутив, распаковывает это.
</p></li></ul>

<p>Чтобы установить MySQL из дерева развития, следующие
дополнительные инструменты требуются:</p>
<ul><li><p>Система управления Git обязана получать исходный код развития.
<a href="../../../https@help.github.com/default.htm" target="_top">GitHub Help</a>
обеспечивает инструкции для загрузки и установки Git на различных платформах.
MySQL официально присоединился к GitHub в сентябре 2014. Для получения
дополнительной информации о перемещении MySQL к GitHub, ознакомьтесь с
объявлением в блоге MySQL Release Engineering:
<a href="../../../mysqlrelease.com/2014/09/mysql-on-github/default.htm" target="_top">
MySQL on GitHub</a>.</li>

<li><span><strong>bison</strong></span> 2.1 или выше доступен на
<a href="../../../www.gnu.org/software/bison/default.htm" target="_top">
http://www.gnu.org/software/bison/</a>. Версия 1 более не поддерживается.
Используйте последнюю версию <span><strong>bison</strong></span>
где только возможно, если Вы испытываете проблемы, обновляйтесь до более
поздней версии, вместо того, чтобы вернуться к более ранней.</p>

<p><span><strong>bison</strong></span> доступен на
<a href="../../../www.gnu.org/software/bison/default.htm" target="_top">
http://www.gnu.org/software/bison/</a>. <code>bison</code> для Windows
можно скачать с <a href="../../../gnuwin32.sourceforge.net/packages/bison.htm"
target="_top">http://gnuwin32.sourceforge.net/packages/bison.htm</a>.
Загрузите пакет, маркированный как <span><span>Complete package, excluding
sources</span></span>. В Windows местоположение по умолчанию для
<span><strong>bison</strong></span> <code>C:\Program Files\GnuWin32</code>.
Некоторые утилиты могут быть не в состоянии найти <span><strong>bison
</strong></span> из-за пробела в имени каталога. Кроме того, Visual Studio
может просто зависнуть, если есть пробелы в пути. Вы можете решить эти
проблемы, устанавливая в каталог, который не содержит пробела,
например, в <code>C:\GnuWin32</code>.</li>

<li>В OpenSolaris и Solaris Express <span><strong>m4</strong></span>
должен быть установлен в дополнение к <span><strong>bison</strong></span>.
<span><strong>m4</strong></span> доступен на
<a href="../../../www.gnu.org/software/m4/default.htm" target="_top">
http://www.gnu.org/software/m4/</a>.</p></li></ul>

<p>Если Вы должны установить какие-либо программы, измените Вашу переменную
окружения <code>PATH</code>, чтобы включить любые каталоги, в которых
расположены программы. См.
<a href="programs.htm#setting-environment-variables">раздел 5.2.10</a>.</p>

<p>Если Вы сталкиваетесь с проблемами и потребностью зарегистрировать отчет
об ошибках, пожалуйста, используйте инструкции в
<a href="intro.htm#bug-reports">разделе 1.7</a>.</p>

<h3><a name="source-installation-layout"></a>2.8.1.
Расположение MySQL для исходной установки</h3>
<p>По умолчанию когда Вы устанавливаете MySQL после компилирования из
исходных текстов, шаг установки устанавливает файлы в
<code>/usr/local/mysql</code>. Составляющие местоположения в соответствии с
каталогом установки те же самые, что касаются двоичных дистрибутивов. См.
<a href="#binary-installation-layout">таблицу
2.3</a> и <a href="#windows-installation-layout">раздел 2.3.1</a>.
Чтобы сконфигурировать местоположения установки, отличающиеся от значений по
умолчанию, используйте опции, описанные в
<a href="#source-configuration-options">разделе 2.8.4</a>.</p>

<h3><a name="installing-source-distribution"></a>2.8.2. Установка MySQL,
используя стандартные исходные тексты</h3>
<p>Установить MySQL из стандартного исходного дистрибутива:</p>

<ol type="1"><li><p>Проверьте, что Ваша система удовлетворяет требованиям
инструментов, перечисленные в <a href="#source-installation">
разделе 2.8</a>.</li>
<li>Получите файл дистрибутива, используя инструкции в
<a href="#getting-mysql">разделе 2.1.2</a>.</li>

<li>Сконфигурируйте, соберите и установите дистрибутив, используя
инструкции в этом разделе.</li>
<li>Выполните постпроцессы установки, используя инструкции в
<a href="#postinstallation">разделе 2.9</a>.</p></li></ol>

<p>В MySQL 8.0 <span><strong>CMake</strong></span> используется в качестве
структуры сборки на всех платформах. Инструкции, данные здесь, должны
позволить Вам произвести рабочую установку. Для дополнительной информации об
использовании <span><strong>CMake</strong></span> см.
<a href="../../../dev.mysql.com/doc/internals/en/cmake.html" target="_top">
http://dev.mysql.com/doc/internals/en/cmake.html</a>.</p>

<p>Если Вы начинаете с исходных текстов в RPM, используйте следующую команду,
чтобы сделать двоичный RPM, который Вы можете установить. Если у Вас нет
<span><strong>rpmbuild</strong></span>, используйте
<span><strong>rpm</strong></span>.
<pre>
shell&gt; rpmbuild --rebuild --clean MySQL-<em><code>VERSION</code></em>.src.rpm
</pre>

<p>Результат один или более двоичных пакетов RPM, которые Вы устанавливаете,
как обозначено в <a href="#linux-installation-rpm">разделе 2.5.4
</a>.</p>

<p>Последовательность установки из сжатого файла
<span><strong>tar</strong></span> или архива Zip
подобна процессу установки из двоичного дистрибутива (см.
<a href="#binary-installation">раздел 2.2</a>), за исключением
того, что это используется на всех платформах и включает шаги, чтобы
сконфигурировать и собрать дистрибутив. Например, со сжатым исходным файлом
<span><strong>tar</strong></span> в Unix, основная последовательность команд
установки похожа на это:
<pre>
# Preconfiguration setup
shell&gt; groupadd mysql
shell&gt; useradd -r -g mysql -s /bin/false mysql

# Beginning of source-build specific instructions
shell&gt; tar zxvf mysql-<em><code>VERSION</code></em>.tar.gz
shell&gt; cd mysql-<em><code>VERSION</code></em>
shell&gt; cmake .
shell&gt; make
shell&gt; make install
# End of source-build specific instructions

# Postinstallation setup
shell&gt; cd /usr/local/mysql
shell&gt; chown -R mysql .
shell&gt; chgrp -R mysql .
shell&gt; bin/mysqld --initialize --user=mysql
shell&gt; bin/mysql_ssl_rsa_setup
shell&gt; chown -R root .
shell&gt; chown -R mysql data
shell&gt; bin/mysqld_safe --user=mysql &amp;
# Next command is optional
shell&gt; cp support-files/mysql.server /etc/init.d/mysql.server
</pre>

<p>Процедура, показанная здесь, не настраивает паролей для учетных записей
MySQL. После следования процеде, продолжите работать по
<a href="#postinstallation">разделу 2.9</a>
для постустановки и тестирования.</p>

<h4><a name="idm139965425713344"></a>Выполните конфигурацию перед установкой
</h4>
<p>В Unix установите пользователя и группу <code>mysql</code>, которая будет
использоваться, чтобы выполнить сервер MySQL и иметь каталог базы данных. Для
деталей см. <a href="#binary-installation">раздел 2.2</a>.
Затем выполните следующие шаги как пользователь <code>mysql</code>,
за исключением отмеченного.</p>

<h4><a name="idm139965425708224"></a>Получите и распакуйте дистрибутив</h4>
<p>Выберите каталог, в соответствии с которым Вы хотите распаковать
дистрибутив и перейдите в него.</p>

<p>Получите файл дистрибутива, используя инструкции в
<a href="#getting-mysql">разделе 2.1.2</a>.</p>
<p>Распакуйте дистрибутив в текущий каталог:</p>

<ul><li><p>Чтобы распаковать сжатый файл <span><strong>tar</strong></span>,
<span><strong>tar</strong></span> может рассжать и распаковать дистрибутив,
если это имеет опцию <code>z</code>:
<pre>
shell&gt; tar zxvf mysql-<em><code>VERSION</code></em>.tar.gz
</pre>

<p>Если Ваш <span><strong>tar</strong></span> не имеет опции
<code>z</code>, используйте <span><strong>gunzip</strong></span>,
чтобы расжать дистрибутив и <span><strong>tar</strong></span>,
чтобы его распаковать:
<pre>
shell&gt; gunzip &lt; mysql-<em><code>VERSION</code></em>.tar.gz | tar xvf -
</pre>

<p>Альтернативно, <span><strong>CMake</strong></span> может
расжать и распаковать дистрибутив:
<pre>
shell&gt; cmake -E tar zxvf mysql-<em><code>VERSION</code></em>.tar.gz
</pre></li>

<li>Чтобы распаковать архив Zip, используйте
<span><strong>WinZip</strong></span> или другой инструмент, который может
читать файлы <code>.zip</code>.</p></li></ul>
<p>Распаковка файла дистрибутива создает каталог
<code>mysql-<em><code>VERSION</code></em></code>.</p>

<h4><a name="idm139965425688336"></a>Сконфигурируйте дистрибутив</h4>
<p>Перейдите в каталог распакованного дистрибутива:
<pre>
shell&gt; cd mysql-<em><code>VERSION</code></em>
</pre>

<p>Сконфигурируйте исходный каталог. Минимальная команда конфигурации не
включает опций, чтобы переопределить значения по умолчанию конфигурации:
<pre>
shell&gt; cmake .
</pre>

<p>В Windows определите среду проектирования. Например, следующие команды
конфигурируют MySQL для 32 или 64-битной сборки:
<pre>
shell&gt; cmake . -G "Visual Studio 12 2013"
shell&gt; cmake . -G "Visual Studio 12 2013 Win64"
</pre>

<p>В OS X используйте Xcode IDE:
<pre>
shell&gt; cmake . -G Xcode
</pre>

<p>Когда Вы выполняете <span><strong>cmake</strong></span>, Вы могли бы
хотеть добавить опции к командной строке. Вот некоторые примеры:</p>
<ul><li><p><a href="#option_cmake_build_config"><code>
-DBUILD_CONFIG=mysql_release</code></a>:
Сконфигурируйте источник с теми же самыми опции, используемыми Oracle, чтобы
произвести официальные двоичные дистрибутивы MySQL.</li>

<li><a href="#option_cmake_cmake_install_prefix"><code>
-DCMAKE_INSTALL_PREFIX=<em><code>dir_name</code></em></code></a>:
Сконфигурируйте дистрибутив для установки под особым местоположением.</li>

<li><a href="#option_cmake_cpack_monolithic_install"><code>
-DCPACK_MONOLITHIC_INSTALL=1</code></a>:
Вызывает <span><strong>make package</strong></span>, чтобы произвести
единственный файл установки, а не много файлов.</li>

<li><a href="#option_cmake_with_debug"><code>-DWITH_DEBUG=1</code>
</a>: Собрать дистрибутив с отладкой.</p></li></ul>
<p>Для более обширного списка опций см.
<a href="#source-configuration-options">раздел 2.8.4</a>.</p>

<p>Чтобы перечислить параметры конфигурации, используйте одну
из следующих команд:
<pre>
shell&gt; cmake . -L # overview
shell&gt; cmake . -LH# overview with help text
shell&gt; cmake . -LAH # all params with help text
shell&gt; ccmake . # interactive display
</pre>

<p>Если <span><strong>CMake</strong></span> вылетает,
Вы, возможно, должны были бы реконфигурировать, выполняя его снова с
различными вариантами. Если Вы действительно реконфигурировали, примите
во внимание следующее:</p>

<ul><li><p>Если <span><strong>CMake</strong></span> выполнен после того, как
он был ранее выполнен, он может использовать информацию, которая была собрана
во время предыдущего запуска. Эта информация хранится в
<code>CMakeCache.txt</code>. Когда <span><strong>CMake</strong></span>
запускается, он ищет этот файл и читает его содержание, если он существует,
при условии, что информация все еще правильна. Это предположение недопустимо,
когда Вы реконфигурировали.</li>

<li>Каждый раз, когда Вы выполняете <span><strong>CMake</strong></span>,
Вы должны выполнить <span><strong>make</strong></span>
снова, чтобы повторно собрать. Однако, Вы можете хотеть удалить старые файлы
объекта потому, что они были собраны, используя иные параметры конфигурации.
</p></li></ul>

<p>Чтобы препятствовать тому, чтобы старые файлы объекта или информация о
конфигурации использовались, выполните эти команды на Unix прежде, чем
запустить повторно <span><strong>CMake</strong></span>:
<pre>
shell&gt; make clean
shell&gt; rm CMakeCache.txt
</pre>

<p>Или под Windows:
<pre>
shell&gt; devenv MySQL.sln /clean
shell&gt; del CMakeCache.txt
</pre>

<p>Если Вы создаете из дерева исходного текста (как описано позже), файл
<code>CMakeCache.txt</code> и все созданные файлы находятся в рабочем
каталоге, таким образом, Вы можете удалить каталог.</p>

<p>Если Вы собираетесь послать почту в список рассылки MySQL, чтобы попросить
помощи в конфигурации, сначала регистрируйте файлы каталога
<code>CMakeFiles</code> для полезной информации об отказе. Чтобы
зарегистрировать отчет об ошибках, пожалуйста, используйте инструкции в
<a href="intro.htm#bug-reports">разделе 1.7</a>.</p>

<h4><a name="idm139965425643872"></a>Создание (сборка) дистрибутива</h4>
<p>В Unix:
<pre>
shell&gt; make
shell&gt; make VERBOSE=1
</pre>

<p>Вторая команда задает <code>VERBOSE</code> для показа команды для
каждого собираемого файла.</p>
<p>Используйте <span><strong>gmake</strong></span> вместо этого на системах,
где Вы используете GNU <span><strong>make</strong></span> и это было
установлено как <span><strong>gmake</strong></span>.</p>

<p>В Windows:
<pre>
shell&gt; devenv MySQL.sln /build RelWithDebInfo
</pre>

<p>Возможно создать вне дерева исходных текстов. Если каталог исходных
текстов <code>mysql-src</code>, Вы можете создать пакет в каталоге, названном
<code>bld</code> примерно так:
<pre>
shell&gt; mkdir bld
shell&gt; cd bld
shell&gt; cmake ../mysql-src
</pre>

<p>Если Вы дошли до стадии компиляции, но дистрибутив не создается, см.
<a href="#compilation-problems">раздел 2.8.5</a>.
Если это не решает проблему, пожалуйста, введите ее в нашу базу данных
ошибок, используя инструкции, данные в
<a href="intro.htm#bug-reports">разделе 1.7</a>.
Если Вы установили последние версии необходимых инструментов, и они
разрушаются при попытке обработать наши конфигурационные файлы, пожалуйста,
сообщите об этом также. Однако, если Вы получаете ошибку <code>command not
found</code> или подобную проблему для необходимых инструментов, не сообщайте
об этом. Вместо этого удостоверьтесь, что все необходимые инструменты
установлены, и что Ваше значение переменной
<code>PATH</code> задано правильно.</p>

<h4><a name="idm139965425620576"></a>Установите дистрибутив</h4>
<p>В Unix:
<pre>
shell&gt; make install
</pre>

<p>Это устанавливает файлы в соответствии со сконфигурированным каталогом
установки (по умолчанию, <code>/usr/local/mysql</code>).
Вы, возможно, должны выполнить команду как <code>root</code>.</p>

<p>Чтобы установить в определенном каталоге, добавьте параметр
<code>DESTDIR</code> к командной строке:
<pre>
shell&gt; make install DESTDIR="/opt/mysql"
</pre>

<p>Альтернативно, произведите файлы пакета установки, которые Вы можете
установить, где Вам нравится:
<pre>
shell&gt; make package
</pre>

<p>Эта работа производит один или больше файлов <code>.tar.gz</code>, которые
могут быть установлены как двоичные пакеты дистрибутива. См.
<a href="#binary-installation">раздел 2.2</a>. Если Вы выполняете
<span><strong>CMake</strong></span> с
<a href="#option_cmake_cpack_monolithic_install"><code>
-DCPACK_MONOLITHIC_INSTALL=1</code></a>, работа производит единственный файл.
Иначе это производит много файлов.</p>

<p>В Windows произведите каталог данных, затем создайте архив <code>.zip
</code>:
<pre>
shell&gt; devenv MySQL.sln /build RelWithDebInfo /project initial_database
shell&gt; devenv MySQL.sln /build RelWithDebInfo /project package
</pre>
<p>Вы можете установить получающийся <code>.zip</code> где Вам нравится. См.
<a href="#windows-install-archive">раздел 2.3.5</a>.</p>

<h4><a name="idm139965425602688"></a>Выполните постустановку</h4>
<p>Остаток процесса установки вовлекает создание конфигурационного файла,
создание основных баз данных и запуск сервера MySQL. Для инструкций см.
<a href="#postinstallation">раздел 2.9</a>.</p>

<p>У учетных записей, которые перечислены в таблицах привилегий MySQL,
первоначально нет никаких паролей. После запуска сервера Вы должны настроить
пароли для них, используя инструкции в
<a href="#postinstallation">разделе 2.9</a>.</p>

<h3><a name="installing-development-tree"></a>2.8.3.
Установка MySQL, используя дерево развития</h3>
<p>Этот раздел описывает, как установить MySQL из исходного кода последнего
достижения, который размещен на <a href="../../../https@github.com/default.htm" target="_top">
GitHub</a>. Чтобы получить исходный код сервера MySQL с этого
репозитария, Вы можете настроить местный репозитарий MySQL Git.</p>

<p>В <a href="../../../https@github.com/default.htm" target="_top">GitHub</a> MySQL Server
и другие проекты MySQL найдены на странице
<a href="../../../https@github.com/mysql" target="_top">MySQL</a>. MySQL Server
единственный репозитарий, который содержит ответвления для
нескольких рядов MySQL.</p>

<p>MySQL официально присоединился к GitHub в сентябре 2014. Для получения
дополнительной информации о перемещении MySQL к GitHub обратитесь к
блогу MySQL Release Engineering
<a href="../../../mysqlrelease.com/2014/09/mysql-on-github/default.htm" target="_top">
MySQL on GitHub</a>.</p>

<h4><a name="installing-development-tree-prerequisites"></a>
Предпосылки для установки из исходных текстов развития</h4>
<p>Чтобы установить MySQL из дерева развития, Ваша система
должна удовлетворять требованиям инструментов, обрисованным в общих чертах в
<a href="#source-installation">разделе 2.8</a>.</p>

<h4><a name="installing-development-tree-git"></a>
Установка репозитария MySQL Git</h4>
<p>Чтобы настроить репозитарий MySQL Git на Вашей машине,
используйте эту процедуру:</p>

<ol type="1"><li><p>Клонируйте репозитарий MySQL Git к своей машине.
Следующая команда клонирует репозитарий к названному каталогу
<code>mysql-server</code>. Начальная загрузка займет время, в
зависимости от скорости Вашего соединения.
<pre>
~$ git clone https://github.com/mysql/mysql-server.git
Cloning into 'mysql-server'...
remote: Counting objects: 1198513, done.
remote: Total 1198513 (delta 0), reused 0 (delta 0), pack-reused 1198513
Receiving objects: 100% (1198513/1198513), 1.01 GiB | 7.44 MiB/s, done.
Resolving deltas: 100% (993200/993200), done.
Checking connectivity... done.
Checking out files: 100% (25510/25510), done.
</pre></li>

<li>Когда работа клона завершается, содержание Вашего местного репозитария
MySQL Git окажется подобным следующему:
<pre>
~$ cd mysql-server
~/mysql-server$ ls
BUILD Docs libmysqld README unittest
client Doxyfile-perfschema lib services regex VERSION
cmake extra man scripts vio
CMakeLists.txt include mysql-test sqlwin
cmd-line-utils INSTALL mysys sql-common zlib
config.h.cmake lib binlog events mysys_ssl storage
configure.cmake lib binlog standalone packaging strings
COPYING libevent plugin support-files
dbug libmysql rapid test clients
</pre></li>

<li>Используйте <span><strong>git branch -r</strong></span>, чтобы
рассмотреть отдаленные ответвления отслеживания для репозитария MySQL.
<pre>
~/mysql-server$ git branch -r
origin/5.5
origin/5.6
origin/5.7
origin/8.0
origin/HEAD -&gt; origin/5.7
origin/cluster-7.2
origin/cluster-7.3
origin/cluster-7.4
origin/cluster-7.5
</pre></li>

<li>Чтобы рассмотреть ответвления, которые проверены в Вашем местном
репозитарии, дайте команду <span><strong>git branch</strong></span>.
Когда Вы клонировали репозитарий MySQL Git, ответвления MySQL 5.7
были проверены автоматически. Звездочка идентифицирует эти ответвления 5.7
как активное ответвление.
<pre>
~/mysql-server$ git branch
* 5.7
</pre></li>

<li>Чтобы проверить иное ответвление MySQL, выполните команду
<span><strong>git checkout</strong></span>,
определяя имя ответвления. Например, для контроля MySQL 8.0:
<pre>
~/mysql-server$ git checkout 8.0
Checking out files: 100% (9600/9600), done.
Branch 8.0 set up to track remote branch 8.0 from origin.
Switched to a new branch '8.0'
</pre></li>

<li>Запустите <code>git branch</code>, чтобы проверить, что MySQL 8.0
присутствует. MySQL 8.0, который является последним ответвлением, которое Вы
проверили, отмечен звездочкой, указывающей, что это активное ответвление.
<pre>
~/mysql-server$ git branch
5.7
* 8.0
</pre></li>

<li>Используйте команду <span><strong>git checkout</strong></span>,
чтобы переключиться между ответвлениями. Например:
<pre>
~/mysql-server$ git checkout 5.7
</pre></li>

<li>Чтобы получить изменения, произведенные после Вашей начальной установки
репозитария MySQL Git, переключитесь на ответвление, которое Вы хотите
обновить, и скомандуйте <code>git pull</code>:
<pre>
~/mysql-server$ git checkout 8.0
~/mysql-server$ git pull
</pre>

<p>Чтобы исследовать историю, используйте <code>git log</code>:
<pre>
~/mysql-server$ git log
</pre>
<p>Вы можете также просмотреть историю и исходный код прямо на сайте
GitHub <a href="../../../https@github.com/mysql" target="_top">MySQL</a>.</p>

<p>Если Вы видите изменения или код, о котором Вы имеете вопрос, посылаете
электронное письмо в список рассылки MySQL <code>internals</code>. См.
<a href="intro.htm#mailing-lists">раздел 1.6.1</a>.
Для информации о содействии см.
<a href="../../../mysqlserverteam.com/contributing-to-mysql-server/%20"
target="_top">Contributing to MySQL Server</a>.</li>

<li>После того, как Вы клонировали репозитарий MySQL Git
и проверили ответвление, которое Вы хотите создать, Вы можете создать сервер
MySQL из исходного кода. Инструкции обеспечены в
<a href="#installing-source-distribution">разделе 2.8.2</a>, за
исключением того, что Вы пропускаете часть о
получении и распаковке дистрибутива.</p>

<p>Будьте осторожны относительно установки созданного
из исходного дерева дистрибутива на производственной машине. Команда
установки может перезаписать Вашу живую установку. Если Вам уже устанавливали
MySQL и не хотите перезаписывать его, выполните <span><strong>CMake</strong>
</span> со значениями для опций
<a href="#option_cmake_cmake_install_prefix"><code>
CMAKE_INSTALL_PREFIX</code></a>,
<a href="#option_cmake_mysql_tcp_port"><code>MYSQL_TCP_PORT</code>
</a> и <a href="#option_cmake_mysql_unix_addr"><code>
MYSQL_UNIX_ADDR</code></a>, отличающимися от используемых Вашим
производственным сервером. Для дополнительной информации о препятствовании
тому, чтобы серверы вмешивались друг в друга, см.
<a href="server.htm#multiple-servers">раздел 6.7</a>.</p></li></ol>

<h3><a name="source-configuration-options"></a>2.8.4.
Исходные параметры конфигурации MySQL</h3>
<p><span><strong>CMake</strong></span> обеспечивает большое управление тем,
как Вы конфигурируете дистрибутив MySQL. Как правило, Вы делаете это с
использованием опции в командной строке. Для информации об опциях,
поддержанных <span><strong>CMake</strong></span>, выполните
любую из этих команд в верхнем каталоге исходных текстов:
<pre>
shell&gt; cmake . -LH
shell&gt; ccmake .
</pre>

<p>Вы можете также влиять на <span><strong>CMake</strong></span> через
использование определенных переменных окружения. См.
<a href="programs.htm#environment-variables">раздел 5.9</a>.</p>

<p>Следующая таблица показывает доступные варианты опций
<span><strong>CMake</strong></span>. В столбце <code>Default</code>
<code>PREFIX</code> означает значение опции
<a href="#option_cmake_cmake_install_prefix"><code>
CMAKE_INSTALL_PREFIX</code></a>, которая определяет каталог основы установки.
Это значение используется в качестве родительского местоположения для
нескольких из подкаталогов установки.</p>

<a name="idm139965425534544"></a><p><b>Таблица 2.11. Обзор параметров
конфигурации MySQL (<span>CMake</span>)</b></p>
<table border="1">
<thead><tr><th scope="col">Форматы</th><th scope="col">Описание</th>
<th scope="col">Значение по умолчанию</th><th scope="col">Введено
</th></tr></thead>
<tbody><tr><td scope="row"><a href="#option_cmake_build_config">
<code>BUILD_CONFIG</code></a></td><td>Используйте те же самые опции,
как официальные выпуски</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_cmake_build_type">
<code>CMAKE_BUILD_TYPE</code></a></td><td>Тип сборки</td>
<td><code>RelWithDebInfo</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_cmake_cxx_flags"><code>
CMAKE_CXX_FLAGS</code></a></td><td>Флаги для компилятора C++</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_cmake_c_flags"><code>
CMAKE_C_FLAGS</code></a></td><td>Флаги для компилятора C</td><td> </td><td>
</td></tr>
<tr><td scope="row"><a href="#option_cmake_cmake_install_prefix">
<code>CMAKE_INSTALL_PREFIX</code></a></td><td>Каталог основы установки</td>
<td><code>/usr/local/mysql</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_compilation_comment">
<code>COMPILATION_COMMENT</code></a></td>
<td>Комментарий об окружающей среде компиляции</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_cpack_monolithic_install">
<code>CPACK_MONOLITHIC_INSTALL</code></a></td>
<td>Создает ли пакет единственный файл</td><td><code>OFF</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_default_charset"><code>
DEFAULT_CHARSET</code></a></td><td>Набор символов сервера по умолчанию</td>
<td><code>latin1</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_default_collation">
<code>DEFAULT_COLLATION</code></a></td><td>Сопоставление сервера по умолчанию
</td><td><code>latin1_swedish_ci</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_cond">
<code>DISABLE_PSI_COND</code></a></td><td>Исключить инструментовку условия
Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_file">
<code>DISABLE_PSI_FILE</code></a></td><td>Исключить инструментовку файлов
Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_idle">
<code>DISABLE_PSI_IDLE</code></a></td>
<td>Исключить инструментовку неактивности Performance Schema</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_memory">
<code>DISABLE_PSI_MEMORY</code></a></td><td>Исключить инструментовку памяти
Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_metadata">
<code>DISABLE_PSI_METADATA</code></a></td><td>Исключить инструментовку
метаданных Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_mutex">
<code>DISABLE_PSI_MUTEX</code></a></td><td>Исключить инструментовку
Performance Schema mutex</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_rwlock">
<code>DISABLE_PSI_RWLOCK</code></a></td><td>Исключить инструментовку
Performance Schema rwlock</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_socket">
<code>DISABLE_PSI_SOCKET</code></a></td><td>Исключить инструментовку сокета
Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_sp"><code>
DISABLE_PSI_SP</code></a></td><td>Исключить инструментовку сохраненных
подпрограмм в Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_stage">
<code>DISABLE_PSI_STAGE</code></a></td><td>Исключить инструментовку этапа
Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_statement">
<code>DISABLE_PSI_STATEMENT</code></a></td><td>Исключить инструментовку
запросов Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_statement_digest">
<code>DISABLE_PSI_STATEMENT_DIGEST</code></a></td>
<td>Исключить инструментовку Performance Schema statement_digest</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_psi_table">
<code>DISABLE_PSI_TABLE</code></a></td><td>Исключить инструментовку таблиц
Performance Schema</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_disable_shared"><code>
DISABLE_SHARED</code></a></td><td>Не создавать совместно используемые
библиотеки, собирайте зависимый от позиции код</td><td><code>OFF</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_download_boost"><code>
DOWNLOAD_BOOST</code></a></td><td>Загрузить ли библиотеку Boost</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_download_boost_timeout">
<code>DOWNLOAD_BOOST_TIMEOUT</code></a></td><td>
Тайм-аут в секундах для того, чтобы загрузить библиотеку Boost</td>
<td><code>600</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_use_ld_gold"><code>
-DUSE_LD_GOLD</code></a></td><td>Использовать ли загрузчик GNU gold loader
</td><td><code>OFF</code></td><td>8.0.0</td></tr>
<tr><td scope="row"><a href="#option_cmake_with_protobuf"><code>
-DWITH_PROTOBUF</code></a></td>
<td>Какой буферный пакет протокола использовать</td>
<td><code>bundled</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_enabled_local_infile">
<code>ENABLED_LOCAL_INFILE</code></a></td><td>Включить ли LOCAL для
LOAD DATA INFILE</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_enabled_profiling">
<code>ENABLED_PROFILING</code></a></td>
<td>Включить ли код профилирования запроса</td><td><code>ON</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_enable_debug_sync">
<code>ENABLE_DEBUG_SYNC</code></a></td>
<td>Включить ли поддержку Debug Sync</td><td><code>ON</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_enable_downloads">
<code>ENABLE_DOWNLOADS</code></a></td><td>Загрузить ли дополнительные файлы
</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_enable_dtrace"><code>
ENABLE_DTRACE</code></a></td><td>Включать ли поддержку DTrace</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_enable_gcov"><code>
ENABLE_GCOV</code></a></td><td>Включать ли поддержку gcov</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_enable_gprof"><code>
ENABLE_GPROF</code></a></td><td>Включить gprof (только оптимизация в Linux)
</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_force_unsupported_compiler">
<code>FORCE_UNSUPPORTED_COMPILER</code></a></td><td>
Разрешить ли неподдержанный компилятор</td><td><code>OFF</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_ignore_aio_check">
<code>IGNORE_AIO_CHECK</code></a></td><td>С -DBUILD_CONFIG=mysql_release
проигнорировать проверку libaio</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_bindir"><code>
INSTALL_BINDIR</code></a></td>
<td>Пользовательский каталог исполняемых модулей</td><td><code>PREFIX/bin
</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_docdir"><code>
INSTALL_DOCDIR</code></a></td><td>Каталог документации</td><td><code>
PREFIX/docs</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_docreadmedir">
<code>INSTALL_DOCREADMEDIR</code></a></td><td>Каталог файла README</td><td>
<code>PREFIX</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_includedir">
<code>INSTALL_INCLUDEDIR</code></a></td><td>Каталог заголовочных файлов</td>
<td><code>PREFIX/include</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_infodir"><code>
INSTALL_INFODIR</code></a></td><td>Каталог файлов Info</td><td><code>
PREFIX/docs</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_layout"><code>
INSTALL_LAYOUT</code></a></td>
<td>Выберите предопределенное расположение установки</td>
<td><code>STANDALONE</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_libdir"><code>
INSTALL_LIBDIR</code></a></td><td>Каталог файлов библиотек</td><td><code>
PREFIX/lib</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_mandir"><code>
INSTALL_MANDIR</code></a></td><td>Каталог Manual page</td><td><code>
PREFIX/man</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_mysqlkeyringdir">
<code>INSTALL_MYSQLKEYRINGDIR</code></a></td><td>Каталог файлов данных
плагина keyring_file</td><td><code>Зависит от платформы</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_mysqlsharedir">
<code>INSTALL_MYSQLSHAREDIR</code></a></td>
<td>Совместно используемый каталог данных</td><td><code>PREFIX/share</code>
</td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_mysqltestdir">
<code>INSTALL_MYSQLTESTDIR</code></a></td><td>Каталог mysql-test</td><td>
<code>PREFIX/mysql-test</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_pkgconfigdir">
<code>INSTALL_PKGCONFIGDIR</code></a></td><td>
Каталог для файла mysqlclient.pc pkg-config</td><td><code>
INSTALL_LIBDIR/pkgconfig</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_plugindir">
<code>INSTALL_PLUGINDIR</code></a></td><td>Каталог плагинов</td><td><code>
PREFIX/lib/plugin</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_sbindir"><code>
INSTALL_SBINDIR</code></a></td><td>Каталог выполнения сервера</td><td><code>
PREFIX/bin</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_secure_file_privdir">
<code>INSTALL_SECURE_FILE_PRIVDIR</code></a></td>
<td>Значение по умолчанию secure_file_priv
</td><td><code>Зависит от платформы</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_secure_file_priv_embeddeddir">
<code>INSTALL_SECURE_FILE_PRIV_EMBEDDEDDIR</code></a></td><td>
Значение по умолчанию secure_file_priv для libmysqld</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_sharedir">
<code>INSTALL_SHAREDIR</code></a></td><td>
Каталог установки aclocal/mysql.m4</td><td><code>PREFIX/share</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_static_libraries">
<code>INSTALL_STATIC_LIBRARIES</code></a></td><td>
Установить ли статические библиотеки</td><td><code>ON</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_install_supportfilesdir">
<code>INSTALL_SUPPORTFILESDIR</code></a></td>
<td>Дополнительный каталог файлов поддержки</td>
<td><code>PREFIX/support-files</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_max_indexes"><code>
MAX_INDEXES</code></a></td><td>Максимум индексов на таблицу</td>
<td><code>64</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_mutex_type"><code>
MUTEX_TYPE</code></a></td><td>Тип InnoDB mutex</td><td><code>event</code>
</td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_mysql_datadir"><code>
MYSQL_DATADIR</code></a></td><td>Каталог данных</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_mysql_maintainer_mode">
<code>MYSQL_MAINTAINER_MODE</code></a></td>
<td>Включить ли среду проектирования для MySQL maintainer</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_mysql_project_name">
<code>MYSQL_PROJECT_NAME</code></a></td><td>Имя проекта Windows/OS X</td>
<td><code>3306</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_mysql_tcp_port"><code>
MYSQL_TCP_PORT</code></a></td><td>Порт TCP/IP</td><td><code>3306</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_mysql_unix_addr"><code>
MYSQL_UNIX_ADDR</code></a></td><td>Файл сокета Unix</td><td><code>
/tmp/mysql.sock</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_odbc_includes"><code>
ODBC_INCLUDES</code></a></td><td>Каталог включений ODBC</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_odbc_lib_dir"><code>
ODBC_LIB_DIR</code></a></td><td>Каталог библиотек ODBC</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_optimizer_trace"><code>
OPTIMIZER_TRACE</code></a></td><td>Поддержать ли отслеживание оптимизатора
</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_sysconfdir"><code>
SYSCONFDIR</code></a></td><td>Каталог файла опций</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_systemd_pid_dir"><code>
SYSTEMD_PID_DIR</code></a></td><td>Каталог для файла PID под systemd</td>
<td><code>/var/run/mysqld</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_systemd_service_name">
<code>SYSTEMD_SERVICE_NAME</code></a></td>
<td>Название службы MySQL под systemd</td><td><code>mysqld</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_tmpdir"><code>TMPDIR
</code></a></td><td>Значение по умолчанию tmpdir</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_win_debug_no_inline">
<code>WIN_DEBUG_NO_INLINE</code></a></td><td>Запретить ли функцию inlining
</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_without_server"><code>
WITHOUT_SERVER</code></a></td><td>Не создавать сервер</td><td><code>OFF
</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_storage_engine_options">
<code>WITHOUT_xxx_STORAGE_ENGINE</code></a></td><td>
Исключить механизм хранения xxx</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_asan"><code>
WITH_ASAN</code></a></td><td>Включить AddressSanitizer</td><td><code>OFF
</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_authentication_pam">
<code>WITH_AUTHENTICATION_PAM</code></a></td><td>
Создать плагин аутентификации PAM</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_boost"><code>
WITH_BOOST</code></a></td><td>Местоположение источников библиотеки Boost
</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_client_protocol_tracing">
<code>WITH_CLIENT_PROTOCOL_TRACING</code></a></td><td>
Создать клиентский протокол, прослеживающий структуру</td>
<td><code>ON</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_debug"><code>
WITH_DEBUG</code></a></td><td>Включать ли поддержку отладки</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_default_compiler_options">
<code>WITH_DEFAULT_COMPILER_OPTIONS</code></a></td><td>
Использовать ли опции компилятора по умолчанию</td><td><code>ON</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_default_feature_set">
<code>WITH_DEFAULT_FEATURE_SET</code></a></td><td>
Использовать ли набор функций по умолчанию</td><td><code>ON</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_editline"><code>
WITH_EDITLINE</code></a></td>
<td>Какой библиотекой libedit/editline пользоваться</td>
<td><code>bundled</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_embedded_server">
<code>WITH_EMBEDDED_SERVER</code></a></td><td>Создать ли встроенный сервер
</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_embedded_shared_library">
<code>WITH_EMBEDDED_SHARED_LIBRARY</code></a></td><td>Создавать ли совместно
используемую встроенную библиотеку сервера</td><td><code>OFF</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_innodb_extra_debug">
<code>WITH_INNODB_EXTRA_DEBUG</code></a></td><td>
Включать ли дополнительную поддержку отладки InnoDB</td><td><code>OFF
</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_innodb_memcached">
<code>WITH_INNODB_MEMCACHED</code></a></td><td>Произвести ли совместно
используемые библиотеки memcached</td><td><code>OFF</code></td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_keyring_test">
<code>WITH_KEYRING_TEST</code></a></td><td>Создать тестовую программу ключей
</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_libevent"><code>
WITH_LIBEVENT</code></a></td><td>Какой библиотекой libevent пользоваться</td>
<td><code>bundled</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_libwrap"><code>
WITH_LIBWRAP</code></a></td><td>Включать ли libwrap (TCP wrappers)</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_lz4"><code>
WITH_LZ4</code></a></td><td>Тип поддержки LZ4</td><td><code>bundled</code>
</td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_mecab"><code>
WITH_MECAB</code></a></td><td>Компилировать MeCab</td><td> </td>
<td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_msan"><code>
WITH_MSAN</code></a></td><td>Включить MemorySanitizer</td><td><code>OFF
</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_mscrt_debug">
<code>WITH_MSCRT_DEBUG</code></a></td><td>Включить отслеживание утечки
памяти Visual Studio CRT</td><td><code>OFF</code></td>
<td> </td></tr>
<tr><td scope="row"><code>WITH_NUMA</code></td><td>
Установить политику распределения памяти NUMA</td><td> </td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_rapid"><code>
WITH_RAPID</code></a></td><td>Создать ли плагины цикла быстрого развития</td>
<td><code>ON</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_ssl"><code>
WITH_SSL</code></a></td><td>Тип поддержки SSL</td><td><code>bundled</code>
</td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_systemd"><code>
WITH_SYSTEMD</code></a></td><td>Включить установку файлов поддержки systemd
</td><td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_test_trace_plugin">
<code>WITH_TEST_TRACE_PLUGIN</code></a></td><td>
Создать испытательный плагин трассировки протокола</td><td><code>OFF</code>
</td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_tsan"><code>
WITH_TSAN</code></a></td><td>Включить ThreadSanitizer</td><td><code>OFF
</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_ubsan"><code>
WITH_UBSAN</code></a></td><td>Включить Undefined Behavior Sanitizer</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_unixodbc"><code>
WITH_UNIXODBC</code></a></td><td>Включить unixODBC</td><td><code>OFF</code>
</td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_valgrind"><code>
WITH_VALGRIND</code></a></td><td>Собрать ли заголовочные файлы Valgrind</td>
<td><code>OFF</code></td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_with_zlib"><code>
WITH_ZLIB</code></a></td><td>Тип поддержки zlib</td><td><code>bundled</code>
</td><td> </td></tr>
<tr><td scope="row"><a href="#option_cmake_storage_engine_options">
<code>WITH_xxx_STORAGE_ENGINE</code></a></td><td>
Собрать механизм хранения xxx статически в сервер</td><td> </td><td> </td>
</tr></tbody></table>

<p>Следующие разделы предоставляют больше информации об опциях
<span><strong>CMake</strong></span>.</p>
<ul><li><p><a href="#cmake-general-options">Общие параметры</a>
</li>

<li><a href="#cmake-installation-layout-options">
Опции расположения установки</a></li>
<li><a href="#option_cmake_storage_engine_options">
Опции механизмов хранения</a></li>

<li><a href="#cmake-feature-options">Опции особенностей</a></li>
<li><a href="#cmake-compiler-flags">Флаги компилятора</a>
</p></li></ul>

<p>Для булевых опций значение может быть определено как 1 или
<code>ON</code>, чтобы включить опцию, или как 0 или
<code>OFF</code>, чтобы выключить опцию.</p>

<p>Много опций конфигурируют значения по умолчанию времени компиляции,
которые могут быть переопределены при запуске сервера. Например, опции
<a href="#option_cmake_cmake_install_prefix"><code>
CMAKE_INSTALL_PREFIX</code></a>,
<a href="#option_cmake_mysql_tcp_port"><code>MYSQL_TCP_PORT</code>
</a> и <a href="#option_cmake_mysql_unix_addr"><code>
MYSQL_UNIX_ADDR</code></a>, которые конфигурируют местоположение каталога
установки по умолчанию, номер порта TCP/IP и файл сокета Unix, могут быть
изменены при запуске сервера с помощью опций
<a href="server.htm#option_mysqld_basedir"><code>--basedir</code></a>,
<a href="server.htm#option_mysqld_port"><code>--port</code></a> и
<a href="server.htm#option_mysqld_socket"><code>--socket</code></a>
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.
Где применимо, описания параметра конфигурации указывают на соответствующую
опцию запуска <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a>.</p>

<h4><a name="cmake-general-options"></a>Общие параметры</h4>
<ul><li><p><a name="option_cmake_build_config"></a>
<code>-DBUILD_CONFIG=mysql_release</code></p>
<p>Эта опция конфигурирует дистрибутив с опциями, используемыми Oracle,
чтобы произвести двоичные дистрибутивы для официальных выпусков MySQL.</li>

<li><a name="option_cmake_cmake_build_type"></a>
<code>-DCMAKE_BUILD_TYPE=<em><code>type</code></em></code></p>
<p>Задает тип сборки:</p>

<ul><li><p><code>RelWithDebInfo</code>: Включить оптимизацию и произвести
информацию об отладке. Это значение по умолчанию.</li>
<li><code>Debug</code>: Выключить оптимизацию и произвести
информацию об отладке. Это также используется, если включена
<a href="#option_cmake_with_debug"><code>WITH_DEBUG</code></a>.
Таким образом, <a href="#option_cmake_with_debug"><code>
-DWITH_DEBUG=1</code></a> имеет тот же самый эффект, как
<a href="#option_cmake_cmake_build_type"><code>
-DCMAKE_BUILD_TYPE=Debug</code></a>.</p></li></ul></li>

<li><p><a name="option_cmake_cpack_monolithic_install"></a>
<code>-DCPACK_MONOLITHIC_INSTALL=<em><code>bool</code></em></code></p>
<p>Эта опция затрагивает, производит ли <span><strong>make package</strong>
</span> много файлов пакетов установки или единственный файл. Если отключено,
производится много файлов пакетов установки, которые могут быть полезными,
если Вы хотите установить только подмножество из полной установки MySQL. Если
включено, это производит единственный файл для того, чтобы установить все.
</p></li></ul>

<h4><a name="cmake-installation-layout-options"></a>
Опции расположения установки</h4>
<p><a href="#option_cmake_cmake_install_prefix"><code>
CMAKE_INSTALL_PREFIX</code></a> указывает на основной каталог установки.
Другие опции с названиями формы <code>INSTALL_<em><code>xxx</code></em>
</code> указывают, что составляющие местоположения интерпретируются
относительно префикса, а их значения относительные пути. Их значения не
должны включать префикс.</p>

<ul><li><p><a name="option_cmake_cmake_install_prefix"></a>
<code>-DCMAKE_INSTALL_PREFIX=<em><code>dir_name</code></em></code></p>
<p>Каталог основы установки. Это значение может быть установлено при запуске
сервера с опцией <a href="server.htm#option_mysqld_basedir"><code>--basedir
</code></a>.</li>

<li><a name="option_cmake_install_bindir"></a>
<code>-DINSTALL_BINDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить пользовательские программы.</li>

<li><a name="option_cmake_install_docdir"></a>
<code>-DINSTALL_DOCDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить документацию.</li>

<li><a name="option_cmake_install_docreadmedir"></a>
<code>-DINSTALL_DOCREADMEDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить файлы <code>README</code>.</li>

<li><a name="option_cmake_install_includedir"></a>
<code>-DINSTALL_INCLUDEDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить заголовочные файлы.</li>

<li><a name="option_cmake_install_infodir"></a>
<code>-DINSTALL_INFODIR=<em><code>dir_name</code></em></code></p>
<p>Где установить файлы Info.</li>

<li><a name="option_cmake_install_layout"></a>
<code>-DINSTALL_LAYOUT=<em><code>name</code></em></code></p>
<p>Выберите предопределенное расположение установки:</p>

<ul><li><p><code>STANDALONE</code>: То же самое расположение как используется
для пакетов <code>.tar.gz</code> и <code>.zip</code>.
Это значение по умолчанию.</li>

<li><code>RPM</code>: Расположение, подобное пакетам RPM.</li>
<li><code>SVR4</code>: Расположение пакета Solaris.</li>
<li><code>DEB</code>: (Экспериментальное) расположение пакета DEB.
</p></li></ul>

<p>Вы можете выбрать предопределенное расположение, но изменить отдельные
составляющие местоположения установки, определяя другие опции. Например:
<pre>
shell&gt; cmake . -DINSTALL_LAYOUT=SVR4 -DMYSQL_DATADIR=/var/mysql/data
</pre>

<p><a href="#option_cmake_install_layout"><code>INSTALL_LAYOUT
</code></a> определяет значение по умолчанию
<a href="server.htm#sysvar_secure_file_priv"><code>secure_file_priv</code>
</a> и <a href="server.htm#sysvar_keyring_file_data"><code>keyring_file_data
</code></a>, см. описания этих переменных в
<a href="server.htm#server-system-variables">разделе 6.1.5</a>.</li>

<li><a name="option_cmake_install_libdir"></a>
<code>-DINSTALL_LIBDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить файлы библиотеки.</li>

<li><a name="option_cmake_install_mandir"></a>
<code>-DINSTALL_MANDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить manual pages.</li>

<li><a name="option_cmake_install_mysqlkeyringdir"></a>
<code>-DINSTALL_MYSQLKEYRINGDIR=<em><code>dir_path</code></em></code></p>
<p>Каталог по умолчанию, чтобы использовать в качестве местоположения файла
данных плагина <code>keyring_file</code>. Значение по умолчанию зависит от
платформы и от значения
<a href="#option_cmake_install_layout"><code>INSTALL_LAYOUT
</code></a>, см. детали в <a href="server.htm#server-system-variables">
разделе 6.1.5</a>.</li>

<li><a name="option_cmake_install_mysqlsharedir"></a>
<code>-DINSTALL_MYSQLSHAREDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить совместно используемые файлы с данными.</li>

<li><a name="option_cmake_install_mysqltestdir"></a>
<code>-DINSTALL_MYSQLTESTDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить каталог <code>mysql-test</code>.
Чтобы подавить установку этого каталога, явно установите опцию в пустое
значение (<a href="#option_cmake_install_mysqltestdir"><code>
-DINSTALL_MYSQLTESTDIR=</code></a>).</li>

<li><a name="option_cmake_install_pkgconfigdir"></a>
<code>-DINSTALL_PKGCONFIGDIR=<em><code>dir_name</code></em></code></p>
<p>Каталог, в котором можно установить файл
<code>mysqlclient.pc</code> для использования
<span><strong>pkg-config</strong></span>. Значение по умолчанию
<code>INSTALL_LIBDIR/pkgconfig</code>, если
<a href="#option_cmake_install_libdir"><code>INSTALL_LIBDIR</code>
</a> кончается на <code>/mysql</code>, это сначала удаляется.</li>

<li><a name="option_cmake_install_plugindir"></a>
<code>-DINSTALL_PLUGINDIR=<em><code>dir_name</code></em></code></p>
<p>Местоположение каталога плагинов. Это значение может быть установлено при
запуске сервера с помощью опции <a href="server.htm#sysvar_plugin_dir"><code>
--plugin_dir</code></a>.</li>

<li><a name="option_cmake_install_sbindir"></a>
<code>-DINSTALL_SBINDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a>.</li>

<li><a name="option_cmake_install_secure_file_privdir"></a>
<code>-DINSTALL_SECURE_FILE_PRIVDIR=<em><code>dir_name</code></em></code></p>
<p>Значение по умолчанию для
<a href="server.htm#sysvar_secure_file_priv"><code>secure_file_priv</code>
</a>. Зависит от платформы и определяется
<a href="#option_cmake_install_layout"><code>INSTALL_LAYOUT</code>
</a>, подробности в <a href="server.htm#server-system-variables">разделе
6.1.5</a>.</p>

<p>Установить значение для встроенного сервера <code>libmysqld</code> можно,
используя <a href="#option_cmake_install_secure_file_priv_embeddeddir">
<code>INSTALL_SECURE_FILE_PRIV_EMBEDDEDDIR</code></a>.</li>

<li><a name="option_cmake_install_secure_file_priv_embeddeddir"></a>
<code>-DINSTALL_SECURE_FILE_PRIV_EMBEDDEDDIR=<em><code>dir_name</code></em>
</code></p>
<p>Значение по умолчанию для
<a href="server.htm#sysvar_secure_file_priv"><code>secure_file_priv</code>
</a> встроенного сервера <code>libmysqld</code>.</li>

<li><a name="option_cmake_install_sharedir"></a>
<code>-DINSTALL_SHAREDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить <code>aclocal/mysql.m4</code>.</li>

<li><a name="option_cmake_install_static_libraries"></a>
<code>-DINSTALL_STATIC_LIBRARIES=<em><code>bool</code></em></code></p>
<p>Установить ли статические библиотеки. Значение по умолчанию
<code>ON</code>. Если установлено в <code>OFF</code>,
эти библиотеки не установлены:
<code>libmysqlclient.a</code>, <code>libmysqld.a</code>,
<code>libmysqlservices.a</code>.</li>

<li><a name="option_cmake_install_supportfilesdir"></a>
<code>-DINSTALL_SUPPORTFILESDIR=<em><code>dir_name</code></em></code></p>
<p>Где установить дополнительные файлы поддержки.</li>

<li><a name="option_cmake_mysql_datadir"></a>
<code>-DMYSQL_DATADIR=<em><code>dir_name</code></em></code></p>
<p>Местоположение каталога данных MySQL. Это значение может быть установлено
при запуске сервера опцией
<a href="server.htm#option_mysqld_datadir"><code>--datadir</code></a>.</li>

<li><a name="option_cmake_odbc_includes"></a>
<code>-DODBC_INCLUDES=<em><code>dir_name</code></em></code></p>
<p>Местоположение каталога ODBC, может использоваться,
конфигурируя Connector/ODBC.</li>

<li><a name="option_cmake_odbc_lib_dir"></a>
<code>-DODBC_LIB_DIR=<em><code>dir_name</code></em></code></p>
<p>Местоположение каталога библиотеки ODBC, может использоваться,
конфигурируя Connector/ODBC.</li>

<li><a name="option_cmake_sysconfdir"></a>
<code>-DSYSCONFDIR=<em><code>dir_name</code></em></code></p>
<p>Каталог файла опций <code>my.cnf</code> по умолчанию.</p>

<p>Это местоположение не может быть установлено при запуске сервера, но Вы
можете запустить сервер с указанным файла опций, используя
<a href="programs.htm#option_general_defaults-file"><code>
--defaults-file=<em><code>file_name</code></em></code></a>, где
<em><code>file_name</code></em> полный путь к файлу.</li>

<li><a name="option_cmake_systemd_pid_dir"></a>
<code>-DSYSTEMD_PID_DIR=<em><code>dir_name</code></em></code></p>
<p>Название каталога, в котором можно создать файл PID, когда MySQL управляет
systemd. Значение по умолчанию <code>/var/run/mysqld</code>,
это могло бы быть изменено неявно, согласно
<a href="#option_cmake_install_layout"><code>INSTALL_LAYOUT</code>
</a>.</p>

<p>Эта опция проигнорирована, если включена
<a href="#option_cmake_with_systemd"><code>WITH_SYSTEMD</code>
</a>.</li>

<li><a name="option_cmake_systemd_service_name"></a>
<code>-DSYSTEMD_SERVICE_NAME=<em><code>name</code></em></code></p>
<p>Название службы MySQL, чтобы использовать, когда MySQL управляет systemd.
Значение по умолчанию <code>mysqld</code>, это могло бы быть изменено неявно,
согласно <a href="#option_cmake_install_layout"><code>
INSTALL_LAYOUT</code></a>.</p>

<p>Эта опция проигнорирована, если включена
<a href="#option_cmake_with_systemd"><code>WITH_SYSTEMD</code>
</a>.</li>

<li><a name="option_cmake_tmpdir"></a>
<code>-DTMPDIR=<em><code>dir_name</code></em></code></p>
<p>Местоположение по умолчанию, чтобы использовать для системной переменной
<a href="server.htm#sysvar_tmpdir"><code>tmpdir</code></a>.
Если не указано, значение по умолчанию берется из
<code>P_tmpdir</code> в файле <code>&lt;stdio.h&gt;</code>.</p></li></ul>

<h4><a name="option_cmake_storage_engine_options"></a>
Опции механизмов хранения</h4>
<p>Механизмы хранения созданы как плагины. Вы можете создать плагин как
статический модуль (собранный в сервер) или динамический модуль (созданный
как динамическая библиотека, которая должна быть установлена в сервер,
используя <a href="sql.htm#install-plugin"><code>INSTALL PLUGIN</code></a>
или <a href="server.htm#option_mysqld_plugin-load"><code>--plugin-load</code>
</a> прежде, чем это сможет использоваться). Некоторые плагины не могут
поддержать статическую или динамическую сборку.</p>

<p>Механизмы <a href="innodb.htm"><code>InnoDB</code></a>,
<a href="storage.htm#myisam-storage-engine"><code>MyISAM</code></a>,
<a href="storage.htm#merge-storage-engine"><code>MERGE</code></a>,
<a href="storage.htm#memory-storage-engine"><code>MEMORY</code></a> и
<a href="storage.htm#csv-storage-engine"><code>CSV</code></a> обязательны
(всегда собраны в сервер) и не должны быть установлены явно.</p>

<p>Чтобы собрать механизм хранения статически в сервер, надо использовать
<code>-DWITH_<em><code>engine</code></em>_STORAGE_ENGINE=1</code>.
Некоторые допустимые значения <em><code>engine</code></em>:
<code>ARCHIVE</code>, <code>BLACKHOLE</code>,
<code>EXAMPLE</code>, <code>FEDERATED</code> и
<code>PERFSCHEMA</code> (Performance Schema). Например:
<pre>
-DWITH_ARCHIVE_STORAGE_ENGINE=1
-DWITH_BLACKHOLE_STORAGE_ENGINE=1
-DWITH_PERFSCHEMA_STORAGE_ENGINE=1
</pre>

<p>Невозможно собрать без поддержки Performance Schema.
Если надо собрать без особых типов инструментовки, это может быть сделано
со следующими опциями:
<pre>
DISABLE_PSI_COND
DISABLE_PSI_FILE
DISABLE_PSI_IDLE
DISABLE_PSI_MEMORY
DISABLE_PSI_METADATA
DISABLE_PSI_MUTEX
DISABLE_PSI_PS
DISABLE_PSI_RWLOCK
DISABLE_PSI_SOCKET
DISABLE_PSI_SP
DISABLE_PSI_STAGE
DISABLE_PSI_STATEMENT
DISABLE_PSI_STATEMENT_DIGEST
DISABLE_PSI_TABLE
DISABLE_PSI_THREAD
DISABLE_PSI_TRANSACTION
</pre>

<p>Например, чтобы собрать без инструментовки mutex, сконфигурируйте MySQL,
используя <code>-DDISABLE_PSI_MUTEX=1</code>.</p>
<p>Чтобы исключить механизм хранения из сборки, примените
<code>-DWITH_<em><code>engine</code></em>_STORAGE_ENGINE=0</code>:
<pre>
-DWITH_ARCHIVE_STORAGE_ENGINE=0
-DWITH_EXAMPLE_STORAGE_ENGINE=0
-DWITH_FEDERATED_STORAGE_ENGINE=0
</pre>

<p>Также возможно исключить механизм хранения из сборки через
<code>-DWITHOUT_<em><code>engine</code></em>_STORAGE_ENGINE=1</code> (но
<code>-DWITH_<em><code>engine</code></em>_STORAGE_ENGINE=0
</code> предпочтен). Примеры:
<pre>
-DWITHOUT_ARCHIVE_STORAGE_ENGINE=1
-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1
-DWITHOUT_FEDERATED_STORAGE_ENGINE=1
</pre>

<p>Если ни один <code>-DWITH_<em><code>engine</code></em>_STORAGE_ENGINE
</code> или <code>-DWITHOUT_<em><code>engine</code></em>_STORAGE_ENGINE
</code> не определены для данного механизма хранения, механизм создан как
совместно используемый модуль, или исключен, если он не может быть создан как
совместно используемый модуль.</p>

<h4><a name="cmake-feature-options"></a>Опции особенностей</h4>
<ul><li><p><a name="option_cmake_compilation_comment"></a>
<code>-DCOMPILATION_COMMENT=<em><code>string</code></em></code></p>
<p>Описательный комментарий об окружающей среде компиляции.</li>

<li><a name="option_cmake_default_charset"></a>
<code>-DDEFAULT_CHARSET=<em><code>charset_name</code></em></code></p>
<p>Набор символов сервера. По умолчанию, MySQL использует
<code>latin1</code> (cp1252 West European).</p>

<p><em><code>charset_name</code></em> может быть одним из
<code>binary</code>, <code>armscii8</code>,
<code>ascii</code>, <code>big5</code>,
<code>cp1250</code>, <code>cp1251</code>,
<code>cp1256</code>, <code>cp1257</code>,
<code>cp850</code>, <code>cp852</code>,
<code>cp866</code>, <code>cp932</code>,
<code>dec8</code>, <code>eucjpms</code>,
<code>euckr</code>, <code>gb2312</code>,
<code>gbk</code>, <code>geostd8</code>,
<code>greek</code>, <code>hebrew</code>,
<code>hp8</code>, <code>keybcs2</code>,
<code>koi8r</code>, <code>koi8u</code>,
<code>latin1</code>, <code>latin2</code>,
<code>latin5</code>, <code>latin7</code>,
<code>macce</code>, <code>macroman</code>,
<code>sjis</code>, <code>swe7</code>,
<code>tis620</code>, <code>ucs2</code>,
<code>ujis</code>, <code>utf8</code>,
<code>utf8mb4</code>, <code>utf16</code>,
<code>utf16le</code>, <code>utf32</code>.
Допустимые наборы символов перечислены в файле
<code>cmake/character_sets.cmake</code>
как значения <code>CHARSETS_AVAILABLE</code>.
Это значение может быть установлено при запуске сервера с опцией
<a href="server.htm#sysvar_character_set_server"><code>
--character_set_server</code></a>.</li>

<li><a name="option_cmake_default_collation"></a>
<code>-DDEFAULT_COLLATION=<em><code>collation_name</code></em></code></p>
<p>Сопоставление сервера. По умолчанию используется
<code>latin1_swedish_ci</code>. Используйте
<a href="sql.htm#show-collation"><code>SHOW COLLATION</code></a>, чтобы
определить, какие сопоставления доступны для каждого набора символов.
Это значение может быть установлено при запуске сервера с опцией
<a href="server.htm#sysvar_collation_server"><code>--collation_server</code>
</a>.</li>

<li><a name="option_cmake_disable_psi_cond"></a>
<code>-DDISABLE_PSI_COND=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку условия Performance Schema.
Значение по умолчанию <code>OFF</code> (включать).</li>

<li><a name="option_cmake_disable_psi_file"></a>
<code>-DDISABLE_PSI_FILE=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку файлов Performance Schema.
Значение по умолчанию <code>OFF</code> (включать).</li>

<li><a name="option_cmake_disable_psi_idle"></a>
<code>-DDISABLE_PSI_IDLE=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку ожидания Performance Schema.
Значение по умолчанию <code>OFF</code> (включать).</li>

<li><a name="option_cmake_disable_psi_memory"></a>
<code>-DDISABLE_PSI_MEMORY=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку памяти Performance Schema.
Значение по умолчанию <code>OFF</code> (включать).</li>

<li><a name="option_cmake_disable_psi_metadata"></a>
<code>-DDISABLE_PSI_METADATA=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку метаданных Performance Schema.
Значение по умолчанию <code>OFF</code> (включать).</li>

<li><a name="option_cmake_disable_psi_mutex"></a>
<code>-DDISABLE_PSI_MUTEX=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку mutex Performance Schema.</li>

<li><a name="option_cmake_disable_psi_rwlock"></a>
<code>-DDISABLE_PSI_RWLOCK=<em><code>bool</code></em></code></p
<p>>Исключить ли инструментовку Performance Schema rwlock.</li>

<li><a name="option_cmake_disable_psi_socket"></a>
<code>-DDISABLE_PSI_SOCKET=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку сокетов Performance Schema.</li>

<li><a name="option_cmake_disable_psi_sp"></a>
<code>-DDISABLE_PSI_SP=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку сохраненных подпрограмм Performance Schema.
</li>

<li><a name="option_cmake_disable_psi_stage"></a>
<code>-DDISABLE_PSI_STAGE=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку этапа Performance Schema.</li>

<li><a name="option_cmake_disable_psi_statement"></a>
<code>-DDISABLE_PSI_STATEMENT=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку запросов Performance Schema.</li>

<li><a name="option_cmake_disable_psi_statement_digest"></a>
<code>-DDISABLE_PSI_STATEMENT_DIGEST=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку Performance Schema statement_digest.</li>

<li><a name="option_cmake_disable_psi_table"></a>
<code>-DDISABLE_PSI_TABLE=<em><code>bool</code></em></code></p>
<p>Исключить ли инструментовку таблиц Performance Schema.</li>

<li><a name="option_cmake_disable_shared"></a>
<code>-DDISABLE_SHARED=<em><code>bool</code></em></code></p>
<p>Запретить ли сборку совместно используемых библиотек и собирать зависимый
от позиции код. Значение по умолчанию <code>OFF</code>
(собрать независимый от позиции код).</p>

<p>Включение этой опции отключает <code>-fPIC</code>, в результате
совместно используемые библиотеки не созданы, включая плагины и компоненты.
Вызов <code>CMake</code> производит это предупреждение:
<code>Dynamic plugins are disabled</code>.</li>

<li><a name="option_cmake_download_boost"></a>
<code>-DDOWNLOAD_BOOST=<em><code>bool</code></em></code></p>
<p>Загрузить ли библиотеку Boost. Значение по умолчанию <code>OFF</code>.</p>
</li>

<li><a name="option_cmake_download_boost_timeout"></a>
<code>-DDOWNLOAD_BOOST_TIMEOUT=<em><code>seconds</code></em></code></p>
<p>Тайм-аут в секундах для того, чтобы загрузить библиотеку Boost.
Значение по умолчанию составляет 600 секунд.</p></li>

<li><a name="option_cmake_enable_debug_sync"></a>
<code>-DENABLE_DEBUG_SYNC=<em><code>bool</code></em></code></p>
<p>Собрать ли средство Debug Sync facility в сервер. Это средство
используется для тестирования и отладки. Эта опция включена по умолчанию, но
не имеет никакого эффекта, если MySQL не сконфигурирован с отладкой.
Если отладка включена, и Вы хотите отключить Debug Sync, надо использовать
<a href="#option_cmake_enable_debug_sync"><code>
-DENABLE_DEBUG_SYNC=0</code></a>.</p>

<p>Когда собрано, Debug Sync отключена по умолчанию во время выполнения.
Чтобы включить, запустите <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a> с опцией
<a href="server.htm#option_mysqld_debug-sync-timeout"><code>
--debug-sync-timeout=<em><code>N</code></em></code></a>, где
<em><code>N</code></em> значение тайм-аута, больше чем 0. Значение по
умолчанию 0, которое отключает Debug Sync. <em><code>N</code></em> становится
тайм-аутом значения по умолчанию для отдельных пунктов синхронизации.</p>

<p>Синхронизирующая проверка отладки <code>InnoDB</code> доступна, когда
отладка собрана с использованием опции
<a href="#option_cmake_with_debug"><code>WITH_DEBUG</code></a>.
</p>

<p>Для описания средства Debug Sync и пунктов синхронизации см.
<a href="../../../dev.mysql.com/doc/internals/en/test-synchronization.html"
target="_top">MySQL Internals: Test Synchronization</a>.</li>

<li><a name="option_cmake_enable_downloads"></a>
<code>-DENABLE_DOWNLOADS=<em><code>bool</code></em></code></p>
<p>Загрузить ли дополнительные файлы. Например, с этой включенной опцией,
<span><strong>CMake</strong></span> загружает дистрибутив Google Test,
который используется испытательным набором, чтобы выполнить тесты модуля.
</li>

<li><a name="option_cmake_enable_dtrace"></a>
<code>-DENABLE_DTRACE=<em><code>bool</code></em></code></p>
<p>Включать ли поддержку исследований DTrace. Для информации о DTrace см.
<a href="server.htm#dba-dtrace-server">раздел 6.8</a>.</li>

<li><a name="option_cmake_enable_gcov"></a>
<code>-DENABLE_GCOV=<em><code>bool</code></em></code></p>
<p>Включать ли поддержку gcov (Linux только).</li>

<li><a name="option_cmake_enable_gprof"></a>
<code>-DENABLE_GPROF=<em><code>bool</code></em></code></p>
<p>Включить ли <code>gprof</code> (Linux только).</li>

<li><a name="option_cmake_enabled_local_infile"></a>
<code>-DENABLED_LOCAL_INFILE=<em><code>bool</code></em></code></p>
<p>Включить ли <code>LOCAL</code> в библиотеке клиента для
<a href="sql.htm#load-data"><code>LOAD DATA INFILE</code></a>.</p>

<p>Эта опция управляет на стороне клиента <code>LOCAL</code>,
но способность может быть установлена на стороне сервера при запуске сервера
с опцией <a href="server.htm#sysvar_local_infile"><code>--local-infile</code>
</a>. См. <a href="security.html#load-data-local">раздел 7.1.6</a>.</li>

<li><a name="option_cmake_enabled_profiling"></a>
<code>-DENABLED_PROFILING=<em><code>bool</code></em></code></p>
<p>Включить ли код профилирования запроса (для
<a href="sql.htm#show-profile"><code>SHOW PROFILE</code></a> и
<a href="sql.htm#show-profiles"><code>SHOW PROFILES</code></a>).</li>

<li><a name="option_cmake_force_unsupported_compiler"></a>
<code>-DFORCE_UNSUPPORTED_COMPILER=<em><code>bool</code></em></code></p>
<p>По умолчанию <span><strong>CMake</strong></span>
проверяет на минимальные версии поддержанных компиляторов:
<span><strong>gcc</strong></span> 4.4 (Linux, Solaris), Sun Studio 12u2
(Solaris client library), Clang 3.3 (OS X, FreeBSD).
Чтобы отключить эту проверку, надо использовать
<a href="#option_cmake_force_unsupported_compiler"><code>
-DFORCE_UNSUPPORTED_COMPILER=ON</code></a>.</li>

<li><a name="option_cmake_ignore_aio_check"></a>
<code>-DIGNORE_AIO_CHECK=<em><code>bool</code></em></code></p>
<p>Если опция <a href="#option_cmake_build_config"><code>
-DBUILD_CONFIG=mysql_release</code></a> дана на Linux, библиотека
<code>libaio</code> должна быть скомпонована по умолчанию. Если Вы не имеете
<code>libaio</code> или не хотите устанавливать, Вы можете подавить проверку
на это, определяя <a href="#option_cmake_ignore_aio_check"><code>
-DIGNORE_AIO_CHECK=1</code></a>.</li>

<li><a name="option_cmake_max_indexes"></a>
<code>-DMAX_INDEXES=<em><code>num</code></em></code></p>
<p>Максимальное количество индексов на таблицу. Значение по умолчанию 64.
Максимум 255. Значения, меньшие чем 64, проигнорированы, и значение
по умолчанию 64 используется.</li>

<li><a name="option_cmake_mysql_maintainer_mode"></a>
<code>-DMYSQL_MAINTAINER_MODE=<em><code>bool</code></em></code></p>
<p>Включить ли среду проектирования разработчика MySQL. Если включена, эта
опция заставляет предупреждения компилятора стать ошибками.</li>

<li><a name="option_cmake_mutex_type"></a>
<code>-DMUTEX_TYPE=<em><code>type</code></em></code></p>
<p>Тип mutex, используемый <code>InnoDB</code>. Опции включают:</p>
<ul><li><p><code>event</code>: Используйте event mutex.
Это значение по умолчанию и оригинальная
реализация <code>InnoDB</code> mutex.</li>

<li><code>sys</code>: POSIX mutexes в UNIX. Использует
в Windows объекты <code>CRITICAL_SECTION</code> при наличии.</li>
<li><code>futex</code>: Linux futex вместо переменных условия, чтобы
планировать потоки ожидания.</p></li></ul></li>

<li><p><a name="option_cmake_mysql_project_name"></a>
<code>-DMYSQL_PROJECT_NAME=<em><code>name</code></em></code></p>
<p>В Windows или OS X название проекта, чтобы соединить в
проектное имя файла.</li>

<li><a name="option_cmake_mysql_tcp_port"></a>
<code>-DMYSQL_TCP_PORT=<em><code>port_num</code></em></code></p>
<p>Порт TCP/IP. По умолчанию 3306. Это значение может быть установлено при
запуске сервера с опцией <a href="server.htm#option_mysqld_port"><code>
--port</code></a>.</li>

<li><a name="option_cmake_mysql_unix_addr"></a>
<code>-DMYSQL_UNIX_ADDR=<em><code>file_name</code></em></code></p>
<p>Файл сокета Unix, на котором сервер прислушивается к сокетным
соединениям. Это должно быть абсолютным путем. Значение по умолчанию
<code>/tmp/mysql.sock</code>. Это значение может быть установлено при запуске
сервера с опцией <a href="server.htm#option_mysqld_socket"><code>--socket
</code></a>.</li>

<li><a name="option_cmake_optimizer_trace"></a>
<code>-DOPTIMIZER_TRACE=<em><code>bool</code></em></code></p>
<p>Поддержать ли трассировку оптимизатора. См.
<a href="../../../dev.mysql.com/doc/internals/en/optimizer-tracing.html"
target="_top">MySQL Internals: Tracing the Optimizer</a>.</li>

<li><a name="option_cmake_use_ld_gold"></a>
<code>-DUSE_LD_GOLD=<em><code>bool</code></em></code></p>
<p>Использовать ли GNU <span><strong>gold</strong></span>.</li>

<li><a name="option_cmake_win_debug_no_inline"></a>
<code>-DWIN_DEBUG_NO_INLINE=<em><code>bool</code></em></code></p>
<p>Запретить ли функцию inlining в Windows. Значение по умолчанию
выключено (inlining включена).</li>

<li><a name="option_cmake_with_asan"></a>
<code>-DWITH_ASAN=<em><code>bool</code></em></code></p>
<p>Включить ли AddressSanitizer для компиляторов, которые поддерживают его.
Значение по умолчанию выключено.</li>

<li><a name="option_cmake_with_authentication_pam"></a>
<code>-DWITH_AUTHENTICATION_PAM=<em><code>bool</code></em></code></p>
<p>Создать ли плагин аутентификации PAM
для исходных деревьев, которые включают этот плагин. См.
<a href="../../../dev.mysql.com/doc/refman/5.7/en/pam-authentication-plugin.html"
target="_top">The PAM Authentication Plugin</a>.
Если эта опция определена, но плагин не может быть собран,
сборка терпит неудачу.</li>

<li><a name="option_cmake_with_boost"></a>
<code>-DWITH_BOOST=<em><code>path_name</code></em></code></p>
<p>Библиотека Boost требуется для сборки MySQL. Эти опции
<span><strong>CMake</strong></span> включают управление исходным
местоположением библиотеки, и загрузить ли это автоматически:</p>

<ul><li><p><a href="#option_cmake_with_boost"><code>
-DWITH_BOOST=<em><code>path_name</code></em></code></a>
определяет местоположение каталога библиотеки.
Также возможно определить местоположение, устанавливая переменные
окружения <code>BOOST_ROOT</code> или <code>WITH_BOOST</code>.</p>

<p><a href="#option_cmake_with_boost"><code>
-DWITH_BOOST=system</code></a> также разрешена и указывает, что правильная
версия Boost установлена на узле компиляции в стандартном местоположении. В
этом случае установленная версия используется, а не версия, которая
включена в исходные тексты MySQL.</li>

<li><a href="#option_cmake_download_boost"><code>
-DDOWNLOAD_BOOST=<em><code>bool</code></em></code></a>
определяет, загрузить ли пакет Boost если он не присутствует
в указанном местоположении. Значение по умолчанию <code>OFF</code>.</li>

<li><a href="#option_cmake_download_boost_timeout"><code>
-DDOWNLOAD_BOOST_TIMEOUT=<em><code>seconds</code></em></code></a>
тайм-аут в секундах для того, чтобы загрузить библиотеку Boost.
Значение по умолчанию составляет 600 секунд.</p></li></ul>

<p>Например, если Вы обычно создаете MySQL, помещая вывод объекта в
<code>bld</code>, Вы можете собрать с Boost:
<pre>
mkdir bld
cd bld
cmake .. -DDOWNLOAD_BOOST=ON -DWITH_BOOST=$HOME/my_boost
</pre>

<p>Это заставляет загрузить Boost в подкаталог
<code>my_boost</code> Вашего домашнего каталога.
Если необходимая версия уже там, никакая загрузка не будет сделана. Если
необходимая версия Повышения изменяется, более новая версия загружена.</p>

<p>Если Boost уже установлена в местном масштабе, и Ваш компилятор находит
заголовочные файлы самостоятельно, возможно, не надо определить предыдущие
опции. Однако, если версия, требуемая изменениями MySQL, не была обновлена,
Вы можете иметь проблемы. Используя опции <span><strong>CMake</strong></span>,
соберете все нормально.</li>

<li><a name="option_cmake_with_client_protocol_tracing"></a>
<code>-DWITH_CLIENT_PROTOCOL_TRACING=<em><code>bool</code></em></code></p>
<p>Встроить ли клиентский протокол, прослеживающий структуру в библиотеку
клиента. По умолчанию, эта опция включена.</p>

<p>Для информации о теме, см.
<a href="extend.htm#writing-protocol-trace-plugins">раздел 26.2.4.11</a>.</p>
<p>См. также опцию <a href="#option_cmake_with_test_trace_plugin">
<code>WITH_TEST_TRACE_PLUGIN</code></a>.</li>

<li><a name="option_cmake_with_debug"></a>
<code>-DWITH_DEBUG=<em><code>bool</code></em></code></p>
<p>Включать ли поддержку отладки.</p>

<p>Конфигурирование MySQL с отладкой позволяет Вам использовать опцию
<a href="server.htm#option_mysqld_debug"><code>--debug="d,parser_debug"
</code></a>, когда Вы запускаете сервер. Это вызывает анализатор Bison,
который используется, чтобы обработать запросы SQL, чтобы вывести
трассировку анализатора к стандартному ошибочному выводу сервера.
Как правило, этот вывод написан в журнал ошибок.</p>

<p>Синхронизирующая проверка отладки <code>InnoDB</code>
определена под <code>UNIV_DEBUG</code> и доступна, когда отладка собрана с
опцией <a href="#option_cmake_with_debug"><code>WITH_DEBUG</code>
</a>. Когда отладка собрана, опция
<a href="innodb.htm#sysvar_innodb_sync_debug"><code>innodb_sync_debug</code>
</a> может использоваться, чтобы включить или отключить
проверку отладки <code>InnoDB</code>.</li>

<li><a name="option_cmake_with_default_feature_set"></a>
<code>-DWITH_DEFAULT_FEATURE_SET=<em><code>bool</code></em></code></p>
<p>Использовать ли флаги из
<code>cmake/build_configurations/feature_set.cmake</code>.</li>

<li><a name="option_cmake_with_editline"></a>
<code>-DWITH_EDITLINE=<em><code>value</code></em></code></p>
<p>Которую библиотеку <code>libedit</code>/<code>editline</code>
использовать. Разрешенные значения
<code>bundled</code> (по умолчанию) и <code>system</code>.</li>

<li><a name="option_cmake_with_embedded_server"></a>
<code>-DWITH_EMBEDDED_SERVER=<em><code>bool</code></em></code></p>
<p>Создать ли встроенную библиотеку <code>libmysqld</code> сервера.</li>

<li><a name="option_cmake_with_embedded_shared_library"></a>
<code>-DWITH_EMBEDDED_SHARED_LIBRARY=<em><code>bool</code></em></code></p>
<p>Создать ли совместно используемую встроенную
библиотеку <code>libmysqld</code> сервера.</li>

<li><a name="option_cmake_with_innodb_extra_debug"></a>
<code>-DWITH_INNODB_EXTRA_DEBUG=<em><code>bool</code></em></code></p>
<p>Включать ли дополнительную отладку InnoDB.</p>

<p>Включение <code>WITH_INNODB_EXTRA_DEBUG</code>
включает дополнительные проверки отладки InnoDB. Эта опция может быть
включена, только когда включена
<a href="#option_cmake_with_debug"><code>WITH_DEBUG</code></a>.
</li>

<li><a name="option_cmake_with_innodb_memcached"></a>
<code>-DWITH_INNODB_MEMCACHED=<em><code>bool</code></em></code></p>
<p>Произвести ли совместно используемые библиотеки memcached
(<code>libmemcached.so</code> и
<code>innodb_engine.so</code>).</li>

<li><a name="option_cmake_with_keyring_test"></a>
<code>-DWITH_KEYRING_TEST=<em><code>bool</code></em></code></p>
<p>Создать ли тестовую программу, которая сопровождает плагин
<code>keyring_file</code>. Значение по умолчанию <code>OFF</code>.
Испытательный исходный код файла расположен в каталоге
<code>plugin/keyring/keyring-test</code>.</li>

<li><a name="option_cmake_with_libevent"></a>
<code>-DWITH_LIBEVENT=<em><code>string</code></em></code></p>
<p>Которую библиотеку <code>libevent</code>
использовать. Разрешенные значения <code>bundled</code> (по умолчанию),
<code>system</code> и <code>yes</code>. Если Вы определяете
<code>system</code> или <code>yes</code>, используется системная
библиотека <code>libevent</code>, если существует.
Если системная библиотека не найдена, используется внутренняя
<code>libevent</code>. Библиотека <code>libevent</code> требуется для
<code>InnoDB</code> memcached.</li>

<li><a name="option_cmake_with_libwrap"></a>
<code>-DWITH_LIBWRAP=<em><code>bool</code></em></code></p>
<p>Включать ли <code>libwrap</code> (TCP wrappers).</li>

<li><a name="option_cmake_with_lz4"></a>
<code>-DWITH_LZ4=<em><code>lz4_type</code></em></code></p>
<p><a href="#option_cmake_with_lz4"><code>WITH_LZ4</code></a>
указывает на источник поддержки <code>zlib</code>:</p>

<ul><li><p><code>bundled</code>: Использовать <code>lz4</code> из комплекта
дистрибутива. Это значение по умолчанию.</li>
<li><code>system</code>: Использовать системную <code>lz4</code>. Если
<a href="#option_cmake_with_lz4"><code>WITH_LZ4</code></a>
установлена в это значение, утилита
<a href="programs.htm#lz4-decompress"><span><strong>lz4_decompress</strong>
</span></a> не собирается. В этом случае системная команда
<span><strong>lz4</strong></span> может использоваться вместо нее.
</p></li></ul></li>

<li><p><a name="option_cmake_with_msan"></a>
<code>-DWITH_MSAN=<em><code>bool</code></em></code></p>
<p>Включить ли MemorySanitizer, для компиляторов, которые поддерживают его.
Значение по умолчанию: выключено.</p>
<p>Для этой опции, чтобы иметь эффект если включена, все библиотеки,
скомпонованные с MySQL, должны быть также собраны с включенной опцией.</li>

<li><a name="option_cmake_with_mecab"></a>
<code>-DWITH_MECAB={disabled|system|<em><code>path_name</code></em>}</code>
</p>
<p>Используйте эту опцию, чтобы собрать анализатор MeCab. Если Вы установили
MeCab в его каталог установки по умолчанию, установите
<code>-DWITH_MECAB=system</code>. Опция <code>system</code>
относится к установкам MeCab, выполненным от исходных текстов или
из двоичных файлов, используя родную управленческую утилиту пакета. Если Вы
устанавливали MeCab в пользовательский каталог установки, определите путь к
установке MeCab. Например, <code>-DWITH_MECAB=/opt/mecab</code>. Если опция
<code>system</code> не работает, определите путь установки MeCab, который
должен работать во всех случаях.</p>
<p>Подробности есть в <a href="funct.htm#fulltext-search-mecab">разделе
13.9.9</a>.</li>

<li><a name="option_cmake_with_mscrt_debug"></a>
<code>-DWITH_MSCRT_DEBUG=<em><code>bool</code></em></code></p>
<p>Включить ли отслеживание утечки памяти Visual Studio CRT.
Значение по умолчанию <code>OFF</code>.</li>

<li><a name="option_cmake_with_protobuf"></a>
<code>-DWITH_PROTOBUF=<em><code>protobuf_type</code></em></code></p>
<p>Какой буферный пакет протокола использовать.
<em><code>protobuf_type</code></em> может быть одним из следующих значений:
</p>

<ul><li><p><code>bundled</code>: Используйте пакет из комплекта дистрибутива.
Это значение по умолчанию.</li>
<li><code>system</code>: Используйте пакет, установленный в системе.
</p></li></ul>
<p>Другие значения проигнорированы, с отступлением к <code>bundled</code>.
</li>

<li><a name="option_cmake_with_rapid"></a>
<code>-DWITH_RAPID=<em><code>bool</code></em></code></p>
<p>Создать ли плагины цикла быстрого развития. Когда включено, создается
каталог <code>rapid</code>, содержащий эти плагины. Значение по умолчанию
<code>ON</code>. Если каталог <code>rapid</code> удален из исходного дерева,
тогда значение по умолчанию становится <code>OFF</code>.</li>

<li><a name="option_cmake_with_ssl"></a>
<code>-DWITH_SSL={<em><code>ssl_type</code></em></code>|<em><code>
path_name</code></em>}</p>
<p>Тип поддержки SSL или путь к OpenSSL, чтобы использовать.</p>

<ul><li><p><em><code>ssl_type</code></em> может быть:</p>
<ul><li><p><code>yes</code>: Системная библиотека SSL, если есть.
Иначе комплектная библиотека дистрибутива.</li>

<li><code>bundled</code>: Пользуйтесь библиотекой SSL из дистрибутива.
Это значение по умолчанию.</li>
<li><code>system</code>: Системная библиотека SSL.</p></li></ul></li>

<li><p><em><code>path_name</code></em>
путь к установке OpenSSL, чтобы использовать. Это может быть предпочтительным
использованию <em><code>ssl_type</code></em>=<code>system</code>,
поскольку это может препятствовать тому, чтобы CMake обнаружил и использовал
более старую или неправильную версию OpenSSL, установленную в системе.
Другой разрешенный способ сделать ту же самую вещь состоит в том, чтобы
установить <code>CMAKE_PREFIX_PATH</code> в
<em><code>path_name</code></em>.</p></li></ul></li>

<li><a name="option_cmake_with_systemd"></a>
<code>-DWITH_SYSTEMD=<em><code>bool</code></em></code></p>
<p>Включить ли установку файлов поддержки systemd. По умолчанию эта опция
отключена. Когда включено, файлы поддержки установлены systemd, и такие
скрипты, как <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe
</strong></span></a> и скрипт инициализации System V не ставятся.
На платформах, где systemd не доступен, включение
<a href="#option_cmake_with_systemd"><code>WITH_SYSTEMD</code></a>
приведет к ошибке <span><strong>CMake</strong></span>.</p>

<p>Для получения дополнительной информации об использовании systemd см.
<a href="#using-systemd">раздел 2.5.9</a>.
Этот раздел также включает информацию об определении опций, ранее указанных в
группах <code>[mysqld_safe]</code>. Поскольку
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a> не установлен, когда используется systemd, такие опции должны
быть определены иначе.</li>

<li><a name="option_cmake_with_test_trace_plugin"></a>
<code>-DWITH_TEST_TRACE_PLUGIN=<em><code>bool</code></em></code></p>
<p>Создать ли испытательный плагин клиента трассировки протокола (см.
<a href="extend.htm#test-protocol-trace-plugin">раздел 26.2.4.11.1</a>).
По умолчанию эта опция отключена. Включение этой опции не имеет никакого
эффекта, если <a href="#option_cmake_with_client_protocol_tracing">
<code>WITH_CLIENT_PROTOCOL_TRACING</code></a> включена. Если MySQL
сконфигурирован с обеими включенными опциями, библиотека клиента
<code>libmysqlclient</code> создана с испытательным плагином отслеживания
протокола, а все стандартные клиенты MySQL загружают плагин. Однако, даже
когда испытательный плагин включен, он не имеет никакого эффекта по
умолчанию. Управление плагином предоставлено, используя переменные окружения,
см. <a href="extend.htm#test-protocol-trace-plugin">раздел 26.2.4.11.1</a>.
</p>

<p><span><em>Не</em></span> включайте опцию
<a href="#option_cmake_with_test_trace_plugin"><code>
WITH_TEST_TRACE_PLUGIN</code></a>, если Вы хотите использовать свои
собственные плагины трассировки протокола, потому что только один такой
плагин может быть загружен за один раз, и ошибка происходит для попыток
загрузить второй. Если Вы уже создали MySQL с испытательным плагином
отслеживания протокола, Вы должны восстановить MySQL без этого прежде, чем Вы
сможете использовать свои собственные плагины.</p>
<p>Подробности есть в <a href="extend.htm#writing-protocol-trace-plugins">
разделе 26.2.4.11</a>.</li>

<li><a name="option_cmake_with_tsan"></a>
<code>-DWITH_TSAN=<em><code>bool</code></em></code></p>
<p>Включить ли ThreadSanitizer для компиляторов, которые поддерживают его.
Значение по умолчанию: выключено.</li>

<li><a name="option_cmake_with_ubsan"></a>
<code>-DWITH_UBSAN=<em><code>bool</code></em></code></p>
<p>Включить ли Undefined Behavior Sanitizer для компиляторов, которые
поддерживают его. Значение по умолчанию: выключено.</li>

<li><a name="option_cmake_with_unixodbc"></a>
<code>-DWITH_UNIXODBC=<em><code>1</code></em></code></p>
<p>Включает поддержку unixODBC для Connector/ODBC.</li>

<li><a name="option_cmake_with_valgrind"></a>
<code>-DWITH_VALGRIND=<em><code>bool</code></em></code></p>
<p>Собрать ли в заголовочных файлах Valgrind, который выставляет
Valgrind API в MySQL. Значение по умолчанию <code>OFF</code>.</p>

<p>Чтобы произвести Valgrind-отладку,
<a href="#option_cmake_with_valgrind"><code>-DWITH_VALGRIND=1
</code></a> обычно объединяется с
<a href="#option_cmake_with_debug"><code>-DWITH_DEBUG=1</code></a>.
См. <a href="../../../dev.mysql.com/doc/internals/en/debug-configurations.html"
target="_top">Building Debug Configurations</a>.</li>

<li><a name="option_cmake_with_zlib"></a>
<code>-DWITH_ZLIB=<em><code>zlib_type</code></em></code></p>
<p>Некоторые особенности, такие как функции
<a href="funct.htm#function_compress"><code>COMPRESS()</code></a> и
<a href="funct.htm#function_uncompress"><code>UNCOMPRESS()</code></a> и
сжатие протокола клиент-сервер, требуют, чтобы сервер был создан с поддержкой
библиотеки сжатия. <a href="#option_cmake_with_zlib"><code>
WITH_ZLIB</code></a> указывает на источник поддержки <code>zlib</code>:</p>

<ul><li><p><code>bundled</code>: комплектная библиотека <code>zlib</code>
в дистрибутиве. Это значение по умолчанию.</li>
<li><code>system</code>: Системная библиотека <code>zlib</code>. Если
<a href="#option_cmake_with_zlib"><code>WITH_ZLIB</code></a>
установлена в это значение, утилита <a href="programs.htm#zlib-decompress">
<span><strong>zlib_decompress</strong></span></a> не собирается.
В этом случае команда <span><strong>openssl zlib</strong></span>
может использоваться вместо этого.</p></li></ul></li>

<li><p><a name="option_cmake_without_server"></a>
<code>-DWITHOUT_SERVER=<em><code>bool</code></em></code></p>
<p>Создать ли пакет без сервера MySQL. Значение по умолчанию
<code>OFF</code>, которое действительно создает сервер.</p></li></ul>

<h4><a name="cmake-compiler-flags"></a>Флаги компилятора</h4>
<ul><li><p><a name="option_cmake_cmake_c_flags"></a>
<code>-DCMAKE_C_FLAGS="<em><code>flags</code></em></code>"</p>
<p>Флаги для компилятора C.</li>

<li><a name="option_cmake_cmake_cxx_flags"></a>
<code>-DCMAKE_CXX_FLAGS="<em><code>flags</code></em></code>"</p>
<p>Флаги для компилятора C++.</li>

<li><a name="option_cmake_with_default_compiler_options"></a>
<code>-DWITH_DEFAULT_COMPILER_OPTIONS=<em><code>bool</code></em></code></p>
<p>Использовать ли флаги из
<code>cmake/build_configurations/compiler_options.cmake</code>.</p>

<p>Все флаги оптимизации были тщательно выбраны и проверены командой MySQL.
Переопределение их может привести к неожиданным результатам и сделано на
ваш собственный риск.</p></li></ul>

<p>Чтобы определить Ваши собственные флаги компилятора C и C ++, для флагов,
которые не затрагивают оптимизацию, используют опции CMake
<a href="#option_cmake_cmake_c_flags"><code>CMAKE_C_FLAGS</code>
</a> и <a href="#option_cmake_cmake_cxx_flags"><code>
CMAKE_CXX_FLAGS</code></a>.</p>

<p>Обеспечивая Ваши собственные флаги компилятора, Вы могли бы хотеть
определить также и <a href="#option_cmake_cmake_build_type"><code>
CMAKE_BUILD_TYPE</code></a>.</p>

<p>Например, чтобы создать 32-битную версию на 64-bit Linux-системе:
<pre>
shell&gt; mkdir bld
shell&gt; cd bld
shell&gt; cmake .. -DCMAKE_C_FLAGS=-m32 \
                   -DCMAKE_CXX_FLAGS=-m32 -DCMAKE_BUILD_TYPE=RelWithDebInfo
</pre>

<p>Если Вы устанавливаете флаги оптимизации
(<code>-O<em><code>number</code></em></code>), Вы должны установить опции
<code>CMAKE_C_FLAGS_<em><code>build_type</code></em></code> и\или
<code>CMAKE_CXX_FLAGS_<em><code>build_type</code></em></code>, где
<em><code>build_type</code></em> соответствует значению
<a href="#option_cmake_cmake_build_type"><code>CMAKE_BUILD_TYPE
</code></a>. Чтобы определить иную оптимизацию для типа сборки по умолчанию
(<code>RelWithDebInfo</code>), задайте опции
<code>CMAKE_C_FLAGS_RELWITHDEBINFO</code> и
<code>CMAKE_CXX_FLAGS_RELWITHDEBINFO</code>. Например, чтобы собрать на Linux
с <code>-O3</code> символами отладки, сделайте это:
<pre>
shell&gt; cmake .. -DCMAKE_C_FLAGS_RELWITHDEBINFO="-O3 -g" \
                   -DCMAKE_CXX_FLAGS_RELWITHDEBINFO="-O3 -g"
</pre>

<h3><a name="compilation-problems"></a>2.8.5. Проблемы сборки MySQL</h3>
<p>Решение многих проблем вовлекает реконфигурирование.
Примите во внимание следующее:</p>

<ul><li><p>Если <span><strong>CMake</strong></span> выполнен после того, как
он был ранее выполнен, он может использовать информацию, которая была собрана
во время предыдущего запуска. Эта информация хранится в
<code>CMakeCache.txt</code>. Когда <span><strong>CMake</strong></span>
запускается, он ищет тот файл и читает его содержание, если он существует,
при условии, что информация все еще правильна. Это предположение недопустимо,
когда Вы реконфигурировали пакет.</li>

<li>Каждый раз, когда Вы выполняете <span><strong>CMake</strong></span>,
Вы должны запустить <span><strong>make</strong></span>
снова, чтобы повторно собрать. Однако, Вы можете хотеть удалить старые файлы
объекта, потому что они были собраны, используя иные параметры конфигурации.
</p></li></ul>

<p>Чтобы препятствовать тому, чтобы старые файлы объектов или информация о
конфигурации использовались, выполните следующие команды прежде, чем
запустить повторно <span><strong>CMake</strong></span>:</p>

<p>В Unix:
<pre>
shell&gt; make clean
shell&gt; rm CMakeCache.txt
</pre>

<p>В Windows:
<pre>
shell&gt; devenv MySQL.sln /clean
shell&gt; del CMakeCache.txt
</pre>

<p>Если Вы создаете за пределами исходного дерева, удалите и обновите Ваш
каталог сборки прежде, чем запустить повторно <span><strong>CMake</strong>
</span>. Для инструкций по сборке за пределами исходного дерева см.
<a href="../../../dev.mysql.com/doc/internals/en/cmake.html" target="_top">
How to Build MySQL Server with CMake</a>.</p>

<p>На некоторых системах предупреждения могут произойти из-за различий в
системе. Следующий список описывает другие проблемы, которые произошли чаще
всего при сборке MySQL:</p>

<ul><li><p>Определите, какие компиляторы C и C++ использовать, Вы можете
определить переменные окружения <code>CC</code> и <code>CXX</code>. Пример:
<pre>
shell&gt; CC=gcc
shell&gt; CXX=g++
shell&gt; export CC CXX
</pre>

<p>Чтобы определить Ваши собственные флаги компилятора, используйте опции
<a href="#option_cmake_cmake_c_flags"><code>CMAKE_C_FLAGS</code>
</a> и <a href="#option_cmake_cmake_cxx_flags"><code>
CMAKE_CXX_FLAGS</code></a>.</p></li>

<li>Чтобы видеть, какие команды выполнены во время сборки,
после использования <span><strong>CMake</strong></span>, чтобы
сконфигурировать MySQL, выполните
<span><strong>make VERBOSE=1</strong></span> прежде
<span><strong>make</strong></span>.</li>

<li>Если компиляция терпит неудачу, проверьте включение опции
<a href="#option_cmake_mysql_maintainer_mode"><code>
MYSQL_MAINTAINER_MODE</code></a>. Этот режим заставляет предупреждения
компилятора стать ошибками, так что его отключение может
позволить компиляции продолжиться.</li>

<li>Если Ваша сборка терпит неудачу с такими ошибками, как какая-либо из
следующих, Вы должны обновить свою версию
<span><strong>make</strong></span> до GNU <span><strong>make</strong></span>:
<pre>
make: Fatal error in reader: Makefile, line 18:
Badly formed macro assignment
</pre>

<p>Или:
<pre>
make: file `Makefile' line 18: Must be a separator (:
</pre>

<p>Или:
<pre>
pthread.h: No such file or directory
</pre>

<p>Solaris и FreeBSD, как известно, имеют
проблемную программу <span><strong>make</strong></span>.</p>
<p>GNU <span><strong>make</strong></span> 3.75 точно работает.</li>

<li>Файл <code>sql_yacc.cc</code> произведен от <code>sql_yacc.yy</code>.
Обычно процесс сборки не должен создать <code>sql_yacc.cc</code>,
потому что MySQL идет с предварительно произведенной копией.
Однако, если Вы действительно должны обновить это, Вы могли бы
столкнуться с этой ошибкой:
<pre>
"sql_yacc.yy", line <em><code>xxx</code></em> fatal: default action causes potential...
</pre>

<p>Это знак, что Ваша версия <span><strong>yacc</strong></span>
является несовершенной. Вы, вероятно, должны установить недавнюю версию
<span><strong>bison</strong></span> (GNU-версия
<span><strong>yacc</strong></span>) вместо этого.</p>

<p>Версии <span><strong>bison</strong></span> до 1.75
могут сообщить об этой ошибке:
<pre>
sql_yacc.yy:#####: fatal error: maximum table size (32767) exceeded
</pre>
<p>Максимальный табличный размер фактически не превышен, ошибка вызвана
ошибками в более старых версиях <span><strong>bison</strong></span>.
</p></li></ul>

<h3><a name="source-configuration-third-party"></a>2.8.6.
Конфигурация MySQL и имеющие отношение к третьей стороне инструменты</h3>
<p>Имеющие отношение к третьей стороне инструменты, которые должны определить
версию MySQL из исходных текстов MySQL, могут читать файл
<code>VERSION</code> в верхнем уровне каталога исходных текстов.
Файл перечисляет части версии отдельно. Например, если версия 8.0.4-m14,
файл похож на это:
<pre>
MYSQL_VERSION_MAJOR=8
MYSQL_VERSION_MINOR=0
MYSQL_VERSION_PATCH=4
MYSQL_VERSION_EXTRA=-m14
</pre>

<p>Если это не General Availablility (GA), значение
<code>MYSQL_VERSION_EXTRA</code> будет непусто.
В примере значение соответствует Milestone 14.</p>

<p>Чтобы создать пятизначное число из компонентов версии,
используйте эту формулу:
<pre>
MYSQL_VERSION_MAJOR*10000 + MYSQL_VERSION_MINOR*100 + MYSQL_VERSION_PATCH
</pre>

<h3><a name="source-installation-doxygen"></a>2.8.7.
Производство документации MySQL Doxygen</h3>
<p>Исходные тексты MySQL содержат внутреннюю документацию, использующую
Doxygen. Произведенный контент Doxygen доступен в
<a href="../../../dev.mysql.com/doc/dev/mysql-server/latest/default.htm" target="_top">
http://dev.mysql.com/doc/dev/mysql-server/latest/</a>.
Также возможно произвести этот контент в местном масштабе от исходного
дистрибутива MySQL, используя следующую процедуру:</p>

<ol type="1"><li><p>Установите <span><strong>doxygen</strong></span> 1.8.11
или выше. Дистрибутивы доступны здесь:
<pre>
<a href="../../../www.stack.nl/~dimitri/doxygen/download.html" target="_top">
http://www.stack.nl/~dimitri/doxygen/download.html</a>
</pre>

<p>После установки <span><strong>doxygen</strong></span>,
проверьте номер версии:
<pre>
shell&gt; doxygen --version
1.8.11
</pre></li>

<li>Поставьте PlantUML. Дистрибутивы доступны здесь:
<pre>
<a href="../../../plantuml.com/download.html" target="_top">
http://plantuml.com/download.html</a>
</pre>

<p>Когда Вы устанавливаете PlantUML на Windows (проверено на Windows 10), Вы
должны выполнить это, по крайней мере, однажды как администратор, чтобы
создать регистрационные ключи. Откройте консоль администратора и
выполните эту команду:
<pre>
java -jar <em><code>path-to-plantuml.jar</code></em>
</pre>
<p>Команда должна открыть окно GUI и не возвратить ошибки на консоль.</li>

<li>Поставьте Graphviz <span><strong>dot</strong></span>.
Дистрибутивы доступны здесь:
<pre>
<a href="../../../www.graphviz.org/default.htm" target="_top">http://www.graphviz.org/</a>
</pre>

<p>После установки Graphviz, проверьте доступность <code>dot</code>:
<pre>
shell&gt; which dot
/usr/bin/dot
shell&gt; dot -V
dot - graphviz version 2.28.0 (20130928.0220)
</pre></li>

<li>Установите переменную среды <code>PLANTUML_JAR_PATH</code>
к местоположению, где Вы устанавливали PlantUML. Например:
<pre>
export PLANTUML_JAR_PATH=<em><code>path-to-plantuml.jar</code></em>
</pre></li>

<li>Чтобы вызвать <span><strong>doxygen</strong></span>,
измените местоположение на верхний каталог Вашего дистрибутива исходного
текста MySQL и выполните эти команды:
<pre>
mkdir -p generated/doxygen
doxygen
</pre>

<p>Осмотрите журнал ошибок. Это доступно в файле
<code>doxyerror.log</code> каталога верхнего уровня.
Предполагая, что создание выполнено успешно, рассмотрите произведенный вывод,
используя браузер. Например:
<pre>
firefox generated/doxygen/html/index.html
</pre>
<p>Вы можете использовать иной браузер.</p></li></ol>

<h2><a name="postinstallation"></a>2.9. Постустановка и тестирование</h2>
<p>Этот раздел обсуждает задачи, которые Вы должны выполнить
после установки MySQL:</p>

<ul><li><p>В случае необходимости, инициализируйте каталог данных и составьте
таблицы привилегий MySQL. Для некоторых методов установки MySQL инициализация
каталога данных может быть сделана для Вас автоматически:</p>

<ul><li><p>Операции установки Windows, выполненные MySQL Installer,
инициализируют каталог данных автоматически.</li>
<li>Установка на Linux, используя дистрибутив RPM сервера.</li>

<li>Установка используя родную систему упаковки на многих платформах, включая
Linux Debian, Ubuntu Linux, Gentoo Linux и пр.</li>
<li>Установка на OS X из дистрибутива DMG.</p></li></ul>

<p>Для других платформ и типов установки, включая установку из общего
двоичного дистрибутива и исходных текстов, Вы должны инициализировать каталог
данных самостоятельно. Для инструкций см.
<a href="#data-directory-initialization">раздел 2.9.1</a>.</li>

<li>Запустите сервер и удостоверьтесь, что к нему можно получить доступ. Для
инструкций см. разделы <a href="#starting-server">2.9.2</a> и
<a href="#testing-server">2.9.3</a>.</li>

<li>Назначьте пароли на учетную запись <code>root</code> в таблицах
привилегий, если это не было уже сделано во время инициализации каталога
данных. Пароли предотвращают несанкционированный доступ к серверу MySQL. Для
инструкций см. <a href="#default-privileges">раздел 2.9.4</a>.
</li>

<li>Произвольно примите меры, чтобы сервер запустился и остановился
автоматически, когда Ваша система запускается и останавливается. Для
инструкций см. <a href="#automatic-start">раздел 2.9.5</a>.</li>

<li>Заполните таблицы часового пояса, чтобы включить распознавание названных
часовых поясов. Для инструкций см.
<a href="global.htm#time-zone-support">раздел 11.6</a>.</p></li></ul>

<p>Когда Вы готовы создать дополнительные учетные записи пользователя, Вы
можете найти информацию о системе управления доступом MySQL и ведении
учеток в разделах <a href="security.html#privilege-system">7.2</a> и
<a href="security.html#user-account-management">7.3</a>.</p>

<h3><a name="data-directory-initialization"></a>2.9.1.
Инициализация каталога данных</h3>
<p>После установки MySQL Вы должны инициализировать каталог данных, включая
таблицы в системной базе данных <code>mysql</code>.
Для некоторых методов установки MySQL инициализация каталога данных может
быть сделана автоматически, как описано в
<a href="#postinstallation">разделе 2.9</a>. Для других методов
установки, включая установку из двоичного дистрибутива и исходных текстов, Вы
должны инициализировать каталог данных самостоятельно.</p>

<p>Этот раздел описывает, как инициализировать каталог данных на Unix и
подобных Unix системах. Для Windows см.
<a href="#windows-postinstallation">раздел 2.3.7</a>.
Для некоторых предложенных команд, которые Вы можете использовать для теста,
является ли сервер доступным и рабочим должным образом см.
<a href="#testing-server">раздел 2.9.3</a>.</p>

<p>В примерах, показанных здесь, сервер работает в соответствии с
пользовательской учетной записью <code>mysql</code>. Это предполагает, что
такая учетная запись существует. Создайте учетную запись, если она не
существует, или замените названием иной существующей учетной записью, которую
Вы планируете использовать для того, чтобы выполнить сервер. Для информации о
создании учетной записи см.
<a href="#binary-installation">раздел 2.2</a>.</p>

<ol type="1"><li><p>Перейдите в верхний каталог Вашей установки MySQL,
представленный здесь <em><code>BASEDIR</code></em>:
<pre>
shell&gt; cd <em><code>BASEDIR</code></em>
</pre>

<p><em><code>BASEDIR</code></em> вероятно, будет вроде
<code>/usr/local/mysql</code> или <code>/usr/local</code>. Следующие шаги
предполагают, что Вы изменили местоположение на этот каталог.</p>

<p>Вы найдете несколько файлов и подкаталогов в
<em><code>BASEDIR</code></em>. Самые важные в целях установки
<code>bin</code> и <code>scripts</code>, которые содержат
сервер, клиент и утилиты.</li>

<li>Создайте каталог, который обеспечивает местоположение, чтобы использовать
в качестве значения системной переменной <code>secure_file_priv</code>,
которая ограничивает операции импорта/экспорта определенным каталогом. См.
<a href="server.htm#server-system-variables">раздел 6.1.5</a>.
<pre>
shell&gt; mkdir mysql-files
shell&gt; chmod 750 mysql-files
</pre></li>

<li>В случае необходимости гарантируйте, что содержание дистрибутива доступно
для <code>mysql</code>. Если Вы устанавливали дистрибутив как
<code>mysql</code>, ничего делать дополнительно не надо.
Если Вы устанавливали дистрибутив как <code>root</code>,
его содержание будет принадлежать <code>root</code>. Измените его
принадлежность на <code>mysql</code>, выполняя следующие команды как
<code>root</code> в каталоге установки. Первая команда изменяет признак
владельца файлов на <code>mysql</code>. Вторая изменяет атрибут
группы на <code>mysql</code>.
<pre>
shell&gt; chown -R mysql .
shell&gt; chgrp -R mysql .
</pre></li>

<li>В случае необходимости инициализируйте каталог данных, включая
базу данных <code>mysql</code>, содержащую таблицы привилегий MySQL, которые
определяют, как пользователям разрешают соединиться с сервером.</p>

<p>Как правило, инициализация каталога данных должна быть сделана только в
первый раз, когда Вы устанавливаете MySQL. Если Вы обновляете существующую
установку, Вы должны выполнить <a href="programs.htm#mysql-upgrade"><span>
<strong>mysql_upgrade</strong></span></a> (см.
<a href="programs.htm#mysql-upgrade">раздел 5.4.5</a>).
Однако, команда, которая инициализирует каталог данных, не перезаписывает
существующих таблиц привилегий, таким образом, должно быть безопасно работать
при любых обстоятельствах.</p>

<p>Используйте сервер, чтобы инициализировать каталог данных:
<pre>
shell&gt; bin/mysqld --initialize --user=mysql
</pre></li>

<li>Если Вы хотите, чтобы сервер был в состоянии развернуться с
автоматической поддержкой безопасных соединений, используйте утилиту
<a href="programs.htm#mysql-ssl-rsa-setup"><span><strong>mysql_ssl_rsa_setup
</strong></span></a>, чтобы создать файлы по умолчанию SSL и RSA:
<pre>
shell&gt; mysql_ssl_rsa_setup
</pre>
<p>Подробности в <a href="programs.htm#mysql-ssl-rsa-setup">разделе
5.4.3</a>.</li>

<li>После инициализации каталога данных Вы можете установить заключительные
настройки принадлежности установки. Если оставить установку принадлежащей
<code>mysql</code>, ничего делать не надо. Иначе большая часть установки
MySQL может принадлежать <code>root</code>. Исключение то, что каталоги
данных и <code>mysql-files</code> ДОЛЖНЫ принадлежать <code>mysql</code>.
Чтобы достигнуть этого, выполните следующие команды как <code>root</code> в
каталоге установки. Для некоторых типов дистрибутива можно было бы назвать
каталог данных <code>var</code>, а не <code>data</code>,
скорректируйте вторую команду соответственно.
<pre>
shell&gt; chown -R root .
shell&gt; chown -R mysql data mysql-files
</pre>

<p>Если каталог плагинов (указан в переменной
<a href="server.htm#sysvar_plugin_dir"><code>plugin_dir</code></a>)
перезаписываем сервером, для пользователя может быть возможно написать
выполнимый код в файл в каталоге, используя
<a href="sql.htm#select-into"><code>SELECT ... INTO DUMPFILE</code></a>.
Это может быть предотвращено, делая каталог только для чтения сервера или
устанавливая переменную <code>secure_file_priv</code>
при запуске сервера к каталогу, где записи
<a href="sql.htm#select"><code>SELECT</code></a>
могут быть выполнены безопасно. Например, установите это в
<code>mysql-files</code>, создаваемый ранее.</li>

<li>Чтобы определить опции, которые сервер MySQL должен использовать при
запуске, поместите их в файл <code>/etc/my.cnf</code> или
<code>/etc/mysql/my.cnf</code>. Вы можете использовать такой файл, например,
чтобы установить переменную <a href="server.htm#sysvar_secure_file_priv">
<code>secure_file_priv</code></a>. См.
<a href="server.htm#server-configuration-defaults">раздел 6.1.2</a>. Если Вы
не делаете этого, сервер запускается с его настройками по умолчанию.</li>

<li>Если Вы хотите, чтобы MySQL запустился автоматически, когда Вы загружаете
свою машину, см. <a href="#automatic-start">раздел 2.9.5</a>.
</p></li></ol>

<p>Инициализация каталога данных составляет таблицы часового пояса в
базе данных <code>mysql</code>, но не заполняет их.
Чтобы сделать это, используйте инструкции в
<a href="global.htm#time-zone-support">раздел 11.6</a>.</p>

<h4><a name="data-directory-initialization-mysqld"></a>
2.9.1.1. Инициализация каталога данных вручную, используя mysqld</h4>
<p>Этот раздел описывает, как инициализировать каталог данных, используя
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.</p>

<p>Следующие инструкции предполагают, что Ваше текущее местоположение, это
каталог установки MySQL, представленный здесь как
<em><code>BASEDIR</code></em>:
<pre>
shell&gt; cd <em><code>BASEDIR</code></em>
</pre>

<p>Чтобы инициализировать каталог данных, вызовите
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a> с
опцией <a href="server.htm#option_mysqld_initialize"><code>--initialize
</code></a> или <a href="server.htm#option_mysqld_initialize-insecure">
<code>--initialize-insecure</code></a>,
в зависимости от того, хотите ли Вы, чтобы сервер произвел случайный
начальный пароль для <code>'root'@'localhost'</code>.</p>

<p>В Windows используйте одну из этих команд:
<pre>
C:\&gt; bin\mysqld --initialize
C:\&gt; bin\mysqld --initialize-insecure
</pre>

<p>В Unix-системах важно удостовериться, что каталоги базы данных и файлы
принадлежат учетной записи <code>mysql</code> так, чтобы сервер имел доступ
к ним на чтение и запись, когда Вы выполняете это позже. Чтобы гарантировать
это, выполните <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> как <code>root</code> и включите опцию
<a href="server.htm#option_mysqld_user"><code>--user</code></a>:
<pre>
shell&gt; bin/mysqld --initialize --user=mysql
shell&gt; bin/mysqld --initialize-insecure --user=mysql
</pre>

<p>Иначе выполните программу в то время как зарегистрированы как
<code>mysql</code>, в этом случае Вы можете опустить опцию
<a href="server.htm#option_mysqld_user"><code>--user</code></a>.</p>

<p>Независимо от платформы, надо использовать
<a href="server.htm#option_mysqld_initialize"><code>--initialize</code></a>
для <span><span>безопасности по умолчанию</span></span>
(то есть, включая генерацию случайного пароля для <code>root</code>).
В этом случае пароль отмечен как выдохшийся, и Вы должны будете выбрать
новый. С опцией <a href="server.htm#option_mysqld_initialize-insecure">
<code>--initialize-insecure</code></a> пароль не генерируется,
предполагается, что Вы назначите пароль на учетную запись прежде, чем
поместить сервер в производственное использование.</p>

<p>Могло бы быть необходимо определить другие опции, например,
<a href="server.htm#option_mysqld_basedir"><code>--basedir</code></a> или
<a href="server.htm#option_mysqld_datadir"><code>--datadir</code></a>, если
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
не идентифицирует правильные местоположения для каталога установки или
каталога данных. Например (вводите команду в одну строку):
<pre>
shell&gt; bin/mysqld --initialize --user=mysql
                     --basedir=/opt/mysql/mysql
                     --datadir=/opt/mysql/mysql/data
</pre>

<p>Альтернативно, поместите соответствующие настройки опции в файл опции и
передайте название этого файла к
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.
Для Unix-систем предположите, что имя файла опции
<code>/opt/mysql/mysql/etc/my.cnf</code>. Поместите эти строки в файл:
<pre>
[mysqld]
basedir=/opt/mysql/mysql
datadir=/opt/mysql/mysql/data
</pre>

<p>Вызовите <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> следующим образом (введите команду в одну строку с опцией
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a> сначала):
<pre>
shell&gt; bin/mysqld --defaults-file=/opt/mysql/mysql/etc/my.cnf
                     --initialize --user=mysql
</pre>

<p>В Windows предположите, что <code>C:\my.ini</code>
содержит эти строки:
<pre>
[mysqld]
basedir=C:\\Program Files\\MySQL\\MySQL Server 8.0
datadir=D:\\MySQLdata
</pre>

<p>Вызовите <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> следующим образом (введите команду в одну строку с опцией
<a href="programs.htm#option_general_defaults-file"><code>--defaults-file
</code></a> в начале):
<pre>
C:\&gt; bin/mysqld --defaults-file=C:\my.ini --initialize
</pre>

<p>Когда вызвано с опциями <a href="server.htm#option_mysqld_initialize">
<code>--initialize</code></a> или
<a href="server.htm#option_mysqld_initialize-insecure"><code>
--initialize-insecure</code></a>,
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
выполняет следующую последовательность инициализации.</p>

<p>Сервер пишет любые сообщения своему стандартному ошибочному выводу. Это
может быть перенаправлено к журналу ошибок, ищите там, если Вы не видите
сообщения на своем экране. Для информации о журнале ошибок, включая то, где
это расположено, см. <a href="server.htm#error-log">раздел 6.4.2</a>.</p>

<p>В Windows используйте опцию
<a href="server.htm#option_mysqld_console"><code>--console</code></a>,
чтобы перенаправить сообщения на консоль.</p>

<ol type="1"><li><p>Сервер проверяет существование каталога данных:</p>
<ul><li><p>Если каталог данных не существует, сервер создает его.</li>
<li>Если каталог данных существует, но не пуст (то есть, он содержит файлы
или подкаталоги), сервера завершается после сообщения об ошибке:
<pre>
[ERROR] --initialize specified but the data directory exists. Aborting.
</pre>

<p>В этом случае удалите или переименуйте каталог данных и
попробуйте еще раз.</p>
<p>Существующему каталогу данных разрешают быть непустым, если у каждой
записи в нем есть имя, которое начинается с точки (<code>.</code>).
</p></li></ul></li>

<li><p>В пределах каталога данных сервер создает системную базу данных
<code>mysql</code> и ее таблицы, включая таблицы привилегий, серверные
таблицы справки и таблицы часового пояса. Для полного списка и описания
таблиц см. <a href="security.html#privilege-system">раздел 7.2</a>.</li>

<li>Сервер инициализирует
<a href="glossary.htm#glos_system_tablespace">системное пространство таблиц
</a> и связанные структуры данных для управления таблицами
<a href="innodb.htm"><code>InnoDB</code></a>.</p>

<p>После того, как <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a> настраивает
<a href="glossary.htm#glos_system_tablespace">системное пространство таблиц
</a> <code>InnoDB</code>, изменения некоторых характеристик табличного
пространства требуют установки совершенно нового
<a href="glossary.htm#glos_instance" title="instance">экземпляра</a>.
Это включает имя первого файла в системном табличном пространстве и
число журналов отмены. Если Вы не хотите использовать значения по умолчанию,
удостоверьтесь что настройки для параметров конфигурации
<a href="innodb.htm#sysvar_innodb_data_file_path"><code>
innodb_data_file_path</code></a> и
<a href="innodb.htm#sysvar_innodb_log_file_size"><code>innodb_log_file_size
</code></a> находятся в <a href="glossary.htm#glos_configuration_file">
конфигурационном файле</a> MySQL прежде, чем выполнить
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.
Также удостоверьтесь, что определили по мере необходимости другие параметры,
которые затрагивают создание и местоположение файлов <code>InnoDB</code>
такие, как <a href="innodb.htm#sysvar_innodb_data_home_dir"><code>
innodb_data_home_dir</code></a> и
<a href="innodb.htm#sysvar_innodb_log_group_home_dir"><code>
innodb_log_group_home_dir</code></a>.</p>

<p>Если те опции находятся в Вашем конфигурационном файле, но тот файл не
находится в местоположении, которое MySQL читает по умолчанию, определите
местоположение файла, используя опцию
<a href="server.htm#option_mysqld_defaults-extra-file"><code>
--defaults-extra-file</code></a> при запуске
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.
</p></li>

<li><p>Сервер создает учетную запись пользователя <code>'root'@'localhost'
</code>. Действие сервера относительно пароля для этой учетной записи зависит
от того, как Вы вызываете это:</p>

<ul><li><p>С <a href="server.htm#option_mysqld_initialize"><code>--initialize
</code></a>, но без <a href="server.htm#option_mysqld_initialize-insecure">
<code>--initialize-insecure</code></a> сервер производит случайный пароль,
отмечает его как выдохшийся и пишет сообщение, выводящее на экран пароль:
<pre>
[Warning] A temporary password is generated for root@localhost:
iTag*AfrH5ej
</pre></li>

<li>С <a href="server.htm#option_mysqld_initialize-insecure"><code>
--initialize-insecure</code></a>, (с или без
<a href="server.htm#option_mysqld_initialize"><code>--initialize</code></a>,
так как <a href="server.htm#option_mysqld_initialize-insecure"><code>
--initialize-insecure</code></a> подразумевает
<a href="server.htm#option_mysqld_initialize"><code>--initialize</code></a>),
сервер не производит пароль и пишет предупреждающее сообщение:
<pre>
[Warning] root@localhost is created with an empty password!
          Please consider switching off the --initialize-insecure option.
</pre></li></ul></li>

<li><p>Сервер заполняет серверные таблицы справки, если контент доступен (в
файле <code>fill_help_tables.sql</code>).
Сервер не заполняет таблицы часового пояса, чтобы сделать это, см.
<a href="global.htm#time-zone-support">раздел 11.6</a>.</li>

<li>Если опция <a href="server.htm#option_mysqld_init-file"><code>--init-file
</code></a> была дана, чтобы назвать файл SQL, сервер выполняет запросы
в файле. Эта опция позволяет Вам выполнить пользовательские
последовательности начальной загрузки.</p>

<p>Когда сервер работает в режиме начальной загрузки, некоторая
функциональность недоступна, что ограничивает запросы, разрешенные в файле.
Они включают запросы, которые касаются ведения учетных записей (например,
<a href="sql.htm#create-user"><code>CREATE USER</code></a> или
<a href="sql.htm#grant"><code>GRANT</code></a>), репликацию
и глобальные операционные идентификаторы.</li>
<li>На этом все.</p></li></ol>

<p>После того, как Вы инициализируете каталог данных, запуская сервер с
<a href="server.htm#option_mysqld_initialize"><code>--initialize</code></a>
или <a href="server.htm#option_mysqld_initialize-insecure"><code>
--initialize-insecure</code></a>, запускайте сервер обычно (то есть, без
любой из этих опций) и назначайте новый парполь для
<code>'root'@'localhost'</code>:</p>

<ol type="1"><li><p>Запустите сервер. Инструкции
<a href="#starting-server">раздел 2.9.2</a>.</li>
<li>Соединитесь с сервером:</p>
<ul><li><p>Если Вы использовали
<a href="server.htm#option_mysqld_initialize"><code>--initialize</code></a>,
но не <a href="server.htm#option_mysqld_initialize-insecure"><code>
--initialize-insecure</code></a>, чтобы инициализировать каталог данных,
соединитесь с сервером как <code>root</code> с использованием случайного
пароля, который сервер произвел во время последовательности инициализации:
<pre>
shell&gt; mysql -u root -p
Enter password: <em><code>(enter the random root password here)</code></em>
</pre>
<p>Смотрите в журнале ошибок сервера, если Вы не знаете этот пароль.</li>

<li>Если Вы использовали
<a href="server.htm#option_mysqld_initialize-insecure"><code>
--initialize-insecure</code></a>, чтобы инициализировать каталог данных,
соединитесь с сервером как <code>root</code> без пароля:
<pre>
shell&gt; mysql -u root --skip-password
</pre></li></ul></li>

<li><p>После соединения, назначьте новый пароль <code>root</code>:
<pre>
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY '<em><code>new_password'</code></em>;
</pre></li></ol>

<p>Последовательность инициализации каталога данных, выполненная сервером, не
заменяет действия, выполненные
<a href="programs.htm#mysql-secure-installation"><span><strong>
mysql_secure_installation</strong></span></a> или
<a href="programs.htm#mysql-ssl-rsa-setup"><span><strong>mysql_ssl_rsa_setup
</strong></span></a>. См. разделы
<a href="programs.htm#mysql-secure-installation">5.4.2</a> и
<a href="programs.htm#mysql-ssl-rsa-setup">5.4.3</a>.</p>

<h3><a name="starting-server"></a>2.9.2. Запуск сервера</h3>
<p>Этот раздел описывает, как запускают сервер на Unix-системах. Для Windows
см. <a href="#windows-server-first-start">раздел 2.3.5.5</a>.
Для некоторых предложенных команд, которые Вы можете использовать для теста,
является ли сервер доступным и рабочим должным образом см.
<a href="#testing-server">раздел 2.9.3</a>.</p>

<p>Запустите сервер MySQL, если Ваша установка включает
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>:
<pre>
shell&gt; bin/mysqld_safe --user=mysql &amp;
</pre>

<p>Для систем Linux, на которых MySQL установлен, используя пакеты RPM,
запуск сервера и завершение работы управляется, используя systemd, а не
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>, соответственно, <a href="programs.htm#mysqld-safe"><span><strong>
mysqld_safe</strong></span></a> не установлен.</p>

<p>Запустите сервер, если Ваша установка включает поддержку systemd:
<pre>
shell&gt; systemctl start mysqld
</pre>
<p>Замените соответствующим именем службы, если оно отличается от
<code>mysqld</code>, например, <code>mysql</code> на SLES-системах.</p>

<p>Важно, чтобы сервер MySQL был выполнен, используя непривилегированную
учетную запись (не <code>root</code>). Чтобы гарантировать это, выполните
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a> как <code>root</code> и включите опцию
<a href="programs.htm#option_mysqld_safe_user"><code>--user</code></a>.
Иначе, Вы должны выполнить программу в то время как зарегистрированы, как
<code>mysql</code>, тогда Вы можете опустить опцию
<a href="programs.htm#option_mysqld_safe_user"><code>--user</code></a>.
Для дальнейших инструкций о том, как выполнить MySQL как непривилегированный
пользователь см. <a href="security.html#changing-mysql-user">раздел 7.1.5
</a>.</p>

<p>Если команда немедленно терпит неудачу и печатает <code>mysqld ended
</code>, ищите информацию в журнале ошибок (который по умолчанию является
файлом <code><em><code>host_name</code></em>.err</code> в каталоге данных).
</p>

<p>Если сервер неспособен получить доступ к каталогу данных или считать
таблицы привилегий, он пишет сообщение в свой журнал ошибок. Такие проблемы
могут произойти, если Вы забыли составить таблицы привилегий,
инициализируя каталог данных прежде, чем перейти к этому шагу, или если Вы
выполняли команду, которая инициализирует каталог данных без опции
<code>--user</code>. Удалите каталог <code>data</code> и выполните команду
уже с опцией <code>--user</code>.</p>

<p>Если у Вас есть другие проблемы, запуская сервер, см.
<a href="#starting-server-troubleshooting">раздел 2.9.2.1</a>.
Для получения дополнительной информации о
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>, см. <a href="programs.htm#mysqld-safe">раздел 5.3.2</a>.
Для получения дополнительной информации о поддержке systemd см.
<a href="#using-systemd">раздел 2.5.9</a>.</p>

<h4><a name="starting-server-troubleshooting"></a>2.9.2.1.
Поиск неисправностей и проблем при запуске сервера MySQL</h4>
<p>Этот раздел обеспечивает предложения по поиску неисправностей для проблем
запуска сервера. Для дополнительных предложений для систем Windows см.
<a href="#windows-troubleshooting">раздел 2.3.6</a>.</p>

<p>Если у Вас есть проблемы с запуском сервера, вот некоторые вещи,
которые стоит попробовать:</p>
<ul><li><p>Проверьте <a href="glossary.htm#glos_error_log">журнал ошибок</a>,
чтобы видеть, почему сервер не запускается. Файлы системного журнала
расположены в <a href="glossary.htm#glos_data_directory">каталоге данных</a>
(обычно это <code>C:\Program Files\MySQL\MySQL Server 8.0\data</code> в
Windows, <code>/usr/local/mysql/data</code> в двоичных дистрибутивах
Unix/Linux и <code>/usr/local/var</code> в дистрибутивах Unix/Linux из
исходных текстов). Смотрите в каталоге данных файлы с названиями формы
<code><em><code>host_name</code></em>.err</code> и
<code><em><code>host_name</code></em>.log</code>, где
<em><code>host_name</code></em> название Вашего узла сервера. Исследуйте
последние несколько строк этих файлов. Полезно использовать <code>tail</code>,
чтобы вывести их на экран:
<pre>
shell&gt; tail <em><code>host_name</code></em>.err
shell&gt; tail <em><code>host_name</code></em>.log
</pre></li>

<li>Определите любые специальные опции, необходимые механизмам хранения,
которые Вы используете. Вы можете создать файл <code>my.cnf</code>
и определить опции запуска для механизмов, которые Вы планируете
использовать. Если Вы собираетесь использовать механизмы хранения, которые
поддерживают транзакционные таблицы (<code>InnoDB</code>,
<a href="../../../dev.mysql.com/doc/refman/5.7/en/mysql-cluster.html"
target="_top"><code>NDB</code></a>), убедитесь, что у Вас есть способ
сконфигурировать их прежде, чем запустить сервер. Если Вы используете
<code>InnoDB</code>, см. подробности в разделах
<a href="innodb.htm#innodb-configuration">16.6</a> и
<a href="innodb.htm#innodb-parameters">16.13</a>.</p>

<p>Хотя механизмы хранения используют значения по умолчанию для опций,
которые Вы опускаете, Oracle рекомендует, чтобы Вы рассмотрели доступные
параметры и определили явные значения для любых опций, значения по умолчанию
которых не являются подходящими для Вашей установки.</li>

<li>Удостоверьтесь, что сервер знает, где найти
<a href="glossary.htm#glos_data_directory">каталог данных</a>.
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
использует этот каталог в качестве своего текущего каталога. Тут он ожидает
найти базы данных и писать файлы системного журнала. Сервер также пишет файл
pid (process ID) в этом каталоге.</p>

<p>Местоположение каталога данных по умолчанию вносится в исполняемый модуль
на шаге компиляции. Чтобы определить, каковы настройки пути по умолчанию,
вызовите <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a> с опциями <a href="server.htm#option_mysqld_verbose"><code>--verbose
</code></a> и <a href="server.htm#option_mysqld_help"><code>--help</code>
</a>. Если каталог данных расположен где-то в другом месте на Вашей системе,
определите то местоположение с помощью опции
<a href="server.htm#option_mysqld_datadir"><code>--datadir</code></a> для
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a> или
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>, в командной строке или в файле опции. Иначе сервер не будет работать
должным образом. Как альтернатива Вы можете определить
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
местоположение основного каталога, в соответствии с которым MySQL установлен
с помощью опции <a href="server.htm#option_mysqld_basedir"><code>--basedir
</code></a>, <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> ищет каталог <code>data</code> там.</p>

<p>Чтобы проверить эффект определения опций пути, вызовите
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
с теми опциями, сопровождаемыми
<a href="server.htm#option_mysqld_verbose"><code>--verbose</code></a> и
<a href="server.htm#option_mysqld_help"><code>--help</code></a>.
Например, если Вы изменяете местоположение в каталог, где установлен
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
и затем выполняете следующую команду, это показывает эффект запуска сервера с
основным каталогом <code>/usr/local</code>:
<pre>
shell&gt; ./mysqld --basedir=/usr/local --verbose --help
</pre>

<p>Вы можете определить другие опции, например,
<a href="server.htm#option_mysqld_datadir"><code>--datadir</code></a>, но
<a href="server.htm#option_mysqld_verbose"><code>--verbose</code></a> и
<a href="server.htm#option_mysqld_help"><code>--help</code></a>
должны быть последними.</p>

<p>Как только Вы определите настройки пути, запустите сервер без
<a href="server.htm#option_mysqld_verbose"><code>--verbose</code></a> и
<a href="server.htm#option_mysqld_help"><code>--help</code></a>.</p>

<p>Если <a href="programs.htm#mysqld"><span><strong>mysqld</strong></span>
</a> в настоящее время работает, Вы можете узнать, какие настройки пути он
использует, выполняя эту команду:
<pre>
shell&gt; mysqladmin variables
</pre>

<p>Или:
<pre>
shell&gt; mysqladmin -h <em><code>host_name</code></em> variables
</pre>
<p><em><code>host_name</code></em> название узла сервера MySQL.</li>

<li>Удостоверьтесь, что сервер может получить доступ к
<a href="glossary.htm#glos_data_directory">каталогу данных</a>.
Владелец и разрешения каталога данных и его содержания должны позволить
серверу читать и изменять данные.</p>

<p>Если Вы получаете <code>Errcode 13</code> (<code>Permission denied</code>)
при запуске <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a>, это означает, что привилегии каталога данных или его содержания
не разрешают доступ серверу. В этом случае измените разрешения для
вовлеченных файлов и каталогов так, чтобы сервер имел право использовать их.
Вы можете также запустить сервер как <code>root</code>,
но это поднимает вопросы безопасности.</p>

<p>Если каталог данных или его файлы или подкаталоги не принадлежат учетной
записи, которую Вы используете для того, чтобы выполнить сервер, измените их
владельца на ту учетную запись. Если учетную запись называют
<code>mysql</code>, используйте эти команды:
<pre>
shell&gt; chown -R mysql /usr/local/mysql/var
shell&gt; chgrp -R mysql /usr/local/mysql/var
</pre>

<p>Даже с правильной принадлежностью, MySQL может быть не в состоянии
запуститься, если есть другое защитное программное обеспечение, работающее на
Вашей системе, которая управляет доступом приложения к различным частям
файловой системы. В этом случае реконфигурируйте то программное обеспечение,
чтобы позволить <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> получить доступ к каталогам, которые это использует во
время нормального функционирования.</li>

<li>Проверьте, что сетевые интерфейсы, которые сервер
хочет использовать, доступны.</p>
<p>Если любая из следующих ошибок происходит, это означает, что некоторая
другая программа (возможно, другой сервер
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>)
использует порт TCP/IP или файл сокета Unix, который нужен
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>:
<pre>
Can't start server: Bind on TCP/IP port: Address already in use
Can't start server: Bind on unix socket...
</pre>

<p>Примените <span><strong>ps</strong></span>, чтобы определить, есть ли у
Вас другой запущенный <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a>. Если так, закройте сервер прежде, чем запустить
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a> снова.
Если другой сервер работает, и Вы действительно хотите выполнить много
серверов, Вы можете найти информацию о том, как это сделать в
<a href="server.htm#multiple-servers">разделе 6.7</a>.</p>

<p>Если никакой другой сервер не работает, выполните команду
<code>telnet <em><code>your_host_name</code></em>
<em><code>tcp_ip_port_number</code></em></code>. Значение по умолчанию для
порта MySQL 3306. Нажмите несколько раз Enter.
Если Вы не получаете сообщение об ошибке, подобное
<code>telnet: Unable to connect to remote host: Connection refused</code>,
некоторая другая программа использует порт TCP/IP, который нужен
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>.
Разыщите, какая это программа, и отключите ее, или скажите
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
слушать другой порт опцией <a href="server.htm#option_mysqld_port"><code>
--port</code></a>. В этом случае определите тот же самый номер порта для
программ клиента, соединяясь с сервером, используя TCP/IP.</p>

<p>Другая причина, по которой порт может быть недоступным, состоит в том, что
у Вас есть брандмауэр, который блокирует соединения с ним. Если так, измените
настройки брандмауэра, чтобы разрешить доступ к порту.</p>

<p>Если сервер запускается, но Вы не можете соединиться с ним, удостоверьтесь,
что у Вас есть запись в <code>/etc/hosts</code>, похожая на это:
<pre>
127.0.0.1 localhost
</pre></li>

<li>Если Вы не можете заставить <a href="programs.htm#mysqld"><span><strong>
mysqld</strong></span></a> стартовать, попытайтесь сделать файл трассировки,
чтобы найти проблему при использовании опции
<a href="server.htm#option_mysqld_debug"><code>--debug</code></a>. См.
<a href="extend.htm#dbug-package">раздел 26.5.3</a>.</p></li></ul>

<h3><a name="testing-server"></a>2.9.3. Тестирование сервера</h3>
<p>После того, как каталог данных инициализирован, и Вы запустили сервер,
выполните некоторые простые тесты, чтобы удостовериться, что это работает
удовлетворительно. Этот раздел предполагает, что Ваше текущее местоположение
каталог установки MySQL, и что у него есть подкаталог <code>bin</code>,
содержащий программы MySQL, используемые здесь. Если это не так,
скорректируйте пути команды соответственно.</p>

<p>Альтернативно, добавьте каталог <code>bin</code> к переменной окружения
<code>PATH</code>. Это позволяет Вашей оболочке найти программы MySQL должным
образом, так, чтобы Вы могли выполнить программу, вводя только ее имя, а не
ее путь. См. <a href="programs.htm#setting-environment-variables">раздел
5.2.10</a>.</p>

<p>Используйте <a href="programs.htm#mysqladmin"><span><strong>mysqladmin
</strong></span></a>, чтобы проверить, что сервер работает. Следующие команды
обеспечивают простые тесты, чтобы все проверить:
<pre>
shell&gt; bin/mysqladmin version
shell&gt; bin/mysqladmin variables
</pre>

<p>Если Вы не можете соединиться с сервером, определите опцию <code>-u
root</code>, чтобы соединиться как <code>root</code>. Если Вы назначили
пароль для <code>root</code>, Вы должны будете также определить
<code>-p</code> в командной строке и ввести пароль когда запрошено. Например:
<pre>
shell&gt; bin/mysqladmin -u root -p version
Enter password: <em><code>(enter root password here)</code></em>
</pre>

<p>Вывод от <a href="programs.htm#mysqladmin"><span><strong>mysqladmin
version</strong></span></a> изменяется немного в зависимости от Вашей
платформы и версии MySQL, но должен быть подобным показанному здесь:
<pre>
shell&gt; bin/mysqladmin version
mysqladmin Ver 14.12 Distrib 8.0.1, for pc-linux-gnu on i686
...
Server version 8.0.1
Protocol version 10
Connection Localhost via UNIX socket
UNIX socket /var/lib/mysql/mysql.sock
Uptime: 14 days 5 hours 5 min 21 sec

Threads: 1 Questions:    366 Slow queries: 0
Opens:   0 Flush tables:   1 Open tables: 19
Queries per second avg: 0.000
</pre>

<p>Чтобы видеть, что еще Вы можете сделать с
<a href="programs.htm#mysqladmin"><span><strong>mysqladmin</strong></span>
</a>, вызовите его с опцией <a href="programs.htm#option_mysqladmin_help">
<code>--help</code></a>.</p>

<p>Проверьте, что Вы можете закрыть сервер (добавьте опцию
<code>-p</code>, если пароль для <code>root</code> установлен):
<pre>
shell&gt; bin/mysqladmin -u root shutdown
</pre>

<p>Проверьте, что Вы можете запустить сервер снова. Сделайте это при
использовании <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe
</strong></span></a> или вызывая напрямую <a href="programs.htm#mysqld">
<span><strong>mysqld</strong></span></a>. Например:</p>
<pre>
shell&gt; bin/mysqld_safe --user=mysql &amp;
</pre>

<p>Если <a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong>
</span></a> падает, см. <a href="#starting-server-troubleshooting">
раздел 2.9.2.1</a>.</p>

<p>Выполните некоторые простые тесты, чтобы проверить, что Вы можете получить
информацию от сервера. Вывод должен быть подобным показанному здесь.</p>
<p>Используйте <a href="programs.htm#mysqlshow"><span><strong>mysqlshow
</strong></span></a>, чтобы видеть, какие базы данных существуют:
<pre>
shell&gt; bin/mysqlshow
+--------------------+
| Databases          |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
</pre>

<p>Список установленных баз данных может измениться, но будет всегда включать
минимум <code>mysql</code> и <code>information_schema</code>.</p>
<p>Если Вы определяете имя базы данных,
<a href="programs.htm#mysqlshow"><span><strong>mysqlshow</strong></span></a>
выводит на экран список таблиц в пределах базы данных:
<pre>
shell&gt; bin/mysqlshow mysql
Database: mysql
+---------------------------+
| Tables                    |
+---------------------------+
| columns_priv              |
| db                        |
| engine_cost               |
| event                     |
| func                      |
| general_log               |
| gtid_executed             |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| innodb_index_stats        |
| innodb_table_stats        |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| proxies_priv              |
| server_cost               |
| servers                   |
| slave_master_info         |
| slave_relay_log_info      |
| slave_worker_info         |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+
</pre>

<p>Используйте <a href="programs.htm#mysql"><span><strong>mysql</strong>
</span></a>, чтобы выбрать информацию из таблицы в
базе данных <code>mysql</code>:
<pre>
shell&gt; bin/mysql -e "SELECT User, Host, plugin FROM mysql.user" mysql
+------+-----------+-----------------------+
| User | Host      | plugin                |
+------+-----------+-----------------------+
| root | localhost | mysql_native_password |
+------+-----------+-----------------------+
</pre>

<p>В этом пункте работает Ваш сервер, и Вы можете получить доступ к этому.
Чтобы улучшить безопасность, если Вы еще не назначили пароль на начальную
учетную запись, следуйте инструкциям в
<a href="#default-privileges">разделе 2.9.4</a>.</p>

<p>Для получения дополнительной информации о
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a>,
<a href="programs.htm#mysqladmin"><span><strong>mysqladmin</strong></span>
</a> и <a href="programs.htm#mysqlshow"><span><strong>mysqlshow</strong>
</span></a>, см. разделы <a href="programs.htm#mysql">5.5.1</a>,
<a href="programs.htm#mysqladmin">5.5.2</a> и
<a href="programs.htm#mysqlshow">5.5.7</a>.</p>

<h3><a name="default-privileges"></a>2.9.4. Обеспечение безопасности MySQL
</h3>
<p>Процесс установки MySQL вовлекает инициализацию каталога данных, включая
базу данных <code>mysql</code>, содержащую таблицы привилегий, которые
определяют учетные записи MySQL. Для деталей см.
<a href="#postinstallation">раздел 2.9</a>.</p>

<p>Этот раздел описывает, как назначить пароль на начального пользователя
<code>root</code>, созданного во время процесса установки MySQL, если Вы
еще не сделали этого.</p>

<p>В Windows Вы можете также выполнить процесс, описанный в этом разделе во
время установки с MySQL Installer (см.
<a href="#mysql-installer">раздел 2.3.3</a>).
На всех платформах дистрибутив MySQL включает
<a href="programs.htm#mysql-secure-installation">
<span><strong>mysql_secure_installation</strong></span></a>,
утилиту командной строки, которая автоматизирует большую часть процесса
обеспечения установки MySQL. Инструментальные средства MySQL доступны на всех
платформах, и также предлагают способность управлять учетными записями
пользователя (см. <a href="workbench.html">главу 28</a>).</p>

<p>Пароль может уже быть назначен на начальную учетную запись
при этих обстоятельствах:</p>
<ul><li><p>В Windows установки, выполненные, используя MySQL Installer,
дают Вам опцию назначения пароля.</li>

<li>Установка, используя OS X installer, производит начальный случайный
пароль, который установщик выводит на экран пользователю в диалоговом окне.
</li>
<li>Установка, используя пакеты RPM, производит начальный случайный пароль,
который написан в журнал ошибок сервера.</li>

<li>Для инициализации каталога данных, выполненной вручную, используя
<a href="programs.htm#mysqld"><span><strong>mysqld --initialize</strong>
</span></a>, <a href="programs.htm#mysqld"><span><strong>mysqld</strong>
</span></a> производит начальный случайный пароль, маркирует как истекший
и пишет это в журнал ошибок сервера. Для деталей см.
<a href="#data-directory-initialization-mysqld">раздел 2.9.1.1
</a>.</p></li></ul>

<p>Таблица <code>mysql.user</code> определяет начальную учетную запись
пользователя MySQL и ее привилегии доступа. Установка MySQL создает только
учетную запись пользователя <code>'root'@'localhost'</code>, которая имеет
все привилегии и может сделать что-либо. Если у учетной записи
<code>root</code> есть пустой пароль, Ваша установка MySQL не защищена: любой
может соединиться с сервером MySQL как <code>root</code> <span><em>без пароля
</em></span>.</p>

<p><code>'root'@'localhost'</code> также есть в таблице
<code>mysql.proxies_priv</code>, которая позволяет предоставить привилегию
<a href="security.html#priv_proxy"><code>PROXY</code></a> для
<code>''@''</code>, то есть, для всех пользователей и всех узлов. Это
позволяет <code>root</code> возможность настраивать прокси-пользователей,
так же как делегировать к другим учетным записям полномочия настроить
пользователей. См. <a href="security.html#proxy-users">раздел 7.3.10</a>.</p>

<p>Чтобы назначить пароль для MySQL <code>root</code>, используйте следующую
процедуру. Замените <em><code>new_password</code></em>
в примерах паролем, который Вы хотите использовать.</p>

<p>Запустите сервер, если он не работает. Для инструкций см.
<a href="#starting-server">раздел 2.9.2</a>.</p>
<p>Начальная учетная запись <code>root</code>, возможно, не имеет пароля.
Выберите, какая из следующих процедур применяется:</p>

<ul><li><p>Если <code>root</code> существует с начальным случайным паролем,
который истек, соединитесь с сервером как <code>root</code>,
используя этот пароль, затем выберите новый пароль. Дело обстоит так, если
каталог данных был инициализирован, используя
<a href="programs.htm#mysqld"><span><strong>mysqld --initialize</strong>
</span></a> вручную или через использование установщика, который не дает Вам
опцию определения пароля во время работы установки. Поскольку пароль
существует, Вы должны использовать его, чтобы соединиться с сервером. Но
потому что пароль истек, Вы не можете использовать доступ ни для чего,
кроме как выбрать новый пароль.</p>

<ol type="1"><li><p>Если Вы не знаете начального случайного пароля, смотрите
в журнале ошибок сервера.</li>
<li>Соединитесь с сервером как <code>root</code> с использованием пароля:
<pre>
shell&gt; mysql -u root -p
Enter password: <em><code>(enter the random root password here)</code></em>
</pre></li>

<li>Выберите новый пароль, чтобы заменить случайный пароль:
<pre>
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY '<em><code>new_password</code></em>';
</pre></li></ol></li>

<li><p>Если учетная запись <code>root</code> существует, но не имеет никакого
пароля, соединитесь с сервером как <code>root</code> не используя пароля,
затем назначьте пароль. Дело обстоит так, если Вы инициализировали каталог
данных, используя <a href="programs.htm#mysqld"><span><strong>mysqld
--initialize-insecure</strong></span></a>.</p>

<ol type="1"><li><p>Соединитесь с сервером как <code>root</code>
без использования пароля:
<pre>
shell&gt; mysql -u root --skip-password
</pre></li>

<li>Теперь назначьте пароль:
<pre>
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY '<em><code>new_password</code></em>';
</pre></li></ol></li></ul>

<p>После назначения пароля <code>root</code>, Вы должны предоставлять этот
пароль всякий раз, когда Вы соединяетесь с сервером, используя учетную
запись. Например, чтобы соединиться с сервером, используя клиент
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a>,
используйте эту команду:
<pre>
shell&gt; mysql -u root -p
Enter password: <em><code>(enter root password here)</code></em>
</pre>

<p>Чтобы закрыть сервер через <a href="programs.htm#mysqladmin"><span>
<strong>mysqladmin</strong></span></a>, используйте эту команду:
<pre>
shell&gt; mysqladmin -u root -p shutdown
Enter password: <em><code>(enter root password here)</code></em>
</pre>

<p>Для дополнительной информации об установке паролей, см.
<a href="security.html#assigning-passwords">раздел 7.3.6</a>.
Если Вы забываете Ваш пароль для <code>root</code> после его установки, см.
<a href="error.htm#resetting-permissions">раздел B.5.3.2</a>.</p>
<p>Чтобы настроить дополнительные учетные записи, см.
<a href="security.html#adding-users">раздел 7.3.2</a>.</p>

<h3><a name="automatic-start"></a>2.9.5.
Запуск и остановка MySQL автоматически</h3>
<p>Этот раздел обсуждает методы для запуска и остановки сервера MySQL.</p>
<p>Вообще, Вы запускаете <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a> одним из этих способов:</p>

<ul><li><p>Вызовите <a href="programs.htm#mysqld"><span><strong>mysqld
</strong></span></a>. Это работает на любой платформе.</li>
<li>В Windows Вы можете настроить службу MySQL, которая работает
автоматически, когда Windows запускается. См.
<a href="#windows-start-service">раздел 2.3.5.8</a>.</li>

<li>В Unix-системах Вы можете вызвать
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>, который пытается определить надлежащие опции для
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
и затем выполняет его с теми опциями. См.
<a href="programs.htm#mysqld-safe">раздел 5.3.2</a>.</li>

<li>В Linux с поддержкой systemd
Вы можете использовать его, чтобы управлять сервером. См.
<a href="#using-systemd">раздел 2.5.9</a>.</li>

<li>На системах, которые используют System V-каталоги
(то есть, <code>/etc/init.d</code> и определенные каталоги на уровне
выполнения), вызовите <a href="programs.htm#mysql-server">
<span><strong>mysql.server</strong></span></a>. Этот скрипт
используется прежде всего при системном запуске и завершении работы. Это
обычно устанавливается под именем <code>mysql</code>. Скрипт
<a href="programs.htm#mysql-server"><span><strong>mysql.server</strong>
</span></a> запускает сервер, вызывая
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>. См. <a href="programs.htm#mysql-server">раздел 5.3.3</a>.</li>

<li>В OS X установите демон launchd, чтобы включить автоматический запуск
MySQL при системном запуске. Демон запускает сервер, вызывая
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a>. Для деталей см. <a href="#osx-installation-launchd">
раздел 2.4.3</a>. MySQL Preference Pane также обеспечивает управление для
запуска и остановки MySQL через System Preferences. См.
<a href="#osx-installation-prefpane">раздел 2.4.4</a>.</li>

<li>В Solaris/OpenSolaris используйте управленческую структуру (SMF)
системы, чтобы управлять запуском MySQL. Для получения дополнительной
информации см. <a href="#solaris-installation-opensolaris">
раздел 2.6.2</a>.</p></li></ul>

<p>systemd, скрипты <a href="programs.htm#mysqld-safe"><span><strong>
mysqld_safe</strong></span></a> и
<a href="programs.htm#mysql-server"><span><strong>mysql.server</strong>
</span></a>, Solaris/OpenSolaris SMF и OS X Startup Item (или MySQL
Preference Pane) могут использоваться, чтобы запустить сервер вручную или
автоматически во время запуска ОС. systemd, скрипт
<a href="programs.htm#mysql-server"><span><strong>mysql.server</strong>
</span></a> и Startup Item также могут использоваться,
чтобы остановить сервер.</p>

<p>Следующяя таблица показывает, какие группы опций сервер и стартовые
скрипты читают из файлов опций.</p>
<a name="idm139965423658784"></a><p><b>Таблица 2.12. Стартовые скрипты MySQL
и поддерживаемые сервером группы опций</b></p>
<table border="1">
<thead><tr><th scope="col">Скрипт</th><th scope="col">Группа опций
</th></tr></thead>
<tbody><tr><td scope="row"><a href="programs.htm#mysqld"><span><strong>
mysqld</strong></span></a></td><td><code>[mysqld]</code>,
<code>[server]</code>, <code>[mysqld-<em><code>major_version</code></em>]
</code></td></tr>
<tr><td scope="row"><a href="programs.htm#mysqld-safe"><span><strong>
mysqld_safe</strong></span></a></td><td><code>[mysqld]</code>, <code>
[server]</code>, <code>[mysqld_safe]</code></td></tr>
<tr><td scope="row"><a href="programs.htm#mysql-server"><span>
<strong>mysql.server</strong></span></a></td><td><code>[mysqld]</code>,
<code>[mysql.server]</code>, <code>[server]</code></td></tr></tbody></table>

<p><code>[mysqld-<em><code>major_version</code></em>]</code>
указывает, что группы с именами вида <code>[mysqld-5.7]</code> и
<code>[mysqld-8.0]</code> считаны серверами, имеющими версии 5.7.x, 8.0.x и
т.д. Эта функция может быть использована, чтобы определить опции, которые
могут быть предназначены только для чтения серверами в пределах
данного ряда выпуска.</p>

<p>Для обратной совместимости <a href="programs.htm#mysql-server"><span>
<strong>mysql.server</strong></span></a> также читает группу
<code>[mysql_server]</code>, а <a href="programs.htm#mysqld-safe"><span>
<strong>mysqld_safe</strong></span></a> также читает группу
<code>[safe_mysqld]</code>. Чтобы быть актуальным, Вы должны обновить свои
файлы опции, чтобы не использовать группы
<code>[mysql.server]</code> и <code>[mysqld_safe]</code>.</p>
<p>Для получения дополнительной информации о конфигурационных файлах MySQL,
их структуре и содержании см. <a href="programs.htm#option-files">раздел
5.2.6</a>.</p>

<h2><a name="upgrading-downgrading"></a>2.10. Обновления или откат MySQL</h2>
<p>Этот раздел описывает шаги, чтобы обновить или понизить версию MySQL.</p>
<p>Обновление общая процедура, поскольку Вы поднимаете исправления ошибок в
пределах того же самого ряда выпуска MySQL или применяете существенные
изменения между выпусками. Вы выполняете эту процедуру сначала на некоторых
испытательных системах, чтобы удостовериться, что все работает гладко, и
затем на производственных системах.</p>

<p>Понижение менее распространено. Как правило, Вы отменяете обновление из-за
некоторой совместимости или исполнительной проблемы, которая происходит на
производственной системе, но не была раскрыта во время начальной проверки
обновления на испытательных системах. Как с процедурой обновления, выполните
и проверьте процедуру понижения на некоторых испытательных системах сначала,
перед использованием этого на производственной системе.</p>

<h3><a name="upgrading"></a>2.10.1. Обновление MySQL</h3>
<p>MySQL Server 8.0 включает глобальный словарь данных, содержащий информацию
об объектах базы данных в транзакционных таблицах. В предыдущей серии MySQL
данные о словаре хранились в метафайлах с данными и нетранзакционных
системных таблицах. Этот раздел описывает, как обновить Ваш каталог данных от
основанной на файлах структуры до структуры словаря данных.</p>

<p>Процесс, описанный здесь, требует, чтобы Вы обновились до MySQL 8.0 от
MySQL 5.7 версий GA (5.7.9 или выше). Обновления от версий не-GA MySQL 5.7
или от ряда MySQL, предшествующего 5.7, не поддержаны.</p>

<ul><li><p><a href="#upgrade-methods">
Поддержанные методы обновления</a></li>
<li><a href="#upgrade-paths">Поддержанные пути обновления</a></li>

<li><a href="#upgrade-before-you-begin">Прежде, чем Вы начнете</a>
</li>
<li><a href="#upgrade-prerequisites">
Подтверждение предпосылок обновления для Вашего MySQL 5.7</a></li>

<li><a href="#upgrade-procedure-inplace">
Выполнение оперативного обновления</a></li>
<li><a href="#upgrade-procedure-logical">
Выполнение логического обновления</a></li>

<li><a href="#upgrade-troubleshooting">
Поиск неисправностей обновления</a></p></li></ul>
<p>После того, как Вы обновляете сервер, это влечет за собой некоторые общие
операционные различия, см.
<a href="data.htm#data-dictionary-usage-differences">раздел 15.6</a>.</p>

<p>В следующем обсуждении команды MySQL, которые должны быть выполнены,
используя учетную запись MySQL с административными привилегиями, включают
<code>-u <code>root</code></code> в командной строке, чтобы определить
пользователя MySQL <code>root</code>. Команды, которые требуют пароля для
<code>root</code>, также включают опцию <code>-p</code>. Поскольку
<code>-p</code> не сопровождается никаким значением опции, это запрос
для пароля. Введите пароль когда запрошено.</p>

<p>Запросы SQL могут быть выполнены, используя клиент
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a>
(соединитесь как <code>root</code>, чтобы
гарантировать, что у Вас есть необходимые привилегии).</p>

<h4><a name="upgrade-methods"></a>Поддержанные методы обновления</h4>
<p>Поддержанные методы обновления включают:</p>
<ul><li><p>Оперативное обновление</em></span>: Вовлекает закрытие старой
версии MySQL, замену старых двоичных файлов MySQL или пакетов на новые,
перезапуск MySQL на существующем каталоге данных и выполнение
<a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a>.</li>

<li><span><em>Логическое обновление</em></span>:
Вовлекает экспорт существующих данных из старой версии MySQL, используя
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>,
устанавливая новую версию MySQL, загружая файл дампа в новую версию MySQL и
выполняя <a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade
</strong></span></a>.</p></li></ul>

<p>Если Вы выполняете сервер MySQL в Windows, используйте процедуру
обновления, описанную в <a href="#windows-upgrading">разделе 2.3.8
</a>.</p>

<p>Если Ваша текущая установка MySQL была установлена на Enterprise
Linux platform или Fedora, используя MySQL Yum Repository, см.
<a href="#updating-yum-repo">раздел 2.10.1.2</a>.
</p>

<p>Если Ваша текущая установка MySQL была установлена на Ubuntu, используя
MySQL APT repository, см. <a href="#updating-apt-repo">раздел
2.10.1.3</a>.</p>

<h4><a name="upgrade-paths"></a>Поддержанные пути обновления</h4>
<p>Если иное не сказано, следующие пути обновления поддержаны:</p>
<ul><li><p>Обновление от серийной версии выпуска GA до более новой серийной
версии выпуска поддержано. Пропуск серийных версий выпуска также поддержан. В
настоящее время нет никаких выпусков состояния GA для MySQL 8.0.</li>

<li>Обновление одного уровня выпуска поддержано. Например, обновление от 5.7
до 8.0 поддержано. Обновление до последней серийной версии выпуска
рекомендуется прежде, чем обновить до следующего уровня выпуска. Например,
обновите до последних 5.7 выпусков прежде, чем обновить до 8.0.</p>

<p>Для MySQL 8.0 требуется, чтобы Вы обновлли от MySQL 5.7 версий GA (5.7.9
или выше). Обновления от версий non-GA MySQL 5.7 не поддержаны.</p></li>
<li><p>Обновление больше, чем одного уровня выпуска поддержано, но только
если Вы обновляете один уровень выпуска за один раз. Например, если Вы в
настоящее время выполняете MySQL 5.6 и хотите обновить до более нового ряда,
обновите до MySQL 5.7 сначала прежде, чем обновить до MySQL 8.0 и т.д. Для
информации об обновлении до MySQL 5.7 см. <em>MySQL 5.7 Reference Manual
</em>.</li>

<li>Прямые обновления, которые пропускают уровень выпуска (например, обновляя
непосредственно от MySQL 5.6 к 8.0) не рекомендуются или поддерживаются.
</p></li></ul>

<p>Следующие условия относятся ко всем путям обновления:</p>
<ul><li><p>Обновления между релизами General Availability (GA) поддержаны.
</li>

<li>Обновления между выпусками milestone (или от выпуска milestone до выпуска
GA) не поддержаны. Например, обновление от 8.0.0 до 8.0.1 не поддержано,
поскольку ни один не является выпуском состояния GA.</li>

<li>Поскольку обновления между версиями MySQL выпускают ряд, который достиг
состояния GA, Вы можете переместить файлы с данными MySQL между различными
версиями на системах с той же самой архитектурой. Это не обязательно истинно
для обновлений между выпусками milestone.
Использование выпусков milestone на ваш собственный риск.</p></li></ul>

<h4><a name="upgrade-before-you-begin"></a>Прежде, чем Вы начнете</h4>
<p>Перед обновлением изучите следующую информацию и
выполните рекомендуемые шаги:</p>

<ul><li><p>Перед обновлением, защитите свои данные, создавая резервную
копию Ваших текущих баз данных и файлов системного журнала. Резервное
копирование должно включать системную базу данных <code>mysql</code>,
которая содержит таблицы словаря данных MySQL и системные таблицы. См.
<a href="backup.htm#backup-methods">раздел 8.2</a>.</li>

<li>Изучите <a href="../../../dev.mysql.com/doc/relnotes/mysql/8.0/en/default.htm"
target="_top">Release Notes</a>, которая предоставляет информацию об
особенностях, которые новые в MySQL 8.0 или отличаются от таковых в более
ранних выпусках MySQL. Некоторые из этих изменений
могут привести к несовместимостям.</p>

<p>Для списков переменных сервера MySQL и опций, которые были добавлены,
устарели или удалены в MySQL 8.0, см.
<a href="intro.htm#added-removed-variables-options">раздел 1.5</a>. Если Вы
используете какой-либо из этих элементов, обновление
требует изменений конфигурации.</li>

<li>Изучите <a href="#upgrading-from-previous-series">раздел
2.10.1.1</a>. Этот раздел описывает изменения, которые могут потребовать
действия прежде или после обновления.</li>

<li>Проверьте <a href="#checking-table-incompatibilities">раздел
2.10.3</a>, чтобы видеть, были ли изменения форматов таблиц или наборов
символов или сопоставлений произведены между Вашей текущей версией MySQL и
версией, до которой Вы обновляетесь. Если такие изменения привели к
несовместимости между версиями MySQL, Вы должны будете обновить затронутые
таблицы, используя инструкции в <a href="#rebuilding-tables">
разделе 2.10.4</a>.</li>

<li>Если Вы используете репликацию, изучите
<a href="replica.htm#replication-upgrade">раздел 19.4.3</a>.</li>
<li>Если Вы используете транзакции XA с <code>InnoDB</code>, выполните
<a href="sql.htm#xa-statements"><code>XA RECOVER</code></a>
прежде, чем обновить, чтобы проверить на нейтральные транзакции XA. Если
результаты есть, закройте или отмените транзакции через
<a href="sql.htm#xa-statements"><code>XA COMMIT</code></a> или
<a href="sql.htm#xa-statements"><code>XA ROLLBACK</code></a>.</li>

<li>Если Ваша установка MySQL содержит большой объем данных, который мог бы
занять много времени, чтобы преобразовать после оперативного обновления, Вы
могли бы счесть полезным создать <span><span>тестовую</span></span>
базу данных для того, чтобы оценить, какие преобразования могли бы быть
необходимы, и работа вовлечена, чтобы выполнить их.
Сделайте копию своего экземпляра MySQL, который содержит полную копию
базы данных <code>mysql</code>, плюс все другие базы данных без данных.
Выполните свою процедуру обновления на этом фиктивном случае, чтобы видеть,
какие действия могли бы быть необходимы так, чтобы Вы могли лучше оценить
работу, вовлеченную, выполняя фактическое преобразование данных на Вашем
оригинальном случае базы данных.</li>

<li>Восстановление и переустановка языковых интерфейсов MySQL рекомендуются
всякий раз, когда Вы устанавливаете или обновляете до нового выпуска MySQL.
Это относится к интерфейсам MySQL, таким как расширения PHP
<code>mysql</code>, модуль Perl <code>DBD::mysql</code> и
Python <code>MySQLdb</code>.</p></li></ul>

<h4><a name="upgrade-prerequisites"></a>Подтверждение предпосылок обновления
для Вашего MySQL 5.7</h4>
<p>Прежде, чем запустить MySQL 8.0, чтобы обновить каталог данных, очень
важно гарантировать готовность обновления Вашей установки при использовании
Вашего MySQL 5.7, чтобы выполнить несколько предварительных проверок.
Процесс обновления иначе может потерпеть неудачу.</p>

<p>Выполните предварительные проверки:</p>
<ol type="1"><li><p>Не должно быть никаких таблиц, которые используют
устаревшие типы данных, таблиц <code>InnoDB</code>, которые используют
неродное разделение, или триггеров, у которых отсутствует или пустое
определение или недопустимый контекст создания. Этот контекст обозначен
атрибутами <code>character_set_client</code>, <code>collation_connection
</code>, <code>Database Collation</code>, выведенными на экран
<a href="sql.htm#show-triggers"><code>SHOW TRIGGERS</code></a> или в таблице
<code>INFORMATION_SCHEMA</code> <a href="inform.htm#triggers-table"><code>
TRIGGERS</code></a>. Чтобы идентифицировать таблицы и триггеры, которые
подходят под эти требования, выполните эту команду:
<pre>
mysqlcheck -u root -p --all-databases --check-upgrade
</pre>
<p>Если <a href="programs.htm#mysqlcheck"><span><strong>mysqlcheck</strong>
</span></a> сообщает о каких-либо ошибках, исправьте проблемы.</li>

<li>Не должно быть никаких разделенных таблиц, которые используют механизм
хранения, у которого нет родной поддержки разделения. Чтобы идентифицировать
такие таблицы, выполните этот запрос:
<pre>
SELECT TABLE_SCHEMA, TABLE_NAME FROM INFORMATION_SCHEMA.TABLES
       WHERE ENGINE NOT IN ('innodb', 'ndbcluster') AND
       CREATE_OPTIONS LIKE '%partitioned%';
</pre>

<p>Любая таблица, о которой сообщает запрос, должна быть изменена, чтобы
использовать <code>InnoDB</code> или сделана неразделенной.
Изменить табличный механизм хранения на <code>InnoDB</code> можно так:
<pre>
ALTER TABLE <em><code>table_name</code></em> ENGINE = INNODB;
</pre>

<p>Для информации о преобразовании таблиц <code>MyISAM</code> в
<code>InnoDB</code> см. <a href="innodb.htm#converting-tables-to-innodb">
раздел 16.8.4</a>.</p>

<p>Чтобы сделать разделенную таблицу неразделенной, выполните этот запрос:
<pre>
ALTER TABLE <em><code>table_name</code></em> REMOVE PARTITIONING;
</pre></li>

<li>Не должно быть никаких таблиц в системной базе данных
MySQL 5.7 <code>mysql</code>, у которых есть то же самое имя как у таблицы,
используемой словарем данных MySQL 8.0. Чтобы идентифицировать таблицы с теми
именами, выполните этот запрос:
<pre>
SELECT TABLE_SCHEMA, TABLE_NAME FROM INFORMATION_SCHEMA.TABLES
       WHERE LOWER(TABLE_SCHEMA) = 'mysql' and LOWER(TABLE_NAME) IN
       ('catalogs', 'character_sets', 'collations', 'column_type_elements',
        'columns', 'events', 'foreign_key_column_usage', 'foreign_keys',
        'index_column_usage', 'index_partitions', 'index_stats', 'indexes',
        'parameter_type_elements', 'parameters', 'routines', 'schemata',
        'st_spatial_reference_systems', 'table_partition_values',
        'table_partitions', 'table_stats', 'tables', 'tablespace_files',
        'tablespaces', 'triggers', 'version', 'view_routine_usage',
        'view_table_usage');
</pre>

<p>Любые таблицы, о которых сообщает запрос, должны быть переименованы
(используя <a href="sql.htm#rename-table"><code>RENAME TABLE</code></a>).
Это может также повлечь за собой изменения приложений, которые
используют затронутые таблицы.</li>

<li>Не должно быть никаких таблиц, у которых есть имена с ограничением
внешнего ключа больше, чем 64 символа. Чтобы идентифицировать таблицы со
слишком длинными именами ограничения, выполните этот запрос:
<pre>
SELECT CONSTRAINT_SCHEMA, TABLE_NAME, CONSTRAINT_NAME
       FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS
       WHERE LENGTH(CONSTRAINT_NAME) &gt; 64;
</pre>

<p>Любые таблицы, о которых сообщает запрос, должны быть изменены, чтобы не
иметь имена ограничения больше, чем 64 символа (используя
<a href="sql.htm#alter-table"><code>ALTER TABLE</code></a>).</li>

<li>Ваш MySQL 5.7 не должен использовать функции, которые не поддержаны MySQL
8.0. Любые изменения здесь обязательно привязаны к определенной установке, но
следующие примеры иллюстрируют вид вещей, которые надо искать:</p>

<ul><li><p>Таблицы, которые используют механизм хранения, не поддержанный в
MySQL 8.0, должны быть изменены, чтобы использовать поддержанный механизм.
</p>
<p>Пример: MySQL 8.0 еще не поддерживает MySQL Cluster, таким образом,
таблицы <code>NDB</code> должны быть изменены, чтобы использовать
иной механизм хранения.</li>

<li>Некоторые опции запуска сервера и системные переменные были удалены в
MySQL 8.0. См. <a href="intro.htm#added-removed-variables-options">раздел 1.5
</a>. Если Вы используете какой-либо из этих элементов, обновление
требует изменений конфигурации.</p>

<p>Пример: Поскольку словарь данных предоставляет информацию об объектах базы
данных, сервер больше не проверяет имена каталогов в каталоге данных, чтобы
найти базы данных. Следовательно, опция <code>--ignore-db-dir</code>
является устаревшей и была удалена. Чтобы обработать это, удалите любые
случаи применения <code>--ignore-db-dir</code> из Вашей конфигурации запуска.
Кроме того, удалите или переместите названные подкаталоги каталога данных
прежде, чем обновить до MySQL 8.0. Альтернативно, позвольте серверам 8.0
добавлять те каталоги к словарю данных как базы данных, затем удалите каждую
из тех баз данных с использованием
<a href="sql.htm#drop-database"><code>DROP DATABASE</code></a>.</p></li>
</ul></li></ol>

<h4><a name="upgrade-procedure-inplace"></a>
Выполнение оперативного обновления</h4>
<p>Этот раздел описывает, как выполнить
<a href="#upgrade-methods">оперативное обновление</a>.
Перед переходом иззучите раздел
"<a href="#upgrade-before-you-begin">Прежде, чем Вы начнете</a>"
и гарантируете, что Ваша установка готова к обновлению.</p>

<p>Если Вы обновляете установку, первоначально произведенную, устанавливая
много пакетов RPM, обновляйте все пакеты, не только некоторые. Например, если
Вы ранее устанавливали сервер и клиент, не обновляйте только RPM сервера.</p>

<p>Для систем Linux, на которых MySQL установлен, используя пакеты RPM,
запуск сервера и завершение работы, управляется systemd, и
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a> не установлен. Если Вы устанавливали MySQL на системе Linux, используя
пакеты RPM, используйте systemd для запуска сервера и завершения работы
вместо методов, используемых в следующих инструкциях. См.
<a href="#using-systemd">раздел 2.5.9</a>.</p>

<p>Выполните оперативное обновление:</p>
<ol type="1"><li><p>Рассмотрите изменения, описанные в
<a href="#upgrading-from-previous-series">разделе 2.10.1.1</a>.
</li>

<li>С Вашим MySQL 5.7 сервером, если там зашифрованы табличные пространства
<code>InnoDB</code> выполните ротацию главного ключа, выполняя этот запрос:
<pre>
ALTER INSTANCE ROTATE INNODB MASTER KEY;
</pre></li>

<li>Сконфигурируйте свой MySQL 5.7 сервер, чтобы выполнить медленное
завершение работы, выполняя это:
<pre>
SET GLOBAL innodb_fast_shutdown = 0;
</pre>

<p>С медленным завершением работы <code>InnoDB</code> выполняет полную чистку
и буферное слияние изменений перед закрытием, которое гарантирует, что
журналы отмены пусты, и файлы с данными полностью подготовлены в случае
различий в формате файла между выпусками.</li>

<li>Закройте старый сервер MySQL. Например:
<pre>
mysqladmin -u root -p shutdown
</pre></li>

<li>Обновите пакеты (замените старые новыми для MySQL 8.0).</p>
<p>Для поддержанных дистрибутивов Linux лучший метод для того, чтобы заменить
пакеты MySQL, это использовать репозитарии программного обеспечения MySQL,
см. <a href="#updating-yum-repo">раздел 2.10.1.2</a>,
<a href="#updating-apt-repo">раздел 2.10.1.3</a> или
<a href="../../../dev.mysql.com/doc/mysql-sles-repo-quick-guide/en/#repo-qg-sles-upgrading"
target="_top">Upgrading MySQL with the MySQL SLES Repository</a>.</p></li>

<li><p>Запустите MySQL 8.0, используя существующий каталог данных. Например:
<pre>
mysqld_safe --user=mysql --datadir=<em><code>/path/to/existing-datadir</code></em>
</pre>

<p>Если там зашифрованы табличные пространства <code>InnoDB</code>,
используйте опцию <a href="server.htm#option_mysqld_early-plugin-load"><code>
--early-plugin-load</code></a>, чтобы загрузить плагин.</p>

<p>Сервер автоматически обнаруживает, присутствуют ли таблицы словаря данных.
В противном случае сервер создает их в каталоге данных, заполняет их
метаданными и затем возобновляет его нормальную последовательность запуска.
Во время этого процесса сервер обновляет метаданные для всех объектов базы
данных, включая базы данных, табличные пространства, систему и
пользовательские таблицы, представления и сохраненные программы (хранимые
процедуры и функции, триггеры и события планировщика событий). Сервер также
удаляет файлы, которые ранее использовались для хранения метаданных.
Например, после обновления, Вы заметите, что Ваши таблицы больше
не имеют файлов <code>.frm</code>.</p>

<p>Если этот шаг прошел нормально, сервер выполняет уборку:</p>
<ul><li><p>В каталоге данных сервер создает каталог, названный
<code>backup_metadata_57</code> и перемещает в него файлы с именами
<code>db.opt</code> и суффиксами <code>.frm</code>, <code>.par</code>,
<code>.TRG</code>, <code>.TRN</code> или <code>.isl</code>. Это файлы, ранее
используемые для хранения метаданных.</p>

<p>Файлы в <code>backup_metadata_57</code> сохраняют оригинальную иерархию
файловой системы. Например, если <code>t1.frm</code> был расположен в
подкаталоге <code>my_schema1</code>, сервер перемещает это в каталог
<code>backup_metadata_57/my_schema1</code>.</li>

<li>В базе данных <code>mysql</code> сервер переименовывает таблицы
<code>event</code> и <code>proc</code> в
<code>event_backup_57</code> и <code>proc_backup_57</code>.</p></li></ul>

<p>Если этот шаг терпит неудачу, сервер возвращает
все изменения каталога данных. В этом случае Вы должны удалить все
файлы системного журнала redo, запустить MySQL 5.7 на том же самом каталоге
данных и установить причину любых ошибок. Тогда выполните другое медленное
завершение работы сервера 5.7 и запустите MySQL 8.0, чтобы
попробовать еще раз.</li>

<li>Если MySQL 8.0 запускается успешно, выполните
<a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a>:
<pre>
mysql_upgrade -u root -p
</pre>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> исследует все таблицы во всех базах данных для несовместимостей с
текущей версией MySQL. Это делает любые остающиеся изменения, требуемые в
системной базе данных <code>mysql</code> между MySQL 5.7 и MySQL 8.0 так,
чтобы Вы могли использовать в своих интересах новые привилегии или функции.
<a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> также создает Performance Schema, <code>INFORMATION_SCHEMA</code>
и объекты схемы <code>sys</code>, современные для MySQL 8.0.</p>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> не должен использоваться, когда сервер работает с
<a href="replica.htm#option_mysqld_gtid-mode"><code>--gtid-mode=ON</code>
</a>. См. "<a href="replica.htm#replication-gtids-restrictions-mysql_upgrade">
Режим GTID и mysql_upgrade</a>".</p>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> не обновляет содержание таблиц справки. Для инструкций обновления
см. <a href="server.htm#server-side-help-support">раздел 6.1.10</a>.</p></li>

<li><p>Закройте и перезапустите сервер MySQL, чтобы гарантировать, что любые
изменения, произведенные в системных таблицах, вступают в силу. Например:
<pre>
mysqladmin -u root -p shutdown
mysqld_safe --user=mysql --datadir=<em><code>/path/to/existing-datadir</code></em>
</pre>

<p>Когда в первый раз Вы запустили MySQL 8.0 Вы, возможно, заметили, что он
написал несколько сообщений в свой журнал ошибок относительно необновленных
таблиц. Если <a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade
</strong></span></a> был выполнен успешно, не должно быть таких сообщений
второй раз, когда Вы запускаете сервер.</p></li></ol>

<h4><a name="upgrade-procedure-logical"></a>Выполнение логического обновления
</h4>
<p>Этот раздел описывает, как выполнить
<a href="#upgrade-methods">логическое обновление</a>.</p>

<p>Для систем Linux, на которых MySQL установлен, используя пакеты RPM,
запуск сервера и завершение работы управляются systemd, и
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a> не установлен. Если Вы устанавливали MySQL на системе Linux, используя
пакеты RPM, используйте systemd для запуска сервера и завершения работы
вместо методов, используемых в следующих инструкциях. См.
<a href="#using-systemd">раздел 2.5.9</a>.</p>

<p>Выполните логическое обновление:</p>
<ol type="1"><li><p>Изучите изменения, описанные в
<a href="#upgrading-from-previous-series">разделе 2.10.1.1</a>.
</li>

<li>На сервере MySQL 5.7 используйте
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>,
чтобы экспортировать Ваши данные:
<pre>
mysqldump -u root -p --add-drop-table --routines --events --all-databases
          --ignore-table=mysql.innodb_table_stats
          --ignore-table=mysql.innodb_index_stats
          --force &gt; data-for-upgrade.sql
</pre>

<p>Опции <a href="programs.htm#option_mysqldump_routines"><code>--routines
</code></a> и <a href="programs.htm#option_mysqldump_events"><code>--events
</code></a> должны быть даны явно, чтобы включать сохраненные подпрограммы и
события как определения объекта в файле дампа. Иначе, они появятся только
как строки в таблицах <code>mysql.proc</code> и <code>mysql.event</code>,
которые не будут использоваться в MySQL 8.0, когда файл дампа будет
перезагружен (определения для соответствующих объектов, будут сохранены в
таблицах словаря данных вместо этого).</p>

<p>Вы можете опустить опцию
<a href="programs.htm#option_mysqldump_ignore-table"><code>--ignore-table
</code></a>, файл дампа перезагрузится позже, если Вы будете включать опцию
<a href="programs.htm#option_mysql_force"><code>--force</code></a> в
команду загрузки. Однако, в этом случае, будьте готовы видеть несколько
предупреждений, когда те две таблицы загружаются,
предупреждения нужно проигнорировать.</li>

<li>Закройте старый сервер MySQL. Например:
<pre>
mysqladmin -u root -p shutdown
</pre></li>

<li>Установите MySQL 8.0. Для инструкций по установке см.
<a href="install.htm">главу 2</a>.</li>
<li>Инициализируйте новый каталог данных, как описано в
<a href="#data-directory-initialization">
разделе 2.9.1</a>. Например:
<pre>
mysqld --initialize --datadir=<em><code>/path/to/8.0-datadir</code></em>
</pre>

<p>Скопируйте временный пароль для <code>'root'@'localhost'</code>,
выведенный на Ваш экран или написанный в Ваш журнал ошибок для
более позднего использования.</li>

<li>Запустите MySQL 8.0, используя новый каталог данных. Например:
<pre>
mysqld_safe --user=mysql --datadir=<em><code>/path/to/8.0-datadir</code></em>
</pre>

<p>Если там зашифрованы табличные пространства <code>InnoDB</code>,
используйте опцию <a href="server.htm#option_mysqld_early-plugin-load">
<code>--early-plugin-load</code></a>, чтобы загрузить плагин.</li>

<li>Сбросьте временный <code>root</code> пароль:
<pre>
shell&gt; mysql -u root -p
Enter password: ****&lt;- enter temporary root password
mysql&gt; ALTER USER USER() IDENTIFIED BY '<em><code>your new password</code></em>';
</pre></li>

<li>Загрузите ранее созданный файл дампа в новый сервер MySQL. Например:
<pre>
mysql -u root -p --force &lt; data-for-upgrade.sql
</pre>

<p>Если Вы не определяли опцию
<a href="programs.htm#option_mysqldump_ignore-table"><code>--ignore-table
</code></a>, чтобы подавить дамп таблиц <code>mysql.event</code> и
<code>mysql.proc</code> для команды
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>,
они вновь появятся, когда Вы перезагрузите файл дампа.</li>

<li>После загрузки файла дампа, выполните
<a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a>:
<pre>
mysql_upgrade -u root -p
</pre>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> исследует все таблицы во всех базах данных для несовместимостей с
текущей версией MySQL. Это делает любые остающиеся изменения, требуемые в
системной базе данных <code>mysql</code> между MySQL 5.7 и MySQL 8.0
так, чтобы Вы могли использовать новые привилегии или возможности.
<a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> также создает Performance Schema, <code>INFORMATION_SCHEMA</code>
и объекты схемы <code>sys</code>, современные для MySQL 8.0.</p>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> не должен использоваться, когда сервер работает с
<a href="replica.htm#option_mysqld_gtid-mode"><code>--gtid-mode=ON</code></a>.
См. "<a href="replica.htm#replication-gtids-restrictions-mysql_upgrade">
Режим GTID и mysql_upgrade</a>".</p>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> не обновляет содержание таблиц справки. Для инструкций обновления
см. <a href="server.htm#server-side-help-support">раздел 6.1.10</a>.</p></li>

<li><p>Закройте и перезапустите сервер MySQL, чтобы гарантировать, что любые
изменения, произведенные в системных таблицах, вступают в силу. Например:
<pre>
mysqladmin -u root -p shutdown
mysqld_safe --user=mysql --datadir=<em><code>/path/to/8.0-datadir</code></em>
</pre></li></ol>

<h4><a name="upgrade-troubleshooting"></a>Поиск неисправностей обновления</h4>
<ul><li><p>Если проблемы происходят, и
<a href="programs.htm#mysqld"><span><strong>mysqld</strong></span></a>
не запускает, проверьте, что у Вас нет старого файла <code>my.cnf</code>
от Вашей предыдущей установки. Вы можете проверить это с помощью опции
<a href="programs.htm#option_general_print-defaults"><code>
--print-defaults</code></a> (например,
<a href="programs.htm#mysqld"><span><strong>mysqld --print-defaults</strong>
</span></a>). Если эта команда выводит на экран что-нибудь кроме названия
программы, у Вас есть активный файл <code>my.cnf</code>, который затрагивает
работу клиента или сервера.</li>

<li>Если после обновления Вы испытываете такие проблемы, как <code>Commands
out of sync</code> с собранными программами клиента или неожиданные дампы
памяти, Вы, вероятно, использовали старый заголовок или файлы библиотеки,
собирая Ваши программы. В этом случае проверьте дату Вашего файла
<code>mysql.h</code> и библиотеки <code>libmysqlclient.a</code>, чтобы
проверить, что они от нового дистрибутива MySQL. В противном случае повторно
соберите свои программы с новыми заголовками и библиотеками. Перекомпиляция
может также быть необходимой для программ, собранных с совместно используемой
библиотеки клиента, если старший номер версии библиотеки изменился (например,
с <code>libmysqlclient.so.15</code> на <code>libmysqlclient.so.16</code>).
</li>

<li>Если Вы создали определяемую пользователем функцию (UDF) с именем и
обновляете MySQL до версии, которая осуществляет новую встроенную функцию с
тем же самым именем, UDF становится недоступным. Чтобы исправить это, надо
использовать <a href="sql.htm#drop-function"><code>DROP FUNCTION</code></a>,
чтобы удалить UDF, а затем <a href="sql.htm#create-function"><code>CREATE
FUNCTION</code></a>, чтобы обновить UDF с иным непротиворечивым именем. То же
самое верно, если новая версия MySQL осуществляет встроенную функцию с тем же
самым именем, как существующая сохраненная функция. См.
<a href="lang.htm#function-resolution">раздел 10.2.4</a>
для правил, описывающих, как сервер интерпретирует ссылки на
различные виды функций.</p></li></ul>

<h4><a name="upgrading-from-previous-series"></a>2.10.1.1.
Изменения, затрагивающие обновления до MySQL 8.0</h4>
<p>Прежде, чем обновить до MySQL 8.0, рассмотрите изменения, описанные в этом
разделе, чтобы идентифицировать проблемы обновления, которые относятся к
Вашей текущей установке MySQL и приложениям.</p>

<p>В дополнение к изменениям, обрисованным в общих чертах в этом разделе,
рассмотрите <a href="../../../dev.mysql.com/doc/relnotes/mysql/8.0/en/default.htm"
target="_top">Release Notes</a>.</p>

<p>Изменения, отмеченные как <span><strong>Known
issue</strong></span> или <span><strong>Incompatible change</strong></span>
являются несовместимостями с более ранними версиями MySQL, и могут
потребовать Вашего внимания <span><em>прежде, чем Вы обновитесь</em></span>.
Наша цель состоит в том, чтобы избежать этих изменений, но иногда они
необходимы, чтобы исправить проблемы, которые были бы хуже, чем
несовместимость между выпусками. Если какая-либо проблема обновления,
применимая к Вашей установке, вовлекает несовместимость, которая требует
специальной обработки, следуйте инструкциям, данным в описании
несовместимости. Иногда это вовлекает дамп и перезагрузку таблиц или
использование <a href="sql.htm#check-table"><code>CHECK TABLE</code></a> или
<a href="sql.htm#repair-table"><code>REPAIR TABLE</code></a>.</p>

<p>Для дампа и инструкций перезагрузки см.
<a href="#rebuilding-tables">раздел 2.10.4</a>.
Любая процедура, которая вовлекает
<a href="sql.htm#repair-table"><code>REPAIR TABLE</code></a> с опцией
<code>USE_FRM</code> <span><em>должна</em></span>
быть сделана перед обновлением. Использование этого запроса с версией MySQL,
отличающейся от той, с которой создавалась таблица (то есть, используя это
после обновления) может повредить таблицу. См.
<a href="sql.htm#repair-table">раздел 14.7.2.5</a>.</p>

<ul><li><p><a href="#upgrade-data-dictionary-changes">
Изменения словаря данных</a></li>
<li><a href="#upgrade-configuration-changes">
Изменения конфигурации</a></li>
<li><a href="#upgrade-innodb-changes">Изменения InnoDB</a>
</p></li></ul>

<h5><a name="upgrade-data-dictionary-changes"></a>Изменения словаря данных
</h5>
<p><span><strong>Incompatible change</strong></span>: MySQL Server 8.0
включает глобальный словарь данных, содержащий информацию об объектах базы
данных в транзакционных таблицах. В предыдущей серии MySQL данные о словаре
хранились в метафайлах с данными и нетранзакционных системных таблицах. В
результате процедура обновления несколько отличается от предыдущего выпуска
MySQL и требует, чтобы Вы проверили готовность обновления своей установки,
проверяя определенные предпосылки. Для получения дополнительной информации
см. <a href="#upgrade-prerequisites">здесь</a>.
Данные, включенные в словарь сервера, влекут за собой некоторые общие
операционные различия, см.
<a href="data.htm#data-dictionary-usage-differences">раздел 15.6</a>.</p>

<h5><a name="upgrade-configuration-changes"></a>Изменения конфигурации</h5>
<ul><li><p><span><strong>Incompatible change</strong></span>:
механизм хранения MySQL теперь ответственен за обеспечение его собственного
обработчика разделения, и сервер MySQL больше не оказывает поддержку
разделения. <a href="innodb.htm"><code>InnoDB</code></a>
единственный механизм хранения, обеспечивающий родной обработчик разделения,
который поддержан в MySQL 8.0. Механизм хранения <code>NDB</code>
также оказывает родную поддержку разделения, но это еще не поддержано в MySQL
8.0. Разделенная таблица, используя любой другой механизм хранения должна
быть преобразована к <code>InnoDB</code>, или надо удалить разделение
<span><em>до</em></span> обновления сервера.</p>

<p>Для информации о преобразовании таблицы <code>MyISAM</code> к
<code>InnoDB</code> см.
<a href="innodb.htm#converting-tables-to-innodb">раздел 16.8.4</a>.</p>

<p>Табличный запрос создания, который привело бы к разделенной таблице,
используя механизм хранения без такой поддержки, терпит неудачу с ошибкой
(<span class="errorcode">ER_CHECK_NOT_IMPLEMENTED</span>) в MySQL 8.0.
Если Вы импортируете базы данных из файла дампа, создаваемого в MySQL 5.7
(или ранее), используя
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>
в MySQL 8.0, Вы должны удостовериться, что любые запросы, составляющие
разделенные таблицы, также не определяют неподдержанный механизм хранения,
удаляя любые ссылки на разделение или определяя механизм хранения как
<code>InnoDB</code>. Допустимо установить <code>InnoDB</code> как
значение по умолчанию.</p>

<p>Процедура, данная
<a href="#upgrade-prerequisites">здесь</a>,
описывает, как идентифицировать разделенные таблицы, которые должны быть
изменены прежде, чем обновиться до MySQL 8.0.</p>

<p>См. <a href="partit.htm#partitioning-limitations-storage-engines">
раздел 20.6.2</a> для дополнительной информации.</li>
<li><span><strong>Incompatible change</strong></span>:
Несколько кодов ошибки сервера не используются и были удалены (список см.
<a href="intro.htm#mysql-nutshell-removals">здесь</a>). Должны быть обновлены
приложения, которые проверяют любой из них.</p></li></ul>

<h5><a name="upgrade-innodb-changes"></a>Изменения InnoDB</h5>
<ul><li><p><span><strong>Incompatible change</strong></span>:
Есть различия в формате журнала redo поэтому, выполняя оперативное обновление
до MySQL 8.0 от MySQL 5.7 надо, чтобы MySQL 5.7 был закрыт, используя
<a href="innodb.htm#sysvar_innodb_fast_shutdown"><code>innodb_fast_shutdown
</code></a> = <code>0</code> перед обновлением. Требуется, чтобы Вы
обновлялись от версии GA MySQL 5.7, то есть, 5.7.9 или выше. Обновления от
версий non-GA MySQL 5.7 не поддержаны.</p></li></ul>

<h5><a name="upgrade-sql-changes"></a>Изменения в SQL</h5>
<ul><li><p>После обновления рекомендуется, чтобы Вы проверили подсказки
оптимизатора, определенные в коде программы, чтобы гарантировать, что
подсказки все еще достигают желаемой стратегии оптимизации. Улучшения
оптимизатора могут иногда представлять определенные ненужные подсказки.
В некоторых случаях ненужная подсказка может даже быть контрпроизводительной.
</p></li></ul>

<h4><a name="updating-yum-repo"></a>2.10.1.2.
Обновление MySQL с репозитарием MySQL Yum</h4>
<p>Для поддержанных платформ (см.
<a href="#linux-installation-yum-repo">раздел 2.5.1</a>)
Вы можете выполнить оперативное обновление для MySQL (то есть, заменяя старую
версию и затем выполняя новую версию от старых файлов с данными) с
репозитарием MySQL Yum.</p>

<ul><li><p>Прежде, чем выполнить любое обновление MySQL, следуйте тщательно
инструкциям в <a href="#upgrading">разделе 2.10.1</a>.
Особенно важно зарезервировать Вашу базу данных перед обновлением.</li>

<li>Следующие инструкции предполагают, что Вы установили MySQL с репозитарием
MySQL Yum или пакетом RPM, непосредственно загруженным с
<a href="../../../dev.mysql.com/downloads/default.htm" target="_top">MySQL Developer
Zone's MySQL Download page</a>, если это не так, следуйте инструкциям в
<a href="../../../dev.mysql.com/doc/refman/5.7/en/replace-third-party-yum.html"
target="_top">Replacing a Third-Party Distribution of MySQL Using the
MySQL Yum Repository</a>.</p></li></ul>

<ol type="1"><li><h5><a name="idm139965423300128"></a>
Выбор целевого ряда</h5>
<p>По умолчанию репозитарий MySQL Yum
обновляет MySQL к последней версии в ряду выпуска, который Вы выбрали во
время установки, что означает, например, 5.7.x, установка НЕ будет обновлена
к выпуску 8.0.x автоматически. Чтобы обновить к другому ряду выпуска, Вы
должны сначала отключить подрепозитарий для ряда, который был выбран и
включить подрепозитарий для Вашего целевого ряда. Чтобы сделать это, см.
общие инструкции, данные
<a href="#yum-repo-select-series">здесь</a>.
Для того, чтобы обновить от MySQL 5.7 к 8.0, выполните
<span><em>наоборот</em></span> шаги, иллюстрированные
<a href="#yum-repo-select-series">здесь</a>.</p>

<p>Как правило, чтобы обновить от одного ряда выпуска до другого, пойдите в
следующую серию вместо того, чтобы пропустить ряд. Например, если Вы в
настоящее время выполняете MySQL 5.6 и хотите обновить до 8.0, обновите до
MySQL 5.7 прежде, чем обновить до 8.0.</p>

<p>Для важной информации об обновлении от MySQL 5.7 к 8.0 см.
<a href="../../../dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html"
target="_top">Upgrading from MySQL 5.7 to 8.0</a>.</p></li>

<li><h5><a name="idm139965423292640"></a>Обновление MySQL</h5>
<p>Обновите MySQL и его компоненты следующей командой, для платформ,
которые не dnf:
<pre>
sudo yum update mysql-server
</pre>

<p>Для платформ dnf:
<pre>
sudo dnf upgrade mysql-server
</pre>

<p>Альтернативно, Вы можете обновить MySQL, говоря Yum
обновить все на Вашей системе, что могло бы занять значительно больше
времени, для платформ, которые не dnf:
<pre>
sudo yum update
</pre>

<p>Для dnf-систем:
<pre>
sudo dnf upgrade
</pre></li>

<li><h5><a name="idm139965423287504"></a>Перезапуск MySQL</h5>
<p>Сервер MySQL всегда перезапускается после обновления Yum.
Как только сервер перезапускается, выполните
<a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a>, чтобы проверить и возможно решить любые несовместимости между
старыми данными и обновленным программным обеспечением.
<a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> также выполняет другие функции, см. подробности в
<a href="programs.htm#mysql-upgrade">разделе 5.4.5</a>.</p></li></ol>

<p>Вы можете также обновить только определенный компонент. Используйте
следующую команду, чтобы перечислить все установленные пакеты для компонентов
MySQL (для dnf-систем, замените <span><strong>yum</strong></span> на
<span><strong>dnf</strong></span>):
<pre>
sudo yum list installed | grep "^mysql"
</pre>

<p>После идентификации названия пакета компонента Вашего выбора, для
платформ, которые не dnf-совместимы, обновите пакет следующей командой,
заменяя <em><code>package-name</code></em> названием пакета:
<pre>
sudo yum update <em><code>package-name</code></em>
</pre>

<p>Для dnf-систем:
<pre>
sudo dnf upgrade <em><code>package-name</code></em>
</pre>

<h5><a name="updating-yum-repo-client-lib"></a>
Обновление совместно используемых библиотек клиента</h5>
<p>После обновления MySQL, используя Yum, приложения, собранные с более
старыми версиями совместно используемых библиотек клиента,
должны продолжить работать.</p>

<p><span><em>Если Вы повторно собираете приложения и динамически
компонуете их с обновленными библиотеками:</em></span>
с новыми версиями совместно используемых библиотек, где есть различия или
дополнения в символе версии между новыми и старыми библиотеками (например,
между более новыми стандартными совместно используемыми библиотеками клиента
8.0 и некоторыми старыми или из других источников), пользование любыми
обновленными приложениями потребует обновленных библиотек в системах, где
приложения развернуты. Так что надлежит убедиться, что развернули пакеты для
совместно используемых библиотек MySQL на тех системах. Вы можете сделать
это, добавляя репозитарий MySQL Yum к системам (см.
"<a href="#yum-repo-setup">Добавление репозитария MySQL Yum</a>")
и установить последние совместно используемые библиотеки, используя
инструкции, данные <a href="#yum-install-components">здесь</a>.
</p>

<h4><a name="updating-apt-repo"></a>2.10.1.3.
Обновление MySQL с MySQL APT Repository</h4>
<p>В Debian 7 или 8 и Ubuntu 12, 14 или 15 Вы можете выполнить оперативное
обновление MySQL и его компонентов с помощью MySQL APT. См.
<a href="../../../dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-upgrading"
target="_top">Upgrading MySQL with the MySQL APT Repository</a> в
<a href="../../../dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/default.htm"
target="_top">A Quick Guide to Using the MySQL APT Repository</a>.</p>

<h3><a name="downgrading"></a>2.10.2. Откат MySQL</h3>
<p>Этот раздел описывает, как откатиться к более старой версии MySQL.</p>
<ul><li><p><a href="#downgrade-methods">Поддержанные методы</a>
</li>
<li><a href="#downgrade-paths">Поддержанные пути</a></li>
<li><a href="#downgrade-before-you-begin">Прежде, чем Вы начнете
</a></li>

<li><a href="#downgrade-procedure-inplace">
Выполнение оперативного отката</a></li>
<li><a href="#downgrade-procedure-logical">
Выполнение Логического отката</a></li>
<li><a href="#downgrade-troubleshooting">Проблемы отката</a>
</p></li></ul>

<p>В следующем обсуждении команды MySQL, которые должны быть выполнены,
используя учетную запись MySQL с административными привилегиями, включают
опцию <code>-u <code>root</code></code> в командной строке, чтобы определить
пользователя MySQL <code>root</code>. Команды, которые требуют пароля для
<code>root</code>, также включают опцию <code>-p</code>. Так как
<code>-p</code> не сопровождается никаким значением опции, пароль будет
запрошен по мере надобности явно.</p>

<p>Запросы SQL могут быть выполнены, используя клиент
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a>
(соединитесь как <code>root</code>, чтобы
гарантировать, что у Вас есть необходимые привилегии).</p>

<h4><a name="downgrade-methods"></a>Поддержанные методы</h4>
<p>Поддержанные методы включают:</p>
<ul><li><p>
<span><em>Оперативный</em></span>: Вовлекает закрытие новой версии MySQL,
замену новых двоичных модулей или пакетов старыми и перезапуска старой версии
MySQL на существующем каталоге данных. Оперативные откаты поддержаны между
версиями GA в пределах того же самого ряда выпуска.</li>

<li><span><em>Логический</em></span>: Вовлекает использование
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>,
чтобы вывести все таблицы из новой версии MySQL, а затем загрузку файла дампа
в старую версию MySQL. Логические откаты поддержаны между версиями GA в
пределах того же самого ряда выпуска и между уровнями выпуска.</p></li></ul>

<h4><a name="downgrade-paths"></a>Поддержанные пути</h4>
<p>Если иначе не сказано, следующие пути поддержаны:</p>
<ul><li><p>От серийной версии выпуска до более старой серийной версии
выпуска, используя все <a href="#downgrade-methods">методы</a>.
</li>

<li>Понижение одного уровня выпуска поддержано, используя <span><em>
логический</em></span> метод. Например, понижение от 8.0 до 5.7 поддержано.
</li>
<li>Понижение больше чем одного уровня выпуска поддержано, используя
<span><em>логический</em></span> метод, но только если Вы понижаете один
уровень выпуска за один раз. Например, Вы можете понизить от 8.0
до 5.7, а затем до 5.6.</p></li></ul>

<p>Следующие условия относятся ко всем путям:</p>
<ul><li><p>Откаты между выпусками статуса General Availability (GA).</li>
<li>Откаты между выпусками статуса milestone (или от GA до milestone)
не поддержаны. Например, понижение от MySQL 8.0.1 к MySQL 8.0.0 не
поддержано, поскольку ни один не является выпуском статуса GA.</p></li></ul>

<h4><a name="downgrade-before-you-begin"></a>Прежде, чем Вы начнете</h4>
<p>Перед откатом рекомендуются следующие шаги:</p>
<ul><li><p>Изучите <a href="../../../dev.mysql.com/doc/relnotes/mysql/8.0/en/default.htm"
target="_top">Release Notes</a> для версии MySQL, от которой Вы
откатываетесь, чтобы гарантировать, что нет никаких особенностей или
затруднительных положений, в которых Вы окажетесь.</li>

<li>Изучите <a href="#downgrading-to-previous-series">раздел
2.10.2.1</a>. Этот раздел описывает изменения, которые могут потребовать
действия прежде или после отката.</p>

<p>Процедуры, описанные в следующих разделах, предполагают, что Вы
откатываетесь с файлами с данными, создаваемыми или измененными более новой
версией MySQL. Однако, если Вы не изменяли свои данные после того, как
выполнили обновление, использование резервных копий, сделанных
<span><em>перед</em></span> обновлением, рекомендуется. Многие из изменений
описаны в <a href="#downgrading-to-previous-series">разделе
2.10.2.1</a>, требуют действия прежде или после того, как откат неприменим.
Это приводит к необходимости применения резервных копий, сделанных
<span><em>перед</em></span> обновлением.</p></li>

<li><p>Всегда поддерживайте резервные копии своих текущих баз данных и файлов
системного журнала перед откатом. Резервное копирование должно включать
базу данных <code>mysql</code>, которая содержит системные таблицы MySQL. См.
<a href="backup.htm#backup-methods">раздел 8.2</a>.</li>

<li>Использование новых особенностей, новых параметров конфигурации или новых
значений параметра конфигурации, которые не поддержаны предыдущим выпуском,
может вызвать ошибки или отказы. Перед понижением версии рекомендуется, чтобы
Вы полностью отменили изменения, следующие из использования новых
особенностей, и удалили настройки конфигурации, которые не поддержаны
выпуском, к которому Вы понижаете версию.</li>

<li>Проверьте <a href="#checking-table-incompatibilities">раздел
2.10.3</a>, чтобы видеть, были ли изменения форматов таблицы или наборов
символов или сопоставлений произведены между Вашей текущей версией MySQL и
версией, к которой Вы откатываетесь. Если такие изменения привели к
несовместимости между версиями MySQL, переделайте удалите затронутые таблицы,
используя инструкции в <a href="#rebuilding-tables">разделе 2.10.4
</a>.</li>

<li>Если Вы используете XA с <code>InnoDB</code>, запустите
<a href="sql.htm#xa-statements"><code>XA RECOVER</code></a> перед откатом,
чтобы проверить на нейтральные транзакции XA. Если результаты возвращены,
выполните <a href="sql.htm#xa-statements"><code>XA COMMIT</code></a> или
<a href="sql.htm#xa-statements"><code>XA ROLLBACK</code></a>.</p></li></ul>

<h4><a name="downgrade-procedure-inplace"></a>Выполнение оперативного отката
</h4>
<p>Оперативные откаты поддержаны для переходов
между выпусками состояния GA в пределах того же самого ряда выпуска.</p>
<p>Для поддержанного пути в пределах MySQL 8.0 рядов выпуска должно быть по
крайней мере две доступных версии MySQL 8.0 состояния GA.</p>

<p>Для систем Linux, на которых MySQL установлен, используя пакеты RPM,
запуск сервера и завершение работы управляется systemd, и
<a href="programs.htm#mysqld-safe"><span><strong>mysqld_safe</strong></span>
</a> не установлен. Если Вы устанавливали MySQL на системе Linux, используя
пакеты RPM, используйте systemd для запуска сервера и завершения работы
вместо методов, используемых в следующих инструкциях. См.
<a href="#using-systemd">раздел 2.5.9</a>.</p>

<p>Выполнить оперативный откат:</p>
<ol type="1"><li><p>Изучите изменения, описанные
<a href="#downgrading-to-previous-series">разделе 2.10.2.1</a>
для понимания шагов, которые будут выполнены перед понижением версии.</li>

<li>Сконфигурируйте MySQL, чтобы выполнить медленное завершение работы,
устанавливая <a href="innodb.htm#sysvar_innodb_fast_shutdown"><code>
innodb_fast_shutdown</code></a> в <code>0</code>. Например:
<pre>
mysql -u root -p --execute="SET GLOBAL innodb_fast_shutdown=0"
</pre>

<p>С медленным завершением работы <code>InnoDB</code> выполняет полную чистку
и буферное слияние изменений перед закрытием, которое гарантирует, что файлы
с данными полностью подготовлены в случае различий в формате
файла между выпусками.</li>

<li>Закройте более новый сервер MySQL. Например:
<pre>
mysqladmin -u root -p shutdown
</pre></li>

<li>После медленного завершения работы, удалите файлы системного журнала
<code>InnoDB</code> redo (файлы <code>ib_logfile*</code>) из каталога
<code>data</code>, чтобы избежать проблем отката, связанных с тем, что
файл системного журнала внесет изменения, которые, возможно,
произошли между выпусками.
<pre>
rm ib_logfile*
</pre></li>

<li>Замените двоичные файлы MySQL старыми.</li>
<li>Запустите более старый сервер MySQL, используя существующий
каталог данных. Например:
<pre>
mysqld_safe --user=mysql --datadir=<em><code>/path/to/existing-datadir</code></em>
</pre></li>

<li>Запустите <a href="programs.htm#mysql-upgrade"><span><strong>
mysql_upgrade</strong></span></a>. Например:
<pre>
mysql_upgrade -u root -p
</pre>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> исследует все таблицы во всех базах данных для несовместимостей с
текущей версией MySQL, и пытается восстановить таблицы,
если проблемы найдены.</li>

<li>Закройте и перезапустите сервер MySQL, чтобы гарантировать, что любые
изменения, произведенные в системных таблицах, вступают в силу. Например:
<pre>
mysqladmin -u root -p shutdown
mysqld_safe --user=mysql --datadir=<em><code>/path/to/existing-datadir</code></em>
</pre></li></ol>

<h4><a name="downgrade-procedure-logical"></a>Выполнение логического отката
</h4>
<p>Логические откаты поддержаны между выпусками в пределах того же самого
ряда выпуска и для возврата к предыдущему уровню выпуска. Только переходы
между выпусками состояния GA поддержаны.</p>

<p>Для систем Linux, на которых MySQL установлен, используя пакеты RPM,
запуск сервера и завершение работы управляется systemd, и
<a href="programs.htm#mysqld-safe">
<span><strong>mysqld_safe</strong></span></a> не установлен.
Если Вы устанавливали MySQL на системе Linux, используя пакеты RPM,
используйте systemd для запуска сервера и завершения работы вместо методов,
используемых в следующих инструкциях. См.
<a href="#using-systemd">раздел 2.5.9</a>.</p>

<p>Выполните логический откат:</p>
<ol type="1"><li><p>Рассмотрите изменения, описанные в
<a href="#downgrading-to-previous-series">разделе 2.10.2.1</a>
для понимания шагов, которые будут выполнены перед понижением версии.</li>

<li>Сделайте дамп всех баз данных. Например:
<pre>
mysqldump -u root -p --add-drop-table --routines --events
          --all-databases --force &gt; data-for-downgrade.sql
</pre></li>

<li>Закройте более новый сервер MySQL. Например:
<pre>
mysqladmin -u root -p shutdown
</pre></li>

<li>Инициализируйте более старый экземпляр
MySQL с новым каталогом данных. Например:
<pre>
mysqld --initialize --user=mysql
</pre></li>

<li>Запустите более старый сервер MySQL, используя новый
каталог данных. Например:
<pre>
mysqld_safe --user=mysql --datadir=<em><code>/path/to/new-datadir</code></em>
</pre></li>

<li>Загрузите файл дампа в более старый сервер MySQL. Например:
<pre>
mysql -u root -p --force &lt; data-for-upgrade.sql
</pre></li>

<li>Выполните <a href="programs.htm#mysql-upgrade"><span><strong>
mysql_upgrade</strong></span></a>, например:
<pre>
mysql_upgrade -u root -p
</pre>

<p><a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade</strong>
</span></a> исследует все таблицы во всех базах данных для выявления
несовместимостей с текущей версией MySQL и пытается восстановить таблицы,
если проблемы найдены.</li>

<li>Перезапустите сервер MySQL, чтобы гарантировать, что любые изменения,
произведенные в системных таблицах, вступают в силу. Например:
<pre>
mysqladmin -u root -p shutdown
mysqld_safe --user=mysql --datadir=<em><code>/path/to/new-datadir</code></em>
</pre></li></ol>

<h4><a name="downgrade-troubleshooting"></a>Проблемы</h4>
<p>Если Вы понижаете от одного ряда выпуска до другого, в табличных форматах
хранения могут быть несовместимости. В этом случае используйте
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>,
чтобы вывести Ваши таблицы в дамп перед понижением. После понижения
перезагрузите файл дампа, используя
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a> или
<a href="programs.htm#mysqlimport"><span><strong>mysqlimport</strong></span>
</a>, чтобы обновить Ваши таблицы. Для примеров см.
<a href="#copying-databases">раздел 2.10.5</a>.</p>

<p>Типичный признак нисходящего несовместимого изменения формата таблицы: Вы
не можете открыть таблицы. В этом случае используйте следующую процедуру:</p>
<ol type="1"><li><p>Остановите более старый сервер MySQL, к которому
Вы понижаете версию.</li>

<li>Перезапустите более новый сервер MySQL, от которого Вы понижаете версию.
</li>
<li>Выведите в дамп любые таблицы, которые были недоступны более старому
серверу при использовании <a href="programs.htm#mysqldump"><span><strong>
mysqldump</strong></span></a>.</li>

<li>Остановите более новый сервер MySQL и перезапустите более старый.</li>
<li>Перезагрузите файл дампа в более старый сервер.
Ваши таблицы должны быть доступными.</p></li></ol>

<h4><a name="downgrading-to-previous-series"></a>2.10.2.1.
Изменения, затрагивающие откат от MySQL 8.0</h4>
<p>Прежде, чем понизить версию от MySQL 8.0, рассмотрите изменения, описанные
в этом разделе. Некоторые изменения могут потребовать действия прежде или
после понижения версии.</p>

<ul><li><p><a href="#downgrade-innodb-changes">InnoDB</a>
</p></li></ul>
<h5><a name="downgrade-innodb-changes"></a>InnoDB</h5>
<ul><li><p><span><strong>Incompatible change</strong></span>: прежде, чем
выполнить оперативный откат от MySQL 8.0 к 5.7, Вы должны завершить работу
MySQL, используя установку <a href="innodb.htm#sysvar_innodb_fast_shutdown">
<code>innodb_fast_shutdown</code></a> в <code>0</code> или <code>1</code>,
сопровождаемую удалением файлов системного журнала redo (файлы
<code>ib_logfile*</code>).</p></li></ul>

<h3><a name="checking-table-incompatibilities"></a>2.10.3.
Проверка, какие таблицы или индексы должны быть восстановлены</h3>
<p>Двоичное обновление устанавливает одну версию MySQL по существующей
версии, не выводя в дамп и не перезагружая таблицы:</p>

<ol type="1"><li><p>Остановите сервер для существующей версии,
если он работает.</li>
<li>Установите иную версию MySQL. Это обновление, если новая версия выше, чем
оригинальная версия, откат, если версия ниже.</li>
<li>Запустите сервер для новой версии.</p></li></ol>

<p>Во многих случаях, таблицы от предыдущей версии MySQL могут использоваться
без проблем новой версией. Однако, иногда изменения происходят, которые
требуют восстановления таблиц или индексов. Если у Вас есть таблицы, которые
затронуты любыми такими проблемами, восстановите таблицы или индексы по мере
необходимости с использованием инструкций, данных в
<a href="#rebuilding-tables">разделе 2.10.4</a>.</p>

<p>Модификации обработки наборов символов или сопоставлений могли бы изменить
символьный порядок сортировки, который вызывает упорядочивание записей в
любом индексе, который использует затронутый набор символов или
сопоставление. Такие изменения приводят к нескольким возможным проблемам:</p>

<ul><li><p>Результаты сравнения, которые отличаются от предыдущих результатов
</li>
<li>Неспособность найти некоторые значения из-за неупорядоченного
порядка записей в индексе.</li>
<li>Неупорядоченные результаты <code>ORDER BY</code></li>
<li>Таблицы, которые <a href="sql.htm#check-table"><code>CHECK TABLE</code>
</a> помечает как нуждающиеся в ремонте</p></li></ul>

<p>Решение этих проблем состоит в том, чтобы восстановить любой индекс,
использующий затронутый набор символов или сопоставление, удалить и обновить
индекс или вывести в дамп и перезагрузить всю таблицу. В некоторых случаях
возможно изменить затронутые столбцы, чтобы использовать иное сопоставление.
Подробности о пересоздании индексов см. в
indexes, see <a href="#rebuilding-tables">разделе 2.10.4</a>.</p>

<p>Во многих случаях, Вы можете использовать
<a href="sql.htm#check-table"><code>CHECK TABLE ... FOR UPGRADE</code></a>,
чтобы идентифицировать таблицы, для которых требуется восстановление
индексов. Это сообщит так:
<pre>
Table upgrade required.
Please do "REPAIR TABLE `tbl_name`" or dump/reload to fix it!
</pre>

<p>В этих случаях Вы можете также использовать
<a href="programs.htm#mysqlcheck"><span><strong>mysqlcheck --check-upgrade
</strong></span></a> или <a href="programs.htm#mysql-upgrade"><span><strong>
mysql_upgrade</strong></span></a>, которые выполняют
<a href="sql.htm#check-table"><code>CHECK TABLE</code></a>. Однако,
использование <a href="sql.htm#check-table"><code>CHECK TABLE</code></a>
применяется только после обновлений, но не откатов. Кроме того,
<a href="sql.htm#check-table"><code>CHECK TABLE</code></a>
неприменимо ко всем механизмам хранения. Для деталей о том, которые механизмы
хранения понимают <a href="sql.htm#check-table"><code>CHECK TABLE</code></a>
см. <a href="sql.htm#check-table">раздел 14.7.2.2</a>.</p>

<h3><a name="rebuilding-tables"></a>2.10.4.
Восстановление таблиц или индексов</h3>
<p>Этот раздел описывает, как восстановить таблицу, после таких изменений
MySQL как типы данных или наборы символов. Например, ошибка в сопоставлении,
возможно, была исправлена, требуя, чтобы таблица восстановилась, чтобы
обновить индексирование для символьных столбцов, которые используют
сопоставление. Для примеров см.
<a href="#checking-table-incompatibilities">раздел 2.10.3</a>.
Вы, возможно, также должны были бы восстановить или обновить таблицу,
обозначенную при выполнении
<a href="sql.htm#check-table"><code>CHECK TABLE</code></a>,
<a href="programs.htm#mysqlcheck"><span><strong>mysqlcheck</strong></span>
</a> или <a href="programs.htm#mysql-upgrade"><span><strong>mysql_upgrade
</strong></span></a>.</p>

<p>Методы для того, чтобы восстановить таблицу включают дамп и перезагрузку
или использование <a href="sql.htm#alter-table"><code>ALTER TABLE</code></a>
или <a href="sql.htm#repair-table"><code>REPAIR TABLE</code></a>.
<a href="sql.htm#repair-table"><code>REPAIR TABLE</code></a> относится только
к таблицам типов <code>MyISAM</code>, <code>ARCHIVE</code> и
<code>CSV</code>.</p>

<p>Если Вы восстанавливаете таблицы, потому что версия MySQL не будет
обрабатывать их после двоичного (оперативного) обновления, Вы должны
использовать метод дампа-и-перезагрузки. Выведите таблицы в дамп
<span><em>до</em></span> обновления, с использованием Вашей оригинальной
версии MySQL. Затем перезагрузите
таблицы <span><em>после</em></span> обновления.</p>

<p>Если Вы используете метод дампа-и-перезагрузки восстановления таблиц
только с целью восстановления индексов, Вы можете выполнить дамп прежде или
после обновления. Перезагрузка все еще должна быть сделана позже.</p>

<p>Чтобы восстановить таблицу, выводя в дамп и перезагружая ее, используйте
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>
для создания дампа и <a href="programs.htm#mysql"><span><strong>mysql
</strong></span></a>, чтобы перезагрузить файл:
<pre>
mysqldump <em><code>db_name</code></em> t1 &gt; dump.sql
mysql <em><code>db_name</code></em> &lt; dump.sql
</pre>

<p>Чтобы восстановить все таблицы в единственной базе данных, определите имя
базы данных без любого имени таблицы:
<pre>
mysqldump <em><code>db_name</code></em> &gt; dump.sql
mysql <em><code>db_name</code></em> &lt; dump.sql
</pre>

<p>Чтобы восстановить все таблицы во всех базах данных, используйте опцию
<a href="programs.htm#option_mysqldump_all-databases"><code>--all-databases
</code></a>:
<pre>
mysqldump --all-databases &gt; dump.sql
mysql &lt; dump.sql
</pre>

<p>Чтобы восстановить таблицу с <a href="sql.htm#alter-table"><code>ALTER
TABLE</code></a>, используйте изменение <span><span>null</span></span>,
то есть, команда <a href="sql.htm#alter-table"><code>ALTER TABLE</code></a>,
которая преобразует таблицу, чтобы использовать механизм хранения, который
уже используется. Например, если <code>t1</code> таблица <code>InnoDB</code>,
используйте этот запрос:
<pre>
ALTER TABLE t1 ENGINE = InnoDB;
</pre>

<p>Если Вы не уверены, который механизм хранения определить в
<a href="sql.htm#alter-table"><code>ALTER TABLE</code></a>, надо использовать
<a href="sql.htm#show-create-table"><code>SHOW CREATE TABLE</code></a>,
чтобы вывести на экран табличное определение.</p>

<p>Если Вы должны восстановить таблицу <code>InnoDB</code> потому, что
<a href="sql.htm#check-table"><code>CHECK TABLE</code></a>
указывает, что табличное обновление требуется, используйте
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>
для создания дампа и <a href="programs.htm#mysql"><span><strong>mysql
</strong></span></a>, чтобы перезагрузить файл, как описано ранее. Если
<a href="sql.htm#check-table"><code>CHECK TABLE</code></a>
указывает, что есть повреждение, обратитесь к
<a href="innodb.htm#forcing-innodb-recovery">разделу 16.20.2</a>
для информации об использовании опции
<a href="innodb.htm#sysvar_innodb_force_recovery"><code>innodb_force_recovery
</code></a> для перезапуска <code>InnoDB</code>. Чтобы понять тип проблемы, с
которой столкнулся <a href="sql.htm#check-table"><code>CHECK TABLE</code>
</a>, надо обратиться к замечаниям по <code>InnoDB</code> в
<a href="sql.htm#check-table">разделе 14.7.2.2</a>.</p>

<p>Для <code>MyISAM</code>, <code>ARCHIVE</code> или <code>CSV</code>
Вы можете использовать <a href="sql.htm#repair-table"><code>REPAIR TABLE
</code></a>, если проверка указывает, что есть повреждение или что обновление
требуется. Например, чтобы восстановить таблицу <code>MyISAM</code>:
<pre>
REPAIR TABLE t1;
</pre>

<p><a href="programs.htm#mysqlcheck"><span><strong>mysqlcheck --repair
</strong></span></a> обеспечивает доступ из командной строки к
<a href="sql.htm#repair-table"><code>REPAIR TABLE</code></a>.
Это может быть более удобным средством, потому что Вы можете использовать
опции <a href="programs.htm#option_mysqlcheck_databases"><code>--databases
</code></a> или <a href="programs.htm#option_mysqlcheck_all-databases"><code>
--all-databases</code></a>, чтобы восстановить все таблицы в определенных
базах данных или во всех базах данных, соответственно:
<pre>
mysqlcheck --repair --databases <em><code>db_name</code></em> ...
mysqlcheck --repair --all-databases
</pre>

<h3><a name="copying-databases"></a>2.10.5. Копирование баз данных
MySQL к другой машине</h3>
<p>В случаях, когда Вы должны передать базы данных между различными
архитектурами, Вы можете использовать <a href="programs.htm#mysqldump"><span>
<strong>mysqldump</strong></span></a>, чтобы создать файл, содержащий запросы
SQL. Вы можете тогда передать файл другой машине и ввести его через клиент
<a href="programs.htm#mysql"><span><strong>mysql</strong></span></a>.</p>

<p>Используйте <a href="programs.htm#mysqldump"><span><strong>mysqldump
--help</strong></span></a>, чтобы видеть, какие опции доступны.</p>
<p>Самый легкий (хотя не самый быстрый) способ переместить базу данных между
двумя машинами, это выполнить следующие команды на машине, на которой
расположена база данных:
<pre>
mysqladmin -h '<em><code>other_hostname</code></em>' create <em><code>db_name</code></em>
mysqldump <em><code>db_name</code></em> | mysql -h '<em><code>other_hostname</code></em>' <em><code>db_name</code></em>
</pre>

<p>Если Вы хотите скопировать базу данных с удаленной машины по медленной
сети, Вы можете использовать эти команды:
<pre>
mysqladmin create <em><code>db_name</code></em>
mysqldump -h '<em><code>other_hostname</code></em>' --compress <em><code>db_name</code></em> | mysql <em><code>db_name</code></em>
</pre>

<p>Вы можете также сохранить дамп в файле, передать файл целевой машине
и затем загрузить файл в базу данных там. Например, Вы можете вывести базу
данных в сжатый файл на исходной машине:
<pre>
mysqldump --quick <em><code>db_name</code></em> | gzip &gt; <em><code>db_name</code></em>.gz
</pre>

<p>Передайте файл, содержащий содержание базы данных к целевой машине,
и выполните эти команды:
<pre>
mysqladmin create <em><code>db_name</code></em>
gunzip &lt; <em><code>db_name</code></em>.gz | mysql <em><code>db_name</code></em>
</pre>

<p>Вы можете также использовать <a href="programs.htm#mysqldump"><span>
<strong>mysqldump</strong></span></a> и
<a href="programs.htm#mysqlimport"><span><strong>mysqlimport</strong></span>
</a>, чтобы передать базу данных. Для больших таблиц это намного быстрее, чем
простое использование
<a href="programs.htm#mysqldump"><span><strong>mysqldump</strong></span></a>.
В следующих командах <em><code>DUMPDIR</code></em>
представляет полный путь каталога, который Вы используете, чтобы сохранить
вывод <a href="programs.htm#mysqldump"><span><strong>mysqldump</strong>
</span></a>.</p>

<p>Создайте каталог для выходных файлов и выведите в дамп базу данных:
<pre>
mkdir <em><code>DUMPDIR</code></em>
mysqldump --tab=<em><code>DUMPDIR</code></em> <em><code>db_name</code></em>
</pre>

<p>Передайте файлы в каталоге <em><code>DUMPDIR</code></em>
к некоторому соответствующему каталогу на целевой машине и загрузите
файлы в MySQL там:
<pre>
mysqladmin create <em><code>db_name</code></em> # create database
cat <em><code>DUMPDIR</code></em>/*.sql | mysql <em><code>db_name</code></em> # create tables in database
mysqlimport <em><code>db_name</code></em> <em><code>DUMPDIR</code></em>/*.txt # load data into tables
</pre>

<p>Не забывайте скопировать базу данных <code>mysql</code>, потому что это
то место, где таблицы привилегий сохранены. Вам, возможно, придется выполнить
команды как MySQL-пользователь <code>root</code> на новой машине, пока Вы не
имеете базу данных <code>mysql</code>.</p>

<p>После того, как Вы импортируете базу данных <code>mysql</code> на
новой машине, выполните <a href="programs.htm#mysqladmin"><span><strong>
mysqladmin flush-privileges</strong></span></a>, чтобы сервер перезагрузил
информацию о таблице привилегий.</p>

<h2><a name="perl-support"></a>2.11. Замечания по установке Perl</h2>
<p>Модуль Perl <code>DBI</code> обеспечивает интерфейс для доступа к базе
данных. Вы можете написать скрипт <code>DBI</code>, который работает со
многими различными механизмами базы данных без изменения. Используя
<code>DBI</code>, Вы должны установить модуль <code>DBI</code> и модуль
DataBase Driver (DBD) для каждого типа сервера базы данных, к которому Вы
хотите получить доступ. Для MySQL это модуль <code>DBD::mysql</code>.</p>

<p>Поддержка Perl не включена в дистрибутивы MySQL. Вы можете получить
необходимые модули из <a href="../../../search.cpan.org/default.htm" target="_top">
http://search.cpan.org</a> для Unix или применяя программу
ActiveState <span><strong>ppm</strong></span> в Windows.</p>

<p>Интерфейс <code>DBI</code>/<code>DBD</code> требует Perl 5.6.0 и 5.6.1
или позже. DBI <span><em>не работает</em></span>, если у Вас есть более
старая версия Perl. Вы должны использовать <code>DBD::mysql</code> 4.009 или
выше. Хотя более ранние версии доступны, они не поддерживают
полную функциональность MySQL 8.0.</p>

<h3><a name="perl-installation"></a>2.11.1. Установка Perl в Unix</h3>
<p>Поддержка Perl MySQL требует, чтобы Вы установили клиента MySQL,
поддержку разработки (библиотеки и заголовочные файлы). Большинство методов
установки устанавливает необходимые файлы. Если Вы устанавливаете MySQL из
файлов RPM в Linux, убедитесь, что также установили RPM разработчика.
Программы клиента находятся в клиентском RPM, но поддержка разработки в
RPM для разработчика.</p>

<p>Файлы, в которых Вы нуждаетесь для поддержки Perl, могут быть получены из
(Comprehensive Perl Archive Network),
<a href="../../../search.cpan.org/default.htm" target="_top">http://search.cpan.org</a>.
</p>

<p>Самый легкий способ установить модули Perl на Unix состоит в том, чтобы
использовать модуль <code>CPAN</code>:
<pre>
shell&gt; perl -MCPAN -e shell
cpan&gt; install DBI
cpan&gt; install DBD::mysql
</pre>

<p>Установка <code>DBD::mysql</code> выполняет много тестов. Эти тесты
пытаются соединиться с местным сервером MySQL, используя имя пользователя
по умолчанию и пароль. Имя пользователя значения по умолчанию это Ваше имя
для входа в систему на Unix или <code>ODBC</code> в Windows. Пароля по
умолчанию нет. Если Вы не можете соединиться с сервером с этими значениями
(например, если у Вашей учетной записи есть пароль), тесты терпят неудачу.
Вы можете использовать <code>force install DBD::mysql</code>, чтобы
проигнорировать неудачные тесты.</p>

<p><code>DBI</code> требует модуль <code>Data::Dumper</code>.
Это может быть уже установлено, в противном случае Вы должны установить его
перед установкой <code>DBI</code>.</p>

<p>Также возможно загрузить дистрибутив модуля в форме сжатых архивов
<span><strong>tar</strong></span> и создать модули вручную. Например, чтобы
распаковать и создать дистрибутив DBI, используйте такую процедуру:</p>

<ol type="1"><li><p>Распакуйте дистрибутив в текущий каталог:
<pre>
shell&gt; gunzip &lt; DBI-<em><code>VERSION</code></em>.tar.gz | tar xvf -
</pre>

<p>Эта команда создает каталог
<code>DBI-<em><code>VERSION</code></em></code>.</li>
<li>Перейдите в верхний каталог распакованного дистрибутива:
<pre>
shell&gt; cd DBI-<em><code>VERSION</code></em>
</pre></li>

<li>Создайте дистрибутив и соберите все:
<pre>
shell&gt; perl Makefile.PL
shell&gt; make
shell&gt; make test
shell&gt; make install
</pre></li></ol>

<p>Команда <span><strong>make test</strong></span> важна, потому что она
проверяет, что модуль работает. Отметьте что, когда Вы выполняете эту
команду во время установки <code>DBD::mysql</code>, чтобы проверить код
интерфейса, сервер MySQL должен работать, или тест терпит неудачу.</p>

<p>Хорошая идея собрать и повторно установить <code>DBD::mysql</code>
всякий раз, когда Вы устанавливаете новый выпуск MySQL. Это гарантирует, что
последние версии библиотек клиента MySQL установлены правильно.</p>

<p>Если у Вас нет прав доступа, чтобы установить модули Perl в системном
каталоге или если Вы хотите установить модули Perl локально, следующая ссылка
может быть полезной:
<a href="../../../learn.perl.org/faq/perlfaq8.html#How-do-I-keep-my-own-module-library-directory-"
target="_top">
http://learn.perl.org/faq/perlfaq8.html#How-do-I-keep-my-own-module-library-directory-</a>.
</p>

<h3><a name="activestate-perl"></a>2.11.2.
Установка ActiveState Perl в Windows</h3>
<p>В Windows Вы должны сделать следующее, чтобы установить MySQL модуль
<code>DBD</code> с ActiveState Perl:</p>

<ol type="1"><li><p>Скачать ActiveState Perl с
<a href="../../../www.activestate.com/Products/ActivePerl/default.htm" target="_top">
http://www.activestate.com/Products/ActivePerl/</a> и поставить его.</li>

<li>Открыть окно консоли.</li>
<li>В случае необходимости установите переменную
If necessary, set the <code>HTTP_proxy</code>. Например, Вы могли бы
попробовать такую установку:
<pre>
C:\&gt; set HTTP_proxy=my.proxy.com:3128
</pre></li>

<li>Запустить программу PPM:
<pre>
C:\&gt; C:\perl\bin\ppm.pl
</pre></li>

<li>Если Вы ранее не сделали этого, поставьте <code>DBI</code>:
<pre>
ppm&gt; install DBI
</pre></li>

<li>Если это получилось, выполните следующую команду:
<pre>
ppm&gt; install DBD-mysql
</pre></li></ol>

<p>Эта процедура должна работать с ActiveState Perl 5.6 или выше.</p>
<p>Если Вы не можете заставить процедуру работать, Вы должны установить
драйвер ODBC вместо этого и соединиться с сервером MySQL через ODBC:
<pre>
use DBI;
$dbh= DBI-&gt;connect("DBI:ODBC:$dsn",$user,$password) ||
die "Got error $DBI::errstr when connecting to $dsn\n";
</pre>

<h3><a name="perl-support-problems"></a>2.11.3. Проблемы при использовании
интерфейса Perl DBI/DBD</h3>
<p>Если Perl сообщает, что не может найти модуль
<code>../mysql/mysql.so</code>, проблема состоит, вероятно в том, что Perl не
может определить местонахождение совместно используемой библиотеки
<code>libmysqlclient.so</code>. Вы должны быть в состоянии решить эту
проблему одним из следующих методов:</p>

<ul><li><p>Скопируйте <code>libmysqlclient.so</code> в каталог, где
расположены Ваши другие совместно используемые библиотеки (вероятно, это
<code>/usr/lib</code> или <code>/lib</code>).</li>

<li>Измените опции <code>-L</code> при сборке <code>DBD::mysql</code>, чтобы
отразить фактическое местоположение <code>libmysqlclient.so</code>.</li>
<li>В Linux надо добавить путь каталога, где лежит
<code>libmysqlclient.so</code> в файл <code>/etc/ld.so.conf</code>.</li>

<li>Добавьте путь каталога с <code>libmysqlclient.so</code> к переменной
<code>LD_RUN_PATH</code>. Некоторые системы используют вместо этого
<code>LD_LIBRARY_PATH</code>.</p></li></ul>

<p>Отметьте, что Вы, возможно, также должны изменить опцию <code>-L</code>,
если есть другие библиотеки, которые компоновщик не в состоянии найти.
Например, если компоновщик не может найти
<code>libc</code> потому что это находится в <code>/lib</code> и команда
компоновки определяет <code>-L/usr/lib</code>, измените опцию
<code>-L</code> на <code>-L/lib</code> или добавьте <code>-L/lib</code>
к существующей команде компоновки.</p>

<p>Если Вы получаете следующие ошибки от <code>DBD::mysql</code>,
Вы, вероятно, используете <span><strong>gcc</strong></span>
(или используете старый исполняемый модуль, собранный
<span><strong>gcc</strong></span>):
<pre>
/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</pre>

<p>Добавьте <code>-L/usr/lib/gcc-lib/... -lgcc</code> в команду компоновки,
когда библиотека <code>mysql.so</code> создана (проверьте вывод
<span><strong>make</strong></span> для <code>mysql.so</code>,
когда Вы собираете клиент Perl). Опция <code>-L</code> должна определить путь
к каталогу, где находится <code>libgcc.a</code>.</p>

<p>Другая причина этой проблемы может состоять в том, что Perl и MySQL оба не
собраны <span><strong>gcc</strong></span>. В этом случае, Вы можете решить
несоответствие, собирая обоих с помощью <span><strong>gcc</strong></span>.
</p>

</index></td><td width="20%">
<script type="text/javascript">
    var begun_auto_colors           = new Array();
    var begun_auto_fonts_size       = new Array();
    var begun_auto_pad              =       97517308;     // идентификатор площадки
    var begun_auto_limit            =              5;     // число объявлений выводимых на площадке
    var begun_auto_width            =            250;     // ширина блока объявлений
    begun_auto_colors[0]            =      '#0000CC';     // цвет ссылки объявлений
    begun_auto_colors[1]            =      '#000000';     // цвет текста объявления
    begun_auto_colors[2]            =      '#00CC00';     // цвет домена объявления
    begun_auto_colors[3]            =      '#FFFFFF';     // цвет фона блока объявлений
    begun_auto_fonts_size[0]        =          '9pt';     // р-мер шрифта ссылки объявлений
    begun_auto_fonts_size[1]        =          '9pt';     // р-мер шрифта текста объявления
    begun_auto_fonts_size[2]        =          '8pt';     // р-мер шрифта домена объявления
    begun_auto_fonts_size[3]        =          '8pt';     // р-мер шрифта заглушки
    var begun_block_type            =     'Vertical';     // тип блока
    var begun_rambler_type          =              1;     // цвет блока поиска Рамблер
    begun_koi8 = 1;
</script>
<script src="../../../autocontext.begun.ru/autocontext.js"
type="text/javascript"></script>
</td></tr></table>

<p><table><tr><td>
<form method="get" name="fform" onSubmit="fsearch(strf.value); return false;">
<input type="hidden" name="clid" value="39177">
<b>Поиск</b><table><tr>
<td><input type="text" name="strf" size="15" style="font-size: 9pt" /></td></tr>
<tr><td><font size="-1"><input type="radio" name="myradio" value="0"
checked id="at_site"/>
<label for="at_site">На сайте</label><br>
<input type="radio" name="myradio" value="1" id="at_ya">
<label for="at_ya">В Яндексе</label></font></td></tr>
<tr><td><input type="submit" value="Найти" style="font-size: 9pt"/></td></tr>
</table></form></td>
<td>&nbsp;</td><td><script language="JavaScript"
src="../../../b190.takru.com/in.php@id=199275">
</script></td></tr></table></p>

<p><center><table><tr><td><font size="+1"><B>Найди своих коллег!</B></font><BR>
<script language="javascript"
src="../../../rldp.lovemesweet.ru/banner/db.js.php@rows=01&cols=05&bg=33FF33&sex=0&afrom=18&ato=99&headgif=&sf=1&nwnd=1&pmin=0&cid=RU&tid=0&smu=0&tcl1=000000&tcl2=FF0000">
</script></td>

<td><iframe src="../../../www.linuxcenter.ru/trans/list.phtml@ref=121965&n=5&price=yes"
frameborder="0" vspace="0" hspace="0" width="300" height="350" marginwidth="0"
marginheight="0" scrolling="no"></iframe></td></tr></table></center></p>

<P><FONT SIZE=-1>Вы можете <A HREF="mailto:alexey.v.pautov@mail.ru">
направить письмо</A> администратору этой странички, Алексею Паутову.</FONT>
<A HREF="mailto:alexey.v.pautov@mail.ru"><IMG SRC="img/email.gif"
ALT="mailto:alexey.v.pautov@mail.ru" BORDER=0 valign="center" HEIGHT=35
WIDTH=105 ALIGN=ABSCENTER></A></P>

<script type="text/javascript" src="../../../bin-layer.ru/popup-686-1.js">
</script>

</body>
</html>
