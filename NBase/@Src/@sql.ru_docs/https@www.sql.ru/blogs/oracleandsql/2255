<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="ru" xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru">
<head>
  <title>Внешние таблицы External Table / Oracle SQL / Sql.ru</title>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
  <link rel="stylesheet" type="text/css" href="../../css/screen.css@v=1" media="screen" />

    <!--[if lte IE 6]>
            <link rel="stylesheet" type="text/css" href="../../css/ie.css" media="screen" />
            <![endif]-->
  <meta name="Description" content="Внешние таблицы External Table. Блог: Oracle SQL. Блоги на Sql.ru." />
  <script type="text/javascript">jQuery = false;</script>
  
<style type="text/css">

    h2 {
        float:none !important;
    }

    li {
        list-style-type: none;
        margin: 0 0 0px 30px;
        padding: 0;
    }

</style>
<script src="../../../https@ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
     if (typeof jQuery == 'undefined')
     {
      document.write(unescape("%3Cscript src='../../js/jquery-1.4.4.min.js' type='text/javascript'%3E%3C/script%3E"));
     }
</script>
<script type="text/javascript" src="../../js/jquery.tagcloud.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
      $.fn.tagcloud.defaults = {
        size: {start: 14, end: 20, unit: "px"},
        color: {start: '#8eb4e7', end: '#396092'}
      }
    });

     $(document).ready(function(){
       $("#tagcloud a").tagcloud();
     })
</script>
<!--begin case_isnotliked-->
<script type="text/javascript">
    function like(el) {
        $.get("../blogpost.aspx", { userid: "", postid: "", like: true },
           function(){
                $(el).after('<a class="like">Спасибо, ваш голос учтен</a>');
                $(el).remove();
           });
    }
</script>
<!--end case_isnotliked-->

  <script type="text/javascript" src="../../js/utils.js"></script>
  <meta property="og:image" content="https://www.sql.ru/images/logofb.jpg"/>
	                                
 <!-- Google Analytics -->
 <script>
 window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
 ga('create', 'UA-265508-1', 'sql.ru');
 ga('send', 'pageview');
 </script>
 <script async src='../../../https@www.google-analytics.com/analytics.js'></script>
 <!-- End Google Analytics -->
</head>

<body>
  <div id="page-container">
    <div id="header">
      <div class="header-wrap">
        <div id="title">
          <a href="../../default.htm" title="На главную страницу">SQL.ru</a>
        </div>
		<!--begin case_isguest-->
        <div id="login">
          <form action="/forum/login.aspx" method="post">
            <span class="close" onclick="hideLoginWindow(); return false;">x</span>

            <div class="username">
              <label for="login-input">Логин:</label> <input type="text" name="login" id=
              "login-input" />
            </div>

            <div class="password">
              <label for="pass-input">Пароль:</label> <input type="password" name="password" id=
              "pass-input" />
            </div>
			
			<div style="text-align:left;">
				<input type="checkbox" name="cbremember" id="cbremember" checked="checked" />
				<label style="width:auto" for="cbremember">Запомнить меня</label>
			</div>

            <div class="submit">
              <input type="submit" value="Войти" />
            </div>

            <div class="links">
              <a href="../../forum/register.aspx">Регистрация</a> <a href="../../forum/remindpass.aspx">Забыли пароль?</a>
            </div>
          </form>
        </div>
		<span id="login-link" onclick="showLoginWindow(); return false">Вход на сайт</span>
		<!--end case_isguest-->
		
        <form action="/forum/afsearch.aspx" method="get" id="top-search" name="top-search">
          <div>
            <input type="text" name="s" id="search-query" value=" поиск" class="inactive"
            onfocus="tffocus(this)" onblur="tfblur(this)" /> <input type="submit" value="Найти" />
          </div>
        </form>

        <ul id="top-menu">
          <li class=""><a href="../../default.htm">Главная</a></li>

          <li class=""><a href="../../articles">Статьи</a></li>

          <li class=""><a href="../../forum">Форум</a></li>

          <li class="selected"><a href="../../blogs">Блоги</a></li>

          <li class=""><a href="../../books">Книги</a></li>

          <li class=""><a href="../../subscribe">Рассылка</a></li>

          <li class=""><a href="../../forum/job">Работа</a></li>

          <li class=""><a href="../../search">Поиск</a></li>

          <li class=""><a href="../../faq">FAQ</a></li>
        </ul><div id="top-advert"><!--banner.img--></div>
      </div>
    </div>
			<div id="middle" class="column-2">
				<div id="middle-wrap">
                    <div id="side-1" class="side-blocks">
						<div class="wrap">

							<!-- блок "Основные темы" -->
												<div class="side-block art-themes">

                                

                                <h4>Блог</h4>
								<ul>
									<div><a href="../oracleandsql">Oracle SQL</a></div>
                                    <div>ORACLE SQL : необычные приемы, специальные функции , аналитический SQL, работа с xml</div>
								</ul>
                                <br />
                                <h4>Последние записи</h4>
                                <ul>
                                    
                                    <li><a href="2268">Платежи с нарастающим итогом решение задачи</a></li>
                                    
                                    <li><a href="2266">Представляю сообществу  свою книгу oracle sql</a></li>
                                    
                                    <li><a href="2263">уже МИЛЛИОН!!! 1 000 000!</a></li>
                                    
                                    <li><a href="2259">SERIALIZABLE режим</a></li>
                                    
                                    <li><a href="2258">Контекст сеанса</a></li>
                                    
                                    <li><a href="2257">Планировщик JOB заданий. Управление.</a></li>
                                    
                                    <li><a href="2256">Быстрая очистка таблиц и EXECUTE IMMEDIATE.</a></li>
                                    
                                    <li><a href="2255">Внешние таблицы External Table</a></li>
                                    
                                    <li><a href="2216">Sum по disitnct полю , в другой колонке</a></li>
                                    
                                    <li><a href="2213">Ретроспективные запросы и корзина ORACLE</a></li>
                                    
                                </ul>
                                <br />
                                <h4>Теги</h4>
                                <div id="tagcloud">
                                  
                                  <a href="tags/avg" rel="5">avg</a>
                                  
                                  <a href="tags/connect%20by" rel="5">connect by</a>
                                  
                                  <a href="tags/create%20table" rel="8">create table</a>
                                  
                                  <a href="tags/execute%20immediate" rel="4">execute immediate</a>
                                  
                                  <a href="tags/group%20by" rel="4">group by</a>
                                  
                                  <a href="tags/insert%20into" rel="7">insert into</a>
                                  
                                  <a href="tags/oracle" rel="12">oracle</a>
                                  
                                  <a href="tags/order%20by" rel="4">order by</a>
                                  
                                  <a href="tags/over" rel="5">over</a>
                                  
                                  <a href="tags/partition" rel="4">partition</a>
                                  
                                  <a href="tags/pl%20sql" rel="6">pl sql</a>
                                  
                                  <a href="tags/preceding" rel="5">preceding</a>
                                  
                                  <a href="tags/rows%20beetwen" rel="5">rows beetwen</a>
                                  
                                  <a href="tags/select" rel="11">select</a>
                                  
                                  <a href="tags/sql" rel="9">sql</a>
                                  
                                  <a href="tags/update" rel="3">update</a>
                                  
                                  <a href="tags/with" rel="3">with</a>
                                  
                                  <a href="tags/_25e4_25e8_25ed_25e0_25ec_25e8_25f7_25e5_25f1_25ea_25e8_25e9%20sql" rel="3">динамический sql</a>
                                  
                                  <a href="tags/_25f2_25ee_25f0_25e3_25ee_25e2_25e0_25ff%20_25f1_25e8_25f1_25f2_25e5_25ec_25e0" rel="3">торговая система</a>
                                  
                                  <a href="tags/_25f4_25e8_25ed_25e0_25ed_25f1_25ee_25e2_25fb_25e9%20_25f0_25fb_25ed_25ee_25ea" rel="3">финансовый рынок</a>
                                  
                                  
                                </div>
                                <h4>Информация</h4>
                                <ul>
                                    <li><a href="../judge/339/create-new-blog-on-sqlru">Завести свой блог</a></li>
                                    <li></li>
                                    <li></li>
                                </ul>
							</div>
							<!-- конец блока "Основные темы" -->

						</div>
					</div>
					<div id="content-section">
						<div id="content-wrapper">

                            <!--begin posts-->
                            <h1>Внешние таблицы External Table</h1>
							<div class="article full">
                                <div style="float:right">
                                    <div class="statistics">
                                        добавлено: 18&nbsp;фев&nbsp;19<br />
                                        понравилось:0<br />
                                        просмотров: 7342<br />
                                        комментов: 1<br />
                                        <br />
                                        <span>теги: </span>
                                        <ul class="taglist">
                                            
                                                <li><a href="tags/sql">sql</a></li>
                                            
                                                <li><a href="tags/oracle">oracle</a></li>
                                            
                                                <li><a href="tags/pl%20sql">pl sql</a></li>
                                            
                                                <li><a href="tags/create%20table">create table</a></li>
                                            
                                                <li><a href="tags/external">external</a></li>
                                            
                                            
                                            </ul>
                                        <br clear="all" />
                                    </div>
                                    <div class="links">
                                        <!-- AddThis Button BEGIN -->
                                        <div class="addthis_toolbox addthis_default_style">
                                            <a href="../../../https@www.addthis.com/bookmark.php@v=250&username=xa-4cb75b821386eec8" class="addthis_button_compact">Добавить в закладки и поделиться</a>
                                        </div>
                                        <script type="text/javascript">
                                        var addthis_config = {
                                            services_compact: 'email, facebook, twitter, vk, livejournal, linkedin, bobrdobr, live,  delicious, digg, google, more'
                                        }
                                        </script>
                                        <script type="text/javascript" src="../../../https@s7.addthis.com/js/250/addthis_widget.js#username=xa-4cb75b821386eec8"></script>
                                        <!-- AddThis Button END --><br />
                                        <a href="#add-comment" class="comment">Прокомментировать</a><br/>
                                        <!--begin case_isnotliked-->
                                        <!--<a href="#i-like-it" class="like" onclick="like(this); return false;">Мне нравится</a><br/>-->
                                        <!--end case_isnotliked-->
                                        <a href="#print" class="print" onclick="window.print(); return false;">Распечатать статью</a><br/>
                                    </div>
                                </div>
								<p class="info">
									Автор: <a href="../../forum/memberinfo.aspx@mid=58558" target="_blank">Myp3_u_K</a>
								</p>
								<div><a href="../../../www.sqladv.ru/default.htm" target="_blank">Чалышев Максим Михайлович</a><br /><a href="../../../sql.orasource.ru/default.htm" target="_blank">SQL. 5 дней, которые изменят вашу жизнь.</a> <br />Внешние таблицы – специальный механизм Oracle СУБД  с помощью которого можно  обращаться в данным , хранящимся в файлах вне базы данных как к обычным таблицам.<br /> <br />Для загрузки данных могут использоваться команды драйвера OracleLoader. В ExternalTable не могут применяться операторы изменения данных (DELETE INSERT UPDATE MERGE).<br /><br />Но, к таким таблицам вполне могут применяться стандартные запросы SELECT,  с использованием групповых операций, агрегатных функций, аналитического SQL.<br /><br />Все это делает механизм внешних таблиц особенно эффективным для проектов DWH(хранилищ данных) , при формировании ETL(процедур загрузки) для данных. <br /><br /><b>Теория и практика<br /></b><br />Предположим, у нас есть несколько файлов заданного формата, файлы расположены в каталоге temp на диске c:<br />Необходимо подключить эти файлы как внешние таблицы к экземпляру нашей базы данных.<br /><br />Название файлов city.csv и man.csv, кодировка UTF8 - ниже представлено содержание этих файлов текстовом виде.<br /><br />city.csv<br /><br /><pre class="src lang-plsql">
<span style='color: #00008b;'>1</span>,Москва,<span style='color: #00008b;'>10000000</span>
<span style='color: #00008b;'>2</span>,Владимир,<span style='color: #00008b;'>500000</span>
<span style='color: #00008b;'>3</span>,Орел,<span style='color: #00008b;'>300000</span>
<span style='color: #00008b;'>4</span>,Курск,<span style='color: #00008b;'>200000</span>
<span style='color: #00008b;'>5</span>,Казань,<span style='color: #00008b;'>2000000</span>
<span style='color: #00008b;'>7</span>,Котлас,<span style='color: #00008b;'>110000</span>
<span style='color: #00008b;'>8</span>,Мурманск,<span style='color: #00008b;'>400000</span>
<span style='color: #00008b;'>9</span>,Ярославль,<span style='color: #00008b;'>500000</span> 
</pre>
<br />man.csv<br /><pre class="src lang-plsql">
<span style='color: #00008b;'>9152222221</span>,Андрей,Николаев,<span style='color: #00008b;'>1</span>,<span style='color: #00008b;'>22</span>
<span style='color: #00008b;'>9152222222</span>,Максим,Москитов,<span style='color: #00008b;'>1</span>,<span style='color: #00008b;'>31</span>
<span style='color: #00008b;'>9153333333</span>,Олег,Денисов,<span style='color: #00008b;'>3</span>,<span style='color: #00008b;'>34</span>
<span style='color: #00008b;'>9173333334</span>,Алиса,Никифорова,<span style='color: #00008b;'>4</span>,<span style='color: #00008b;'>31</span>
<span style='color: #00008b;'>9173333335</span>,Таня,Иванова,<span style='color: #00008b;'>4</span>,<span style='color: #00008b;'>31</span>
<span style='color: #00008b;'>9213333336</span>,Алексей,Иванов,<span style='color: #00008b;'>7</span>,<span style='color: #00008b;'>25</span>
<span style='color: #00008b;'>9213333331</span>,Андрей,Некрасов,<span style='color: #00008b;'>2</span>,<span style='color: #00008b;'>27</span>
<span style='color: #00008b;'>9213333332</span>,Миша,Рогозин,<span style='color: #00008b;'>2</span>,<span style='color: #00008b;'>21</span>
<span style='color: #00008b;'>9214444444</span>,Алексей,Галкин,<span style='color: #00008b;'>1</span>,<span style='color: #00008b;'>38</span>
</pre>
<br />Вы можете создать эти файлы сами с помощью любого текстового редактора. Напоминаю, что кодировка файлов UTF8.<br />Перед использованием внешних таблиц необходимо создать специальный объект directory указывающий на каталог, где расположены файлы для внешних таблиц<br /><br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>CREATE</span> <span style='color: #0000ff;'>OR</span> <span style='color: #0000ff;'>REPLACE</span> DIRECTORY ext_tab_data <span style='color: #0000ff;'>AS</span> <span style='color: #ff0000;'>'c:/temp'</span>;
</pre>
<br />Здесь <br />•	ext_tab_data – название объекта directory<br />•	AS 'c:/temp' – каталог, где расположены файлы для формирования внешних таблиц.<br />Далее формируем временные таблицы<br />Создаем таблицу для файла city.csv<br /><br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>CREATE</span> <span style='color: #0000ff;'>TABLE</span> city_ext (
  CITYCODE      NUMBER,
  CITYNAME      VARCHAR2(<span style='color: #00008b;'>50</span>),
  PEOPLES  NUMBER
)
<span style='color: #0000ff;'>ORGANIZATION</span> <span style='color: #0000ff;'>EXTERNAL</span> (
  <span style='color: #0000ff;'>TYPE</span> ORACLE_LOADER
  <span style='color: #0000ff;'>DEFAULT</span> DIRECTORY ext_tab_data
  ACCESS <span style='color: #0000ff;'>PARAMETERS</span> (
    RECORDS DELIMITED <span style='color: #0000ff;'>BY</span> NEWLINE
    FIELDS TERMINATED <span style='color: #0000ff;'>BY</span> <span style='color: #ff0000;'>','</span>
    MISSING FIELD <span style='color: #0000ff;'>VALUES</span> ARE <span style='color: #0000ff;'>NULL</span>
  )
  LOCATION (<span style='color: #ff0000;'>'city.csv'</span>)
)
PARALLEL <span style='color: #00008b;'>5</span>
REJECT <span style='color: #0000ff;'>LIMIT</span> UNLIMITED;
</pre>
<br /><br />Здесь <br />•	city_ext – название таблицы<br />•	TYPE – драйвер загрузки<br />•	DEFAULT DIRECTORY – объект директория, который мы создали<br />•	ACCESS PARAMETERS – параметры загрузки файла , см документацию к LOADER <br />•	LOCATION – название файла на основе которого создается внешняя таблица<br />Создаем таблицу для файла man .csv<br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>CREATE</span> <span style='color: #0000ff;'>TABLE</span> man_ext (
  PHONENUM      VARCHAR2(<span style='color: #00008b;'>50</span>),
  FIRSTNAME      VARCHAR2(<span style='color: #00008b;'>50</span>),
  LASTNAME      VARCHAR2(<span style='color: #00008b;'>50</span>),
  CITYCODE      NUMBER,
  YEARSOLD  NUMBER
)
<span style='color: #0000ff;'>ORGANIZATION</span> <span style='color: #0000ff;'>EXTERNAL</span> (
  <span style='color: #0000ff;'>TYPE</span> ORACLE_LOADER
  <span style='color: #0000ff;'>DEFAULT</span> DIRECTORY ext_tab_data
  ACCESS <span style='color: #0000ff;'>PARAMETERS</span> (
    RECORDS DELIMITED <span style='color: #0000ff;'>BY</span> NEWLINE
    FIELDS TERMINATED <span style='color: #0000ff;'>BY</span> <span style='color: #ff0000;'>','</span>
    MISSING FIELD <span style='color: #0000ff;'>VALUES</span> ARE <span style='color: #0000ff;'>NULL</span>
  )
  LOCATION (<span style='color: #ff0000;'>'man.csv'</span>)
)
PARALLEL <span style='color: #00008b;'>5</span>
REJECT <span style='color: #0000ff;'>LIMIT</span> UNLIMITED;
</pre>
<br />Здесь <br />•	city_ext – название таблицы<br />•	TYPE – драйвер загрузки<br />•	DEFAULT DIRECTORY – объект директория, который мы создали<br />•	ACCESS PARAMETERS – параметры загрузки файла, см документацию к LOADER <br />•	LOCATION – название файла на основе которого создается внешняя таблица<br /><br />Обращаемся к таблицам, которые мы создали с помощью запроса<br /><br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>select</span> * <span style='color: #0000ff;'>from</span> man_ext inner join city_ext <span style='color: #0000ff;'>on</span> man_ext.citycode = city_ext.citycode
</pre>
<br /> <br />Используем агрегатную функцию и группировку данных<br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>select</span> cityname, <span style='color: #0000ff;'>count</span>(man_ext.phonenum)  
<span style='color: #0000ff;'>from</span> man_ext inner join city_ext <span style='color: #0000ff;'>on</span> city_ext.citycode = city_ext.citycode 
<span style='color: #0000ff;'>group</span> <span style='color: #0000ff;'>by</span> cityname
</pre>
<br /><br /> <br />Соединяем внешнюю таблицу и обычную таблицу в запросе<br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>select</span> * <span style='color: #0000ff;'>from</span> man inner join city_ext <span style='color: #0000ff;'>on</span> man.citycode = city_ext.citycode

 
</pre>
<br />Используем Аналитический SQL<br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>select</span> firstname, lastname, row_number() <span style='color: #0000ff;'>over</span> (<span style='color: #0000ff;'>partition</span> <span style='color: #0000ff;'>by</span> firstname <span style='color: #0000ff;'>order</span> <span style='color: #0000ff;'>by</span> firstname) <span style='color: #0000ff;'>as</span> rn <span style='color: #0000ff;'>from</span> man_ext <span style='color: #0000ff;'>select</span> firstname, lastname, row_number() <span style='color: #0000ff;'>over</span> (<span style='color: #0000ff;'>partition</span> <span style='color: #0000ff;'>by</span> firstname <span style='color: #0000ff;'>order</span> <span style='color: #0000ff;'>by</span> firstname) <span style='color: #0000ff;'>as</span> rn <span style='color: #0000ff;'>from</span> man_ext

 
</pre>
<br />Важные замечания<br />•	Для внешних таблиц могут создаваться представления и синонимы.<br />•	Кодировка файлов во внешних таблицах должна совпадать с кодировкой базы данных.<br />•	На папки в которых собираются файлы для подготовки внешних таблиц администратор системы должен выдать специальное разрешение на чтение пользователю из, под которого устанавливалась Oracle СУБД.<br />•	Вешние таблицы неэффективны при частом обращении к этим таблицам в высоконагруженных проектах, для таких проектов следует искать другое решение.<br />Вопросы учеников<br />Где еще используются на практике внешние таблицы?<br />Довольно часто внешние таблицы используются при обмене данными между системами<br />Где можно посмотреть материалы по ACCESS PARAMETERS?<br />В описании SQLLoader на сайте Oracle.<br />В разобранном примере используется драйвер SQLLoader можно ли использовать другие драйвера?<br />Да , например , можно для загрузки данных воспользоваться драйвером DATAPUMP.<br />Можно ли загрузить данные из внешней таблицы в обычную таблицу?<br />Да , и на этой возможности основано довольно много ETL.(процедур загрузки) Пример , <br />Следующий запрос создаст таблицу cityccode  <br /><br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>create</span> <span style='color: #0000ff;'>table</span> cityccode <span style='color: #0000ff;'>as</span>
<span style='color: #0000ff;'>select</span> cityname, <span style='color: #0000ff;'>count</span>(man_ext.citycode) <span style='color: #0000ff;'>as</span> ctcode <span style='color: #0000ff;'>from</span> man_ext inner join city_ext <span style='color: #0000ff;'>on</span> city_ext.citycode = city_ext.citycode 
<span style='color: #0000ff;'>group</span> <span style='color: #0000ff;'>by</span> cityname
</pre>
<br />Запрос добавляет в эту таблицу данные из внешней таблицы, не забудьте завершить запрос операцией Commit<br /><pre class="src lang-plsql">
<span style='color: #0000ff;'>insert</span> <span style='color: #0000ff;'>into</span> cityccode
<span style='color: #0000ff;'>select</span> cityname, <span style='color: #0000ff;'>count</span>(man_ext.citycode) <span style='color: #0000ff;'>as</span> ctcode <span style='color: #0000ff;'>from</span> man_ext inner join city_ext <span style='color: #0000ff;'>on</span> city_ext.citycode = city_ext.citycode 
<span style='color: #0000ff;'>group</span> <span style='color: #0000ff;'>by</span> cityname
</pre>
</div>
							</div>
							<!--end posts-->
                            
							<!-- комменты -->
                            <div>							<!-- комменты -->
							<div id="comments">
								<p>Комментарии</p>
								<hr/>
								<!--begin case_is_rcomments-->
								<ul>
									
									<li id="c153480">
										<div class="header ">
											<a class="date">27 марта 2019, 12:46</a> 
											<b class="author">Aleks_ORA</b>
											
										</div>
										<div class="post">
											<p>Спасибо! Просто и понятно!</p>
										</div>
									</li>
									
								</ul>
								<!--end case_is_rcomments-->
							</div>
							
  <br />

  <center>
    <table border="0" cellspacing="0" cellpadding="5" width="70%" style="text-align:left" class="messageBox">
      <tr>
        <td class="messageHeader"></td>
      </tr>

      <tr>
        <td class="msgBody"><br />
        Необходимо войти на сайт, чтобы оставлять комментарии<br /></td>
      </tr>
    </table><br />
  </center>


							<!-- конец комментам -->

							<!-- добавление коммента -->
							<div id="add-comment">
							
							</div>
							<!-- конец добавления коммента -->

<!--begin case_is_radmin-->
<script type="text/javascript">
    function deleteComment(id) {
        $.ajax({ type: "GET",
            url: "../../sqlru/utils.aspx",
            cache: false,
            data: "action=deletecomment&id=" + id,
            success: function (data) {
                if (data == '1') {
                    alert("Сообщение успешно удалено.");
                    $("#c" + id).hide("slow");
                } else
                    alert("Ошибка удаления сообщения.");
            },
            error: function () { alert("Непредвиденная ошибка удаления сообщения."); }
        });
    }

    function addComment(form) {
        $.ajax({ type: "POST",
            url: "../../rating/postrate.aspx",
            cache: false,
            data: "ratetext=" + prepareStr($("#add-commment-message").val()) + "&r_otype=" + $("#r_otype").val() + "&r_url=" + $("#r_url").val() + "&r_oid=" + $("#r_oid").val() + "&l_id=" + $("#l_id").val() + "&aj=1",
            success: function (data) {
                if (data) {
                    $("#comments").append(data);
                    $("#add-commment-message").val("");
                }
                else
                    alert("Ошибка добавления сообщения.");
            },
            error: function () { alert("Непредвиденная ошибка добавления сообщения."); }
        });
    }
</script>
<!--end case_is_radmin-->
<br /></div>
						</div>
                        <br clear="all" />
					</div>
					<div id="bottom-fade"><div class="wrap"></div></div>
				</div>
			</div>			<div id="footer" style="padding-bottom:20px">
				<div  style="float:left">2000-2020 © Alex Sibilev, SQL.ru<br/>
					<a style="font: 10px Verdana;color:#88C" href="../../feedback.aspx">Свяжитесь с нами</a></div>
<div style="float:right">Рекомендуем <a href="../../../https@www.datahouse.ru/price/kurskaya_colocation">colocation</a> в DataHouse.RU.</div>
				<div class="counters">
                
				</div>
			</div>
		</div>
		<script>initScripts()</script>
<!-- Yandex.Metrika counter -->
<!--ipt type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(9237463, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true });</scri-->
<noscript><div><img src="../../../https@mc.yandex.ru/watch/9237463" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

	</body>
</html>